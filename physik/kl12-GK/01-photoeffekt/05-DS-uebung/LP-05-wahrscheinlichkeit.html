<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aufenthaltswahrscheinlichkeit | Physik 12 GK</title>
    <style>
/* ═══════════════════════════════════════════════════════════════
   LERNPFAD: Aufenthaltswahrscheinlichkeit
   sciencesim Design System (ES5)
═══════════════════════════════════════════════════════════════ */

* { box-sizing: border-box; margin: 0; padding: 0; }

:root {
    --bg: #f5f5f5;
    --white: #ffffff;
    --border: #dddddd;
    --text-primary: #222222;
    --text-secondary: #555555;
    --text-muted: #888888;
    --accent: #2c5aa0;
    --accent-light: #e8f0fa;
    --success: #2a7a4b;
    --success-bg: #e8f5e9;
    --warning: #b35c00;
    --warning-bg: #fff3e0;
    --electron: #1565c0;
    --glow: #4fc3f7;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg);
    font-size: 16px;
    color: var(--text-primary);
    line-height: 1.5;
}

.container {
    max-width: 900px;
    margin: 0 auto;
    padding: 15px;
}

/* Header */
header {
    background: var(--white);
    border: 1px solid var(--border);
    padding: 15px 20px;
    margin-bottom: 20px;
}

header h1 {
    color: var(--accent);
    font-size: 1.4em;
    font-weight: 600;
}

header .meta {
    color: var(--text-secondary);
    font-size: 0.85em;
    margin-top: 5px;
}

/* Navigation */
.nav-bar {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.nav-btn {
    padding: 8px 16px;
    background: var(--white);
    border: 1px solid var(--border);
    cursor: pointer;
    font-size: 0.85em;
}

.nav-btn:hover {
    background: var(--accent-light);
}

.nav-btn.active {
    background: var(--accent);
    color: var(--white);
    border-color: var(--accent);
}

/* Sections */
.section {
    display: none;
    background: var(--white);
    border: 1px solid var(--border);
    padding: 20px;
    margin-bottom: 20px;
}

.section.active {
    display: block;
}

.section h2 {
    color: var(--accent);
    font-size: 1.2em;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--accent);
}

.section h3 {
    color: var(--text-primary);
    font-size: 1em;
    margin: 20px 0 10px 0;
}

/* Content Boxes */
.info-box {
    background: var(--accent-light);
    border-left: 3px solid var(--accent);
    padding: 12px 15px;
    margin: 15px 0;
    font-size: 0.95em;
}

.merksatz {
    background: var(--success-bg);
    border: 2px solid var(--success);
    padding: 15px;
    margin: 20px 0;
    text-align: center;
}

.merksatz strong {
    color: var(--success);
    font-size: 1.1em;
}

.hefter-hinweis {
    background: var(--warning-bg);
    border: 2px solid var(--warning);
    padding: 12px 15px;
    margin: 20px 0;
    font-size: 0.9em;
}

.hefter-hinweis::before {
    content: "Arbeitsblatt";
    display: inline-block;
    background: var(--warning);
    color: white;
    font-size: 0.75em;
    font-weight: 600;
    padding: 2px 8px;
    margin-bottom: 8px;
}

/* History Box */
.history-box {
    background: #f9f6f0;
    border: 1px solid #d4c5a9;
    padding: 15px;
    margin: 15px 0;
}

.history-box .year {
    font-weight: 600;
    color: var(--accent);
}

/* Simulation Container */
.sim-container {
    background: #1a1a2e;
    border: 1px solid #333;
    margin: 20px 0;
    padding: 15px;
}

.sim-container canvas {
    display: block;
    width: 100%;
    max-width: 700px;
    margin: 0 auto;
    background: #0d0d1a;
}

.sim-controls {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-top: 15px;
    flex-wrap: wrap;
}

.sim-btn {
    padding: 8px 20px;
    background: var(--accent);
    color: white;
    border: none;
    cursor: pointer;
    font-size: 0.9em;
}

.sim-btn:hover {
    background: #1e4a8a;
}

.sim-btn.secondary {
    background: #555;
}

.sim-info {
    color: #aaa;
    font-size: 0.85em;
    text-align: center;
    margin-top: 10px;
}

/* Comparison Table */
.comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin: 20px 0;
}

.comparison-col {
    background: var(--bg);
    border: 1px solid var(--border);
    padding: 15px;
    text-align: center;
}

.comparison-col h4 {
    margin-bottom: 10px;
    color: var(--accent);
}

.comparison-col .pattern {
    font-size: 1.5em;
    margin: 15px 0;
    font-family: monospace;
}

/* Formula */
.formula {
    font-family: "Times New Roman", Times, serif;
    font-style: italic;
    font-size: 1.1em;
    text-align: center;
    padding: 15px;
    background: var(--bg);
    margin: 15px 0;
}

.formula .fz {
    font-family: "Times New Roman", Times, serif;
    font-style: italic;
}

.formula .einheit {
    font-family: sans-serif;
    font-style: normal;
}

/* Progress */
.progress-bar {
    height: 4px;
    background: var(--border);
    margin-bottom: 20px;
}

.progress-fill {
    height: 100%;
    background: var(--accent);
    transition: width 0.3s;
}

/* Experiment Link */
.experiment-link {
    display: block;
    background: var(--accent-light);
    border: 2px solid var(--accent);
    padding: 20px;
    text-align: center;
    text-decoration: none;
    color: var(--accent);
    margin: 20px 0;
    font-weight: 600;
}

.experiment-link:hover {
    background: var(--accent);
    color: white;
}

/* Responsive */
@media (max-width: 600px) {
    .comparison {
        grid-template-columns: 1fr;
    }
}
</style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Aufenthaltswahrscheinlichkeit</h1>
            <div class="meta">Physik 12 GK | Quantenobjekte | Fr 23.01.2026</div>
        </header>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <div class="nav-bar" id="navBar">
            <button class="nav-btn active" onclick="showSection(0)">1. Einstieg</button>
            <button class="nav-btn" onclick="showSection(1)">2. Experiment</button>
            <button class="nav-btn" onclick="showSection(2)">3. Erkenntnis</button>
            <button class="nav-btn" onclick="showSection(3)">4. Wellenfunktion</button>
            <button class="nav-btn" onclick="showSection(4)">5. Histogramm</button>
            <button class="nav-btn" onclick="showSection(5)">6. Vergleich</button>
            <button class="nav-btn" onclick="showSection(6)">7. Messung</button>
            <button class="nav-btn" onclick="showSection(7)">8. Zusammenfassung</button>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- SECTION 1: Historischer Einstieg -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section active" id="section0">
            <h2>1. Ein historisches Rätsel</h2>

            <div class="history-box">
                <p><span class="year">1909, Cambridge:</span> Der junge Physiker Geoffrey Taylor macht ein seltsames Experiment.</p>
                <p style="margin-top: 10px;">Er nimmt eine Kerze und schwächt ihr Licht so stark ab, dass nur noch einzelne Lichtteilchen (Photonen) unterwegs sind. Dann lässt er dieses schwache Licht durch einen Doppelspalt auf eine Fotoplatte fallen.</p>
            </div>

            <h3>Was erwartete man?</h3>
            <p>Wenn Licht aus einzelnen Teilchen besteht, sollte jedes Teilchen durch einen der beiden Spalte fliegen. Auf der Fotoplatte sollten zwei Streifen entstehen.</p>

            <h3>Was beobachtete Taylor?</h3>
            <ul style="margin: 10px 0 10px 20px;">
                <li>Einzelne Punkte erschienen auf der Fotoplatte</li>
                <li>Jeder Punkt war an einem anderen, scheinbar zufälligen Ort</li>
                <li>Nach langer Belichtung: Ein <strong>Interferenzmuster</strong>!</li>
            </ul>

            <div class="info-box">
                <strong>Das Rätsel:</strong> Jedes einzelne Photon landet an einem zufälligen Ort. Aber viele Photonen zusammen bilden ein geordnetes Muster. Wie kann das sein?
            </div>

            <p style="margin-top: 15px;">Heute wissen wir: Mit Elektronen funktioniert es genauso. Das wollen wir uns jetzt genauer anschauen.</p>

            <div style="text-align: right; margin-top: 20px;">
                <button class="sim-btn" onclick="showSection(1)">Weiter zum Experiment →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- SECTION 2: Simulation Doppelspalt -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section" id="section1">
            <h2>2. Elektronen am Doppelspalt</h2>

            <p>Wir schicken einzelne Elektronen durch einen Doppelspalt. Beobachte genau, wo sie auftreffen!</p>

            <div class="sim-container" style="padding: 15px;">
                <canvas id="simCanvas1" width="600" height="400"></canvas>
                <div class="sim-controls" style="margin-top: 15px;">
                    <button class="sim-btn" onclick="fireElectrons(1)">1 Elektron</button>
                    <button class="sim-btn" onclick="fireElectrons(10)">10 Elektronen</button>
                    <button class="sim-btn" onclick="fireElectrons(100)">100 Elektronen</button>
                    <button class="sim-btn" onclick="fireElectrons(1000)">1000 Elektronen</button>
                    <button class="sim-btn secondary" onclick="resetSim()">Reset</button>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 15px; padding: 10px; background: #252540; flex-wrap: wrap; gap: 10px;">
                    <div class="sim-info" style="margin: 0;">
                        Elektronen: <span id="electronCount" style="color: #4fc3f7; font-weight: bold;">0</span>
                    </div>
                    <div class="sim-info" style="margin: 0;">
                        <label style="cursor: pointer;">
                            <input type="checkbox" id="showProbToggle" onchange="toggleProb()" style="margin-right: 5px;">
                            Verteilung P(y) anzeigen
                        </label>
                    </div>
                </div>
                <div style="margin-top: 10px; padding: 12px; background: #fff3e0; border: 1px solid #ff9800;">
                    <label style="cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" id="detectorToggle" onchange="toggleDetector()" style="width: 18px; height: 18px;">
                        <span style="font-weight: 600; color: #e65100;">„Welcher Spalt?" Detektor</span>
                    </label>
                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                        Misst, durch welchen Spalt das Elektron fliegt
                    </div>
                </div>
            </div>

            <h3>Beobachtungsauftrag:</h3>
            <ol style="margin: 10px 0 10px 20px;">
                <li>Schieße <strong>100 Elektronen</strong> ab. Was siehst du auf dem Schirm?</li>
                <li>Drücke <strong>Reset</strong> und aktiviere den <strong>Detektor</strong>.</li>
                <li>Schieße erneut <strong>100 Elektronen</strong> ab. Was hat sich verändert?</li>
                <li>Deaktiviere den Detektor und wiederhole. Was passiert?</li>
            </ol>

            <div class="info-box">
                <strong>Das Rätsel:</strong> Sobald wir wissen, durch welchen Spalt das Elektron fliegt, verschwindet das Interferenzmuster! Die Messung selbst verändert das Ergebnis.
            </div>

            <div style="text-align: right; margin-top: 20px;">
                <button class="sim-btn" onclick="showSection(2)">Weiter zur Erkenntnis →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- SECTION 3: Erkenntnis -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section" id="section2">
            <h2>3. Die zentrale Erkenntnis</h2>

            <h3>Was hast du beobachtet?</h3>

            <div class="comparison">
                <div class="comparison-col">
                    <h4>Ein einzelnes Elektron</h4>
                    <div class="pattern">·</div>
                    <p>Der Auftreffort ist <strong>zufällig</strong>.</p>
                    <p>Niemand kann vorhersagen, wo es landet!</p>
                </div>
                <div class="comparison-col">
                    <h4>Viele Elektronen</h4>
                    <div class="pattern">░▓░▓░▓░</div>
                    <p>Es entsteht ein <strong>Muster</strong>.</p>
                    <p>Die Verteilung ist vorhersagbar!</p>
                </div>
            </div>

            <div class="merksatz">
                <strong>„Einzeln zufällig, in Summe determiniert"</strong>
                <p style="margin-top: 10px;">Das einzelne Messergebnis ist zufällig.<br>Die Verteilung vieler Messungen ist vorhersagbar.</p>
            </div>

            <div class="info-box">
                <strong>Das ist neu!</strong> In der klassischen Physik können wir vorhersagen, wo ein Objekt landet, wenn wir seine Anfangsbedingungen kennen. In der Quantenmechanik geht das nicht mehr. Wir können nur noch Wahrscheinlichkeiten angeben.
            </div>

            <div class="hefter-hinweis">
                <strong>Kasten 1:</strong> Übertrage den Lückentext zur stochastischen Vorhersagbarkeit.<br>
                Nutze die Begriffe: zufällig, vorhersagbar, viele, Interferenzmuster
            </div>

            <div style="text-align: right; margin-top: 20px;">
                <button class="sim-btn" onclick="showSection(3)">Weiter zur Wellenfunktion →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- SECTION 4: Wellenfunktion -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section" id="section3">
            <h2>4. Was beschreibt die Welle?</h2>

            <h3>Die Frage</h3>
            <p>Elektronen zeigen Interferenz wie Wellen. Aber was schwingt da eigentlich?</p>

            <h3>Die Antwort</h3>
            <p>Die Welle beschreibt nicht den Ort des Elektrons. Sie beschreibt die <strong>Wahrscheinlichkeit</strong>, das Elektron an einem bestimmten Ort zu finden!</p>

            <div class="formula">
                |ψ|² = Aufenthaltswahrscheinlichkeitsdichte
            </div>

            <div class="info-box">
                <strong>Warum heißt es trotzdem „Wellenfunktion"?</strong><br><br>
                Die Funktion ψ verhält sich mathematisch wie eine Welle: Sie kann sich überlagern, verstärken und auslöschen. Die Interferenz ist real!<br><br>
                Aber es schwingt keine Materie. Es „schwingt" die Wahrscheinlichkeit.<br><br>
                Bei vielen Teilchen sieht das Ergebnis aus wie eine klassische Welle. Bei wenigen Teilchen sieht man die Zufälligkeit der einzelnen Treffer.
            </div>

            <h3>Was bedeutet das für das Interferenzmuster?</h3>
            <ul style="margin: 10px 0 10px 20px;">
                <li><strong>Helle Streifen:</strong> |ψ|² ist groß → hohe Wahrscheinlichkeit</li>
                <li><strong>Dunkle Streifen:</strong> |ψ|² ist klein → niedrige Wahrscheinlichkeit</li>
            </ul>

            <p>In den dunklen Bereichen löschen sich die Wahrscheinlichkeitsamplituden aus. Dort treffen fast keine Elektronen auf, obwohl beide Spalte offen sind!</p>

            <div class="hefter-hinweis">
                <strong>Kasten 2:</strong> Übertrage den Lückentext zur Wahrscheinlichkeitswelle.<br>
                Nutze die Begriffe: Wahrscheinlichkeit, Aufenthaltswahrscheinlichkeitsdichte, groß, klein
            </div>

            <div style="text-align: right; margin-top: 20px;">
                <button class="sim-btn" onclick="showSection(4)">Weiter zum Histogramm →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- SECTION 5: Histogramm -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section" id="section4">
            <h2>5. Vom Zufall zur Ordnung</h2>

            <p>Beobachte, wie sich die Verteilung verändert, wenn immer mehr Elektronen ankommen.</p>

            <div class="sim-container">
                <canvas id="simCanvas2" width="700" height="300"></canvas>
                <div class="sim-controls">
                    <button class="sim-btn" onclick="addElectronsHist(10)">+10 Elektronen</button>
                    <button class="sim-btn" onclick="addElectronsHist(100)">+100 Elektronen</button>
                    <button class="sim-btn" onclick="addElectronsHist(500)">+500 Elektronen</button>
                    <button class="sim-btn secondary" onclick="resetHist()">Reset</button>
                </div>
                <div class="sim-info">
                    Elektronen: <span id="histCount">0</span>
                </div>
            </div>

            <h3>Was beobachtest du?</h3>
            <ul style="margin: 10px 0 10px 20px;">
                <li>Bei wenigen Elektronen: Das Histogramm sieht zufällig aus</li>
                <li>Bei vielen Elektronen: Die Form der Verteilung wird erkennbar</li>
                <li>Das Histogramm nähert sich der theoretischen |ψ|² Kurve an!</li>
            </ul>

            <div class="info-box">
                <strong>Stochastik in Aktion:</strong> Das ist wie beim Würfeln. Ein einzelner Wurf ist zufällig. Aber nach 1000 Würfen ist jede Zahl etwa gleich oft gefallen.
            </div>

            <div class="hefter-hinweis">
                <strong>Aufgabe 1:</strong> Bearbeite die Aufgabe zum Histogramm auf dem Arbeitsblatt.
            </div>

            <div style="text-align: right; margin-top: 20px;">
                <button class="sim-btn" onclick="showSection(5)">Weiter zum Vergleich →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- SECTION 6: Klassisch vs. Quantenmechanisch -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section" id="section5">
            <h2>6. Klassisch oder Quantenmechanisch?</h2>

            <p>Was wäre, wenn wir statt Elektronen kleine Kugeln durch den Doppelspalt schießen würden?</p>

            <div class="comparison">
                <div class="comparison-col">
                    <h4>Kugeln (klassisch)</h4>
                    <div class="pattern" style="color: #888;">██  ██</div>
                    <p>Jede Kugel fliegt durch einen Spalt.</p>
                    <p>Ergebnis: <strong>Zwei Streifen</strong></p>
                </div>
                <div class="comparison-col">
                    <h4>Elektronen (quantenmechanisch)</h4>
                    <div class="pattern" style="color: var(--accent);">░▓░▓░▓░</div>
                    <p>Die Wahrscheinlichkeitswellen interferieren.</p>
                    <p>Ergebnis: <strong>Interferenzmuster</strong></p>
                </div>
            </div>

            <h3>Der entscheidende Unterschied</h3>
            <p>Bei Kugeln addieren sich die Wahrscheinlichkeiten einfach. Bei Elektronen interferieren die Wahrscheinlichkeitsamplituden. Das führt zu Bereichen, in denen sich die Amplituden auslöschen (destruktive Interferenz).</p>

            <div class="info-box">
                <strong>Deshalb gibt es dunkle Streifen!</strong> Obwohl beide Spalte offen sind und Elektronen „durchlassen", treffen an manchen Stellen fast keine Elektronen auf. Die Wahrscheinlichkeit ist dort nahezu null.
            </div>

            <h3>Was passiert bei einer Messung?</h3>
            <p>Du hast in der Simulation gesehen: Sobald wir den Detektor aktivieren (also messen, durch welchen Spalt das Elektron fliegt), verschwindet das Interferenzmuster!</p>

            <div class="comparison">
                <div class="comparison-col">
                    <h4>Ohne Detektor</h4>
                    <div class="pattern" style="color: var(--accent);">░▓░▓░▓░</div>
                    <p>Interferenzmuster</p>
                    <p style="font-size: 0.85em; color: #666;">Elektron „geht durch beide Spalte"</p>
                </div>
                <div class="comparison-col">
                    <h4>Mit Detektor</h4>
                    <div class="pattern" style="color: #ff5722;">██  ██</div>
                    <p>Zwei Streifen</p>
                    <p style="font-size: 0.85em; color: #666;">Elektron geht durch einen Spalt</p>
                </div>
            </div>

            <div class="merksatz">
                <strong>Die Messung verändert das Ergebnis!</strong>
                <p style="margin-top: 10px;">Wenn wir den Weg des Elektrons kennen, verhält es sich wie ein Teilchen.<br>Wenn wir den Weg nicht kennen, verhält es sich wie eine Welle.</p>
            </div>

            <div class="hefter-hinweis">
                <strong>Aufgabe 2:</strong> Bearbeite die Vergleichstabelle auf dem Arbeitsblatt.
            </div>

            <div style="text-align: right; margin-top: 20px;">
                <button class="sim-btn" onclick="showSection(6)">Weiter zur Messung →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- SECTION 7: Elektronenbeugung Experiment -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section" id="section6">
            <h2>7. Elektronenbeugung: Die Wellenlänge messen</h2>

            <p>Wir haben gesehen: Elektronen verhalten sich wie Wellen. Aber können wir ihre Wellenlänge auch messen?</p>

            <h3>Das Experiment: Elektronenbeugungsröhre</h3>
            <p>Elektronen werden durch eine Spannung U<sub>B</sub> beschleunigt und treffen auf eine dünne Graphitfolie. Die regelmäßige Anordnung der Kohlenstoffatome wirkt wie ein Gitter mit sehr kleinen Abständen (ca. 200 pm).</p>

            <div class="info-box">
                <strong>Warum Graphit?</strong> Die de Broglie Wellenlänge von Elektronen ist extrem klein (etwa 20 pm bei 4 kV). Normale optische Gitter haben viel zu große Abstände. Kristalle wie Graphit haben atomare Abstände, die zur Elektronenwellenlänge passen.
            </div>

            <h3>Was sieht man auf dem Schirm?</h3>
            <p>Konzentrische Ringe! Aus dem Ringradius kann man die Wellenlänge berechnen und mit der de Broglie Formel vergleichen.</p>

            <div class="formula">
                λ<sub>theo</sub> = <span class="fz">h</span> / <span class="fz">p</span> = <span class="fz">h</span> / √(2 · <span class="fz">m</span><sub>e</sub> · <span class="fz">e</span> · <span class="fz">U</span><sub>B</sub>)
            </div>

            <!-- Eingebettete Simulation -->
            <div style="margin: 20px 0;">
                <iframe src="SIM-05-elektronenbeugung.html"
                        style="width: 100%; height: 580px; border: 1px solid #ddd; background: #1a1a2e;"
                        title="Elektronenbeugungsröhre Simulation"></iframe>
            </div>

            <h3>Durchführung:</h3>
            <ol style="margin: 10px 0 10px 20px;">
                <li><strong>Spannung einstellen:</strong> Wähle U<sub>B</sub> = 4,0 kV</li>
                <li><strong>λ<sub>theo</sub> berechnen:</strong> Nutze die de Broglie Formel oben!</li>
                <li><strong>Radius ablesen:</strong> Lies r<sub>1</sub> an der cm-Skala ab (orange Messlinie)</li>
                <li><strong>λ<sub>exp</sub> berechnen:</strong> Nutze die Auswertungsformel unten!</li>
                <li><strong>Vergleichen:</strong> Berechne die Abweichung in %</li>
                <li><strong>Wiederholen:</strong> Für U<sub>B</sub> = 6,0 kV und 8,0 kV</li>
            </ol>

            <div class="merksatz" style="text-align: left;">
                <strong>Auswertungsformel (Kleinwinkelnäherung):</strong>
                <div class="formula" style="margin: 10px 0;">
                    λ<sub>exp</sub> ≈ <span class="fz">d</span> · <span class="fz">r</span> / <span class="fz">L</span>
                </div>
                <p style="font-size: 0.9em;">
                    <strong>Gerätedaten:</strong><br>
                    d = 213 pm (Netzebenenabstand Graphit)<br>
                    L = 13,5 cm (Abstand Folie–Schirm)
                </p>
            </div>

            <div class="hefter-hinweis">
                <strong>Aufgabe 3:</strong> Fülle die Messtabelle auf dem Arbeitsblatt aus.<br>
                <ul style="margin: 5px 0 0 15px; font-size: 0.9em;">
                    <li>λ<sub>theo</sub> mit de Broglie Formel berechnen</li>
                    <li>r<sub>1</sub> an der Skala ablesen</li>
                    <li>λ<sub>exp</sub> mit Auswertungsformel berechnen</li>
                    <li>Abweichung: |λ<sub>theo</sub> − λ<sub>exp</sub>| / λ<sub>theo</sub> · 100%</li>
                </ul>
            </div>

            <div style="text-align: right; margin-top: 20px;">
                <button class="sim-btn" onclick="showSection(7)">Weiter zur Zusammenfassung →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- SECTION 8: Zusammenfassung -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <div class="section" id="section7">
            <h2>8. Zusammenfassung</h2>

            <h3>Was haben wir heute gelernt?</h3>

            <div class="merksatz">
                <strong>Die Kernaussagen</strong>
            </div>

            <ul style="margin: 15px 0 15px 20px; line-height: 1.8;">
                <li><strong>Einzelmessungen sind zufällig:</strong> Wir können nicht vorhersagen, wo ein einzelnes Elektron auftrifft.</li>
                <li><strong>Verteilungen sind determiniert:</strong> Bei vielen Messungen entsteht ein vorhersagbares Muster.</li>
                <li><strong>|ψ|² gibt die Wahrscheinlichkeit:</strong> Die Wellenfunktion beschreibt, wie wahrscheinlich es ist, das Teilchen an einem Ort zu finden.</li>
                <li><strong>Interferenz ist real:</strong> Die Wahrscheinlichkeitsamplituden können sich verstärken oder auslöschen.</li>
                <li><strong>λ = h/p funktioniert:</strong> Die de Broglie Wellenlänge lässt sich experimentell bestätigen.</li>
            </ul>

            <div class="info-box">
                <strong>Ausblick Bohr:</strong> Wenn Elektronen Wellen sind, warum gibt es dann nur bestimmte Bahnen im Atom? Das klären wir in der nächsten Stunde mit dem Bohr'schen Atommodell.
            </div>

            <div style="background: #f5f5f5; border: 1px solid #ddd; padding: 12px 15px; margin-top: 15px; font-size: 0.9em;">
                <strong style="color: #666;">Für Interessierte: Heisenberg'sche Unschärferelation</strong>
                <p style="margin-top: 8px; color: #555;">
                    Warum zerstört die Messung am Spalt die Interferenz? Werner Heisenberg zeigte 1927: Um den Ort eines Teilchens genau zu messen, muss man es mit etwas "anstupsen" (z.B. einem Photon). Dabei verändert man zwangsläufig seinen Impuls. Je genauer wir den Ort kennen wollen, desto mehr stören wir die Bewegung. Diese fundamentale Grenze heißt <em>Unschärferelation</em>: Δx · Δp ≥ h/4π
                </p>
            </div>

            <div class="hefter-hinweis">
                <strong>Prüfe dein Arbeitsblatt:</strong><br>
                <ul style="margin: 5px 0 0 15px;">
                    <li>Kasten 1: Stochastische Vorhersagbarkeit (4 Lücken)</li>
                    <li>Kasten 2: Wahrscheinlichkeitswelle (4 Lücken)</li>
                    <li>Aufgabe 1: Histogramm (5 BE)</li>
                    <li>Aufgabe 2: Klassisch vs. Quantenmechanisch (6 BE)</li>
                    <li>Aufgabe 3: Elektronenbeugung Messung (6 BE)</li>
                </ul>
            </div>
        </div>

    </div>

<script>
// ═══════════════════════════════════════════════════════════════
// LERNPFAD NAVIGATION (ES5)
// ═══════════════════════════════════════════════════════════════

(function() {
    'use strict';

    var currentSection = 0;
    var totalSections = 8;

    window.showSection = function(index) {
        currentSection = index;

        // Sections aktualisieren
        var sections = document.querySelectorAll('.section');
        for (var i = 0; i < sections.length; i++) {
            sections[i].classList.remove('active');
        }
        document.getElementById('section' + index).classList.add('active');

        // Navigation aktualisieren
        var navBtns = document.querySelectorAll('.nav-btn');
        for (var j = 0; j < navBtns.length; j++) {
            navBtns[j].classList.remove('active');
        }
        navBtns[index].classList.add('active');

        // Progress aktualisieren
        var progress = ((index + 1) / totalSections) * 100;
        document.getElementById('progressFill').style.width = progress + '%';

        // Scroll nach oben
        window.scrollTo(0, 0);

        // LocalStorage
        localStorage.setItem('lp05-section', index);
    };

    // Wiederherstellen
    var savedSection = localStorage.getItem('lp05-section');
    if (savedSection !== null) {
        showSection(parseInt(savedSection));
    }
})();

// ═══════════════════════════════════════════════════════════════
// SIMULATION 1: Doppelspalt mit einzelnen Elektronen
// (Inspiriert von SIM-04 mit definierten Elektronenzahlen)
// ═══════════════════════════════════════════════════════════════

(function() {
    'use strict';

    var canvas = document.getElementById('simCanvas1');
    var ctx = canvas.getContext('2d');

    // State
    var particles = [];
    var screenData = [];
    var electronCount = 0;
    var animating = false;
    var showProbability = false;
    var detectorEnabled = false;
    var pendingElectrons = 0;
    var spawnTimer = null;

    // Geometry
    var sourceX = 50;
    var slitX = 200;
    var screenX = 550;
    var slit1Y = 170;
    var slit2Y = 230;
    var slitWidth = 20;

    // Initialize screen data
    for (var i = 0; i < canvas.height; i++) {
        screenData[i] = 0;
    }

    // ────────────────────────────────────────────────────────────────
    // DRAWING
    // ────────────────────────────────────────────────────────────────

    function draw() {
        // Background
        ctx.fillStyle = '#1a1a2e';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Source (Elektronenkanone)
        ctx.fillStyle = '#2196f3';
        ctx.beginPath();
        ctx.arc(sourceX, canvas.height / 2, 15, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = '#fff';
        ctx.font = '10px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('e\u207b', sourceX, canvas.height / 2 + 4);

        // Barrier with slits (Doppelspalt)
        ctx.fillStyle = '#555';
        ctx.fillRect(slitX, 0, 15, slit1Y - slitWidth / 2);
        ctx.fillRect(slitX, slit1Y + slitWidth / 2, 15, slit2Y - slit1Y - slitWidth);
        ctx.fillRect(slitX, slit2Y + slitWidth / 2, 15, canvas.height - slit2Y - slitWidth / 2);

        // Detector indicators
        if (detectorEnabled) {
            ctx.fillStyle = '#ff5722';
            ctx.fillRect(slitX - 5, slit1Y - slitWidth / 2 - 10, 25, 8);
            ctx.fillRect(slitX - 5, slit2Y + slitWidth / 2 + 2, 25, 8);
            ctx.fillStyle = '#fff';
            ctx.font = '8px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('D', slitX + 7, slit1Y - slitWidth / 2 - 3);
            ctx.fillText('D', slitX + 7, slit2Y + slitWidth / 2 + 9);
        }

        // Screen (Schirm)
        ctx.fillStyle = '#333';
        ctx.fillRect(screenX, 0, 30, canvas.height);

        // Draw accumulated pattern on screen
        var maxVal = 1;
        for (var si = 0; si < screenData.length; si++) {
            if (screenData[si] > maxVal) maxVal = screenData[si];
        }

        for (var y = 0; y < screenData.length; y++) {
            if (screenData[y] > 0) {
                var brightness = Math.min(255, (screenData[y] / maxVal) * 255);
                ctx.fillStyle = 'rgba(33, 150, 243, ' + (brightness / 255) + ')';
                ctx.fillRect(screenX + 5, y, 20, 1);
            }
        }

        // Wahrscheinlichkeitsverteilung anzeigen (aus Messdaten)
        if (showProbability && electronCount > 10) {
            // Glättung der Messdaten
            var smoothed = [];
            var windowSize = 8;
            for (var sy = 0; sy < canvas.height; sy++) {
                var sum = 0;
                var count = 0;
                for (var w = -windowSize; w <= windowSize; w++) {
                    var idx = sy + w;
                    if (idx >= 0 && idx < canvas.height) {
                        sum += screenData[idx];
                        count++;
                    }
                }
                smoothed[sy] = sum / count;
            }

            // Maximum finden
            var smoothMax = 0;
            for (var mi = 0; mi < smoothed.length; mi++) {
                if (smoothed[mi] > smoothMax) smoothMax = smoothed[mi];
            }

            if (smoothMax > 0) {
                // Kurve zeichnen
                ctx.strokeStyle = '#2a7a4b';
                ctx.lineWidth = 2;
                ctx.beginPath();
                for (var py = 0; py < canvas.height; py++) {
                    var normalizedProb = smoothed[py] / smoothMax;
                    var xPos = screenX - 10 - normalizedProb * 60;
                    if (py === 0) {
                        ctx.moveTo(xPos, py);
                    } else {
                        ctx.lineTo(xPos, py);
                    }
                }
                ctx.stroke();

                // Fläche füllen
                ctx.fillStyle = 'rgba(42, 122, 75, 0.15)';
                ctx.beginPath();
                ctx.moveTo(screenX - 10, 0);
                for (var fy = 0; fy < canvas.height; fy++) {
                    var normProb = smoothed[fy] / smoothMax;
                    var xp = screenX - 10 - normProb * 60;
                    ctx.lineTo(xp, fy);
                }
                ctx.lineTo(screenX - 10, canvas.height);
                ctx.closePath();
                ctx.fill();

                // Label
                ctx.fillStyle = '#2a7a4b';
                ctx.font = '10px sans-serif';
                ctx.textAlign = 'left';
                ctx.fillText('P(y)', screenX - 65, 15);
            }
        }

        // Draw particles in flight
        for (var pi = 0; pi < particles.length; pi++) {
            var p = particles[pi];
            ctx.fillStyle = '#4fc3f7';
            ctx.beginPath();
            ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
            ctx.fill();

            // Glow
            ctx.fillStyle = 'rgba(79, 195, 247, 0.3)';
            ctx.beginPath();
            ctx.arc(p.x, p.y, 6, 0, Math.PI * 2);
            ctx.fill();
        }

        // Labels
        ctx.fillStyle = '#888';
        ctx.font = '11px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('Quelle', sourceX, canvas.height - 10);
        ctx.fillText('Doppelspalt', slitX + 7, canvas.height - 10);
        ctx.fillText('Schirm', screenX + 15, canvas.height - 10);
    }

    // ────────────────────────────────────────────────────────────────
    // PHYSICS
    // ────────────────────────────────────────────────────────────────

    function createParticle() {
        // Zielspalt zufällig wählen
        var targetSlit = Math.random() < 0.5 ? 1 : 2;
        var targetY = targetSlit === 1 ? slit1Y : slit2Y;

        var startY = canvas.height / 2 + (Math.random() - 0.5) * 20;
        var vx = 4 + Math.random() * 2;

        // vy berechnen, damit Partikel durch Spalt geht
        var distToSlit = slitX - (sourceX + 20);
        var timeToSlit = distToSlit / vx;
        var vy = (targetY - startY) / timeToSlit;

        return {
            x: sourceX + 20,
            y: startY,
            vx: vx,
            vy: vy,
            passedSlit: false,
            whichSlit: targetSlit
        };
    }

    function calculateInterferenceY(whichSlit) {
        var centerY = canvas.height / 2;

        // MIT Detektor: Keine Interferenz, nur Beugung am Einzelspalt
        if (detectorEnabled) {
            var slitY = whichSlit === 1 ? slit1Y : slit2Y;
            // Gaußverteilung um den jeweiligen Spalt
            var spread = 60;
            var u1 = Math.random();
            var u2 = Math.random();
            var gaussian = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
            return slitY + gaussian * spread;
        }

        // OHNE Detektor: Interferenzmuster
        var numMaxima = 7;
        var spacing = canvas.height / numMaxima;

        var attempts = 0;
        while (attempts < 100) {
            var testY = Math.random() * canvas.height;
            var distFromCenter = testY - centerY;
            var phase = (distFromCenter / spacing) * Math.PI;
            var probability = Math.pow(Math.cos(phase), 2);

            // Single slit envelope
            var envelope = Math.exp(-Math.pow(distFromCenter / 100, 2));
            probability *= envelope;

            if (Math.random() < probability) {
                return testY;
            }
            attempts++;
        }
        return centerY + (Math.random() - 0.5) * 100;
    }

    function updateParticles() {
        var newParticles = [];

        for (var i = 0; i < particles.length; i++) {
            var p = particles[i];

            p.x += p.vx;
            p.y += p.vy;

            // Check if passed through slit
            if (!p.passedSlit && p.x > slitX + 15) {
                p.passedSlit = true;

                // Calculate final y position based on interference
                var finalY = calculateInterferenceY(p.whichSlit);
                var remainingX = screenX - p.x;
                p.vy = (finalY - p.y) / (remainingX / p.vx);
            }

            // Check if reached screen
            if (p.x >= screenX) {
                var screenY = Math.round(p.y);
                if (screenY >= 0 && screenY < canvas.height) {
                    screenData[screenY]++;
                    if (screenY > 0) screenData[screenY - 1] += 0.5;
                    if (screenY < canvas.height - 1) screenData[screenY + 1] += 0.5;
                }
                electronCount++;
                document.getElementById('electronCount').textContent = electronCount;
            } else {
                newParticles.push(p);
            }
        }

        particles = newParticles;
    }

    // ────────────────────────────────────────────────────────────────
    // ANIMATION
    // ────────────────────────────────────────────────────────────────

    function animate() {
        if (!animating) return;
        updateParticles();
        draw();
        if (particles.length > 0 || pendingElectrons > 0) {
            requestAnimationFrame(animate);
        } else {
            animating = false;
        }
    }

    function spawnElectron() {
        if (pendingElectrons > 0) {
            particles.push(createParticle());
            pendingElectrons--;
        }
    }

    // ────────────────────────────────────────────────────────────────
    // CONTROLS
    // ────────────────────────────────────────────────────────────────

    window.fireElectrons = function(n) {
        pendingElectrons += n;

        // Spawn-Intervall basierend auf Anzahl
        var interval = n === 1 ? 0 : (n <= 10 ? 80 : (n <= 100 ? 20 : 5));

        if (spawnTimer) clearInterval(spawnTimer);

        // Sofort erstes Elektron spawnen
        spawnElectron();

        if (n > 1) {
            spawnTimer = setInterval(function() {
                spawnElectron();
                if (pendingElectrons <= 0) {
                    clearInterval(spawnTimer);
                    spawnTimer = null;
                }
            }, interval);
        }

        if (!animating) {
            animating = true;
            animate();
        }
    };

    window.toggleProb = function() {
        showProbability = document.getElementById('showProbToggle').checked;
        draw();
    };

    window.toggleDetector = function() {
        detectorEnabled = document.getElementById('detectorToggle').checked;
        draw();
    };

    window.resetSim = function() {
        if (spawnTimer) {
            clearInterval(spawnTimer);
            spawnTimer = null;
        }
        animating = false;
        particles = [];
        pendingElectrons = 0;
        electronCount = 0;
        for (var i = 0; i < canvas.height; i++) {
            screenData[i] = 0;
        }
        document.getElementById('electronCount').textContent = '0';
        // Detektor-Status beibehalten, nur Daten zurücksetzen
        draw();
    };

    // Initial draw
    draw();
})();

// ═══════════════════════════════════════════════════════════════
// SIMULATION 2: Histogramm
// ═══════════════════════════════════════════════════════════════

(function() {
    'use strict';

    var canvas = document.getElementById('simCanvas2');
    var ctx = canvas.getContext('2d');
    var bins = [];
    var numBins = 50;
    var totalElectrons = 0;

    function initBins() {
        bins = [];
        for (var i = 0; i < numBins; i++) {
            bins.push(0);
        }
    }

    function theoreticalIntensity(binIndex) {
        var x = (binIndex - numBins / 2) / (numBins / 6);
        var envelope = Math.exp(-x * x / 4);
        var interference = Math.pow(Math.cos(x * 1.2), 2);
        return envelope * interference;
    }

    function addElectron() {
        // Sampling nach theoretischer Verteilung
        var attempts = 0;
        while (attempts < 100) {
            var binIndex = Math.floor(Math.random() * numBins);
            var prob = theoreticalIntensity(binIndex);
            if (Math.random() < prob) {
                bins[binIndex]++;
                totalElectrons++;
                return;
            }
            attempts++;
        }
    }

    function draw() {
        ctx.fillStyle = '#0d0d1a';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        var maxCount = Math.max.apply(null, bins);
        if (maxCount === 0) maxCount = 1;

        var barWidth = (canvas.width - 100) / numBins;
        var maxHeight = canvas.height - 80;

        // Theoretische Kurve
        ctx.strokeStyle = 'rgba(255, 152, 0, 0.5)';
        ctx.lineWidth = 2;
        ctx.beginPath();
        for (var i = 0; i < numBins; i++) {
            var x = 50 + i * barWidth + barWidth / 2;
            var intensity = theoreticalIntensity(i);
            var y = canvas.height - 40 - intensity * maxHeight * 0.8;
            if (i === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }
        }
        ctx.stroke();

        // Histogramm
        for (var j = 0; j < numBins; j++) {
            var barHeight = (bins[j] / maxCount) * maxHeight;
            var barX = 50 + j * barWidth;
            var barY = canvas.height - 40 - barHeight;

            ctx.fillStyle = 'rgba(79, 195, 247, 0.8)';
            ctx.fillRect(barX, barY, barWidth - 1, barHeight);
        }

        // Achse
        ctx.strokeStyle = '#666';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(50, canvas.height - 40);
        ctx.lineTo(canvas.width - 50, canvas.height - 40);
        ctx.stroke();

        // Labels
        ctx.fillStyle = '#aaa';
        ctx.font = '12px sans-serif';
        ctx.fillText('Position auf dem Schirm', canvas.width / 2 - 80, canvas.height - 10);
        ctx.fillText('|ψ|² (theoretisch)', canvas.width - 120, 30);
    }

    window.addElectronsHist = function(n) {
        for (var i = 0; i < n; i++) {
            addElectron();
        }
        document.getElementById('histCount').textContent = totalElectrons;
        draw();
    };

    window.resetHist = function() {
        initBins();
        totalElectrons = 0;
        document.getElementById('histCount').textContent = '0';
        draw();
    };

    initBins();
    draw();
})();
</script>
</body>
</html>
