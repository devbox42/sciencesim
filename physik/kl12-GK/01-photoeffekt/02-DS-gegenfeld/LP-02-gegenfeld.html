<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photoeffekt – Einsteinsche Gerade | Physik 12 GK</title>
    <style>
        :root {
            --physik: #2c5aa0;
            --physik-light: #e3f2fd;
            --bg: #f5f5f5;
            --white: #ffffff;
            --border: #dddddd;
            --text: #222222;
            --text-secondary: #555555;
            --success: #2a7a4b;
            --warning: #b35c00;
            --warning-bg: #fff3e0;
            --error: #c62828;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            font-size: 16px;
            line-height: 1.5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: var(--physik);
            color: white;
            padding: 15px 20px;
            margin-bottom: 20px;
        }

        header h1 {
            font-size: 1.3em;
            font-weight: 600;
        }

        header .subtitle {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .progress-bar {
            background: var(--border);
            height: 6px;
            margin-bottom: 20px;
        }

        .progress-fill {
            background: var(--physik);
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }

        .step {
            background: var(--white);
            border: 1px solid var(--border);
            padding: 20px;
            margin-bottom: 15px;
            display: none;
        }

        .step.active { display: block; }

        .step-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--physik);
        }

        .step-number {
            background: var(--physik);
            color: white;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9em;
        }

        .step-title {
            font-size: 1.1em;
            font-weight: 600;
        }

        h3 {
            font-size: 1em;
            color: var(--physik);
            margin: 15px 0 10px 0;
        }

        p { margin-bottom: 10px; }

        .info-box {
            background: var(--physik-light);
            border-left: 4px solid var(--physik);
            padding: 12px 15px;
            margin: 15px 0;
        }

        .formula-box {
            background: var(--physik-light);
            border: 2px solid var(--physik);
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-size: 1.1em;
        }

        .hefter-hinweis {
            background: var(--warning-bg);
            border: 2px solid var(--warning);
            padding: 12px 15px;
            margin: 15px 0;
        }

        .hefter-hinweis::before {
            content: "Arbeitsblatt";
            display: inline-block;
            background: var(--warning);
            color: white;
            font-size: 0.75em;
            font-weight: 600;
            padding: 2px 8px;
            margin-bottom: 8px;
        }

        .exercise {
            background: #fafafa;
            border: 1px solid var(--border);
            padding: 15px;
            margin: 15px 0;
        }

        .exercise-label {
            background: var(--physik);
            color: white;
            font-size: 0.75em;
            padding: 2px 8px;
            display: inline-block;
            margin-bottom: 10px;
        }

        input[type="number"], input[type="text"] {
            border: none;
            border-bottom: 2px solid var(--physik);
            padding: 5px 8px;
            width: 80px;
            font-size: 1em;
            background: transparent;
            text-align: center;
        }

        select {
            padding: 5px 10px;
            font-size: 1em;
            border: 1px solid var(--border);
        }

        button {
            background: var(--physik);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 0.95em;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover { opacity: 0.9; }

        .btn-secondary {
            background: var(--text-secondary);
        }

        .feedback {
            padding: 10px 15px;
            margin-top: 10px;
            display: none;
        }

        .feedback.correct {
            background: #e8f5e9;
            border-left: 4px solid var(--success);
            display: block;
        }

        .feedback.incorrect {
            background: #ffebee;
            border-left: 4px solid var(--error);
            display: block;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }

        .simulation-link {
            display: block;
            background: var(--physik);
            color: white;
            text-decoration: none;
            padding: 15px;
            text-align: center;
            margin: 15px 0;
        }

        .simulation-link:hover { opacity: 0.9; }

        ul, ol {
            margin: 10px 0 10px 25px;
        }

        li { margin-bottom: 5px; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            border: 1px solid var(--border);
            padding: 8px 12px;
            text-align: center;
        }

        th {
            background: var(--physik-light);
            font-weight: 600;
        }

        .highlight {
            background: #fff59d;
            padding: 2px 4px;
        }

        .erkenntnispfad {
            background: linear-gradient(to right, var(--physik-light), white);
            border: 1px solid var(--physik);
            padding: 15px;
            margin: 15px 0;
        }

        .erkenntnispfad h4 {
            color: var(--physik);
            margin-bottom: 10px;
        }

        .pfad-schritt {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
        }

        .pfad-nummer {
            background: var(--physik);
            color: white;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            flex-shrink: 0;
        }

        .pfad-nummer.done {
            background: var(--success);
        }

        .pfad-nummer.current {
            background: var(--warning);
        }

        /* Step Navigation */
        .step-nav {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--white);
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
        }

        .step-nav-item {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--border);
            color: var(--text-secondary);
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .step-nav-item:hover {
            background: var(--physik-light);
        }

        .step-nav-item.active {
            background: var(--physik);
            color: white;
        }

        .step-nav-item.done {
            background: var(--success);
            color: white;
        }
    </style>
</head>
<body>

<header>
    <div class="container">
        <h1>Photoeffekt – Einsteinsche Gerade</h1>
        <div class="subtitle">Physik 12 GK | Vom Experiment zur Theorie</div>
    </div>
</header>

<div class="progress-bar">
    <div class="progress-fill" id="progress"></div>
</div>

<div class="step-nav" id="stepNav">
    <div class="step-nav-item active" onclick="nextStep(1)" title="Das Problem">1</div>
    <div class="step-nav-item" onclick="nextStep(2)" title="Einsteins Hypothese">2</div>
    <div class="step-nav-item" onclick="nextStep(3)" title="Gegenfeldmethode">3</div>
    <div class="step-nav-item" onclick="nextStep(4)" title="Messung (Simulation)">4</div>
    <div class="step-nav-item" onclick="nextStep(5)" title="Diagramm zeichnen">5</div>
    <div class="step-nav-item" onclick="nextStep(6)" title="Auswertung">6</div>
    <div class="step-nav-item" onclick="nextStep(7)" title="Anwendung">7</div>
    <div class="step-nav-item" onclick="nextStep(8)" title="Zusammenfassung">8</div>
</div>

<div class="container">

    <!-- ==================== SCHRITT 1 ==================== -->
    <div class="step active" id="step1">
        <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-title">Das Problem</div>
        </div>

        <div class="erkenntnispfad">
            <h4>Unser Erkenntnispfad heute</h4>
            <div class="pfad-schritt"><div class="pfad-nummer current">1</div> Problem erkennen</div>
            <div class="pfad-schritt"><div class="pfad-nummer">2</div> Hypothese aufstellen</div>
            <div class="pfad-schritt"><div class="pfad-nummer">3</div> Experiment durchführen</div>
            <div class="pfad-schritt"><div class="pfad-nummer">4</div> Daten visualisieren</div>
            <div class="pfad-schritt"><div class="pfad-nummer">5</div> Muster erkennen</div>
            <div class="pfad-schritt"><div class="pfad-nummer">6</div> Theorie formulieren</div>
        </div>

        <h3>Letzte Stunde: Der Hallwachs-Versuch</h3>
        <p>UV-Licht löst Elektronen aus einer Zinkplatte – <strong>sichtbares Licht nicht</strong>, egal wie intensiv!</p>

        <div class="info-box">
            <strong>Das Problem:</strong> Nach dem Wellenmodell sollte mehr Intensität = mehr Energie bedeuten. Aber das stimmt nicht! Die <strong>Frequenz</strong> entscheidet, nicht die Intensität.
        </div>

        <div class="exercise">
            <div class="exercise-label">Verständnischeck</div>
            <p>Was konnte das Wellenmodell NICHT erklären?</p>
            <select id="q1" style="width: 100%; margin: 10px 0;">
                <option value="">-- Wähle --</option>
                <option value="a">Warum mehr Intensität mehr Elektronen auslöst</option>
                <option value="b">Warum rotes Licht keinen Photoeffekt auslöst, egal wie intensiv</option>
                <option value="c">Warum Elektronen negative Ladung haben</option>
            </select>
            <button onclick="checkQ1()">Prüfen</button>
            <div class="feedback" id="fb1"></div>
        </div>

        <div class="nav-buttons">
            <span></span>
            <button onclick="nextStep(2)">Weiter</button>
        </div>
    </div>

    <!-- ==================== SCHRITT 2 ==================== -->
    <div class="step" id="step2">
        <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-title">Einsteins Hypothese (1905)</div>
        </div>

        <p>Albert Einstein hatte eine revolutionäre Idee:</p>

        <div class="formula-box">
            <strong>Licht besteht aus Energiepaketen – Photonen</strong><br><br>
            Jedes Photon trägt die Energie: <strong><em>E</em> = <em>h</em> · <em>f</em></strong>
        </div>

        <div class="info-box">
            <strong><em>h</em></strong> = Plancksches Wirkungsquantum (eine Naturkonstante)<br>
            <strong><em>f</em></strong> = Frequenz des Lichts
        </div>

        <div class="info-box" style="background: #e8f5e9; border-color: #2e7d32;">
            <strong style="color: #2e7d32;">Kernidee: Energie ist gequantelt!</strong><br><br>
            <ul style="margin: 0; padding-left: 20px;">
                <li>Ein Photon = <strong>ein</strong> Energiepaket = <em>h</em> · <em>f</em></li>
                <li><strong>Unteilbar</strong> – ganz oder gar nicht (wie eine Münze)</li>
                <li>Mehr Intensität = mehr Photonen, <strong>nicht</strong> mehr Energie pro Photon!</li>
            </ul>
        </div>

        <h3>Warum erklärt das den Photoeffekt?</h3>
        <ul>
            <li>Ein Photon gibt seine <strong>gesamte Energie</strong> an <strong>ein</strong> Elektron</li>
            <li>Mehr Intensität = mehr Photonen, aber <strong>nicht</strong> mehr Energie pro Photon</li>
            <li>Höhere Frequenz = mehr Energie pro Photon = schnellere Elektronen</li>
        </ul>

        <div class="hefter-hinweis">
            <strong>Kasten 1:</strong> Lies die Ausgangssituation und Einsteins Hypothese.
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="nextStep(1)">Zurück</button>
            <button onclick="nextStep(3)">Weiter</button>
        </div>
    </div>

    <!-- ==================== SCHRITT 3 ==================== -->
    <div class="step" id="step3">
        <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-title">Die Gegenfeldmethode</div>
        </div>

        <p><strong>Frage:</strong> Wie können wir die kinetische Energie der ausgelösten Elektronen messen?</p>

        <h3>Die physikalische Idee</h3>
        <p>Die Elektronen verlassen die Metalloberfläche mit einer bestimmten <strong>kinetischen Energie <em>E</em><sub>kin</sub></strong>. Diese Energie wollen wir bestimmen.</p>

        <div class="info-box">
            <strong>Grundidee:</strong> Wir nutzen ein elektrisches Feld, um die Elektronen abzubremsen.<br><br>
            Aus der Elektrizitätslehre weißt du: Wenn eine Ladung <em>q</em> eine Spannung <em>U</em> durchläuft, wird an ihr die <strong>Arbeit <em>W</em> = <em>U</em> · <em>q</em></strong> verrichtet.<br><br>
            Für ein Elektron (Ladung <em>e</em>): <strong><em>W</em> = <em>U</em> · <em>e</em></strong>
        </div>

        <h3>Das Prinzip</h3>
        <div class="info-box">
            <ol>
                <li>Licht löst Elektronen aus der Kathode – sie haben kinetische Energie <em>E</em><sub>kin</sub></li>
                <li>Ein <strong>Gegenfeld</strong> (Anode negativ!) bremst die Elektronen</li>
                <li>Das Feld verrichtet <strong>Bremsarbeit</strong>: <em>W</em><sub>Brems</sub> = <em>U</em> · <em>e</em></li>
                <li>Wir erhöhen <em>U</em>, bis <strong>kein Elektron mehr ankommt</strong> (Strom = 0)</li>
                <li>Bei dieser <strong>Grenzspannung <em>U</em><sub>G</sub></strong> gilt: Bremsarbeit = ursprüngliche <em>E</em><sub>kin</sub></li>
            </ol>
        </div>

        <div class="formula-box">
            <strong>Energieerhaltung:</strong><br><br>
            Kinetische Energie = Bremsarbeit im Feld<br><br>
            <strong><em>E</em><sub>kin,max</sub> = <em>e</em> · <em>U</em><sub>G</sub></strong><br><br>
            <small>Die Grenzspannung <em>U</em><sub>G</sub> ist ein <strong>direktes Maß</strong> für die kinetische Energie!</small>
        </div>

        <div class="info-box">
            <strong>Die Einheit Elektronenvolt (eV):</strong><br>
            1 eV ist die Energie, die ein Elektron beim Durchlaufen von 1 V aufnimmt/abgibt.<br>
            → Bei <em>U</em><sub>G</sub> in Volt ist <em>E</em><sub>kin</sub> <strong>numerisch gleich</strong> in eV!<br>
            <em>Beispiel: <em>U</em><sub>G</sub> = 0,8 V → <em>E</em><sub>kin</sub> = 0,8 eV</em>
        </div>

        <div class="exercise">
            <div class="exercise-label">Verständnis</div>
            <p>Ein Elektron wird durch <em>U</em><sub>G</sub> = 1,5 V gerade gestoppt. Wie groß war seine ursprüngliche kinetische Energie?</p>
            <p><em>E</em><sub>kin,max</sub> = <input type="number" id="q3" step="0.1"> eV</p>
            <button onclick="checkQ3()">Prüfen</button>
            <div class="feedback" id="fb3"></div>
        </div>

        <div class="hefter-hinweis">
            <strong>Kasten 2:</strong> Lies die Formel <em>E</em><sub>kin</sub> = <em>e</em> · <em>U</em><sub>G</sub> und die Erklärung auf deinem AB.
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="nextStep(2)">Zurück</button>
            <button onclick="nextStep(4)">Weiter</button>
        </div>
    </div>

    <!-- ==================== SCHRITT 4 ==================== -->
    <div class="step" id="step4">
        <div class="step-header">
            <div class="step-number">4</div>
            <div class="step-title">Experiment: Messreihe aufnehmen</div>
        </div>

        <p>Jetzt führst du das Experiment durch!</p>

        <a href="https://devbox42.github.io/sciencesim/physik/kl12-GK/01-photoeffekt/02-DS-gegenfeld/SIM-02-gegenfeld.html" target="_blank" class="simulation-link">
            Simulation öffnen
        </a>

        <div class="info-box">
            <strong>Anleitung:</strong>
            <ol>
                <li>Wähle <strong>Natrium</strong> als Material</li>
                <li>Stelle die Wellenlänge ein (siehe Tabelle)</li>
                <li>Erhöhe die <strong>Batteriespannung</strong> (= Gegenspannung)</li>
                <li>Notiere die Spannung, bei der der <strong>Strom gerade Null</strong> wird</li>
                <li>Bei manchen Farben gibt es <strong>keinen Photoeffekt</strong> - trage "---" ein</li>
            </ol>
            <p style="margin-top: 10px; font-size: 0.9em;"><strong>Tipp:</strong> Wellenlänge und Spannung können direkt eingetippt werden (Klick aufs Zahlenfeld) – so lässt sich die Spannung feiner einstellen als mit dem Regler!</p>
        </div>

        <div class="hefter-hinweis">
            <strong>Aufgabe 1:</strong> Fülle die Messwerttabelle auf deinem Arbeitsblatt aus!<br>
            <em>Du brauchst mindestens 3 Messwerte für die nächsten Schritte.</em>
        </div>

        <h3>Deine Messwerte</h3>
        <p><em>Trage hier zur Kontrolle deine Werte ein:</em></p>

        <table>
            <tr>
                <th>Wellenlänge</th>
                <th>Frequenz <em>f</em></th>
                <th><em>U</em><sub>G</sub> (V)</th>
                <th><em>E</em><sub>kin</sub> (eV)</th>
            </tr>
            <tr>
                <td>400 nm (violett)</td>
                <td>7,5 · 10<sup>14</sup> Hz</td>
                <td><input type="number" id="m1" step="0.1" style="width:60px"></td>
                <td><input type="number" id="e1" step="0.1" style="width:60px"></td>
            </tr>
            <tr>
                <td>450 nm (blau)</td>
                <td>6,7 · 10<sup>14</sup> Hz</td>
                <td><input type="number" id="m2" step="0.1" style="width:60px"></td>
                <td><input type="number" id="e2" step="0.1" style="width:60px"></td>
            </tr>
            <tr>
                <td>500 nm (grün)</td>
                <td>6,0 · 10<sup>14</sup> Hz</td>
                <td><input type="number" id="m3" step="0.1" style="width:60px"></td>
                <td><input type="number" id="e3" step="0.1" style="width:60px"></td>
            </tr>
            <tr>
                <td>550 nm (gelb)</td>
                <td>5,5 · 10<sup>14</sup> Hz</td>
                <td><input type="text" id="m4" style="width:60px" placeholder="---?"></td>
                <td><input type="text" id="e4" style="width:60px" placeholder="---?"></td>
            </tr>
            <tr>
                <td>600 nm (orange)</td>
                <td>5,0 · 10<sup>14</sup> Hz</td>
                <td><input type="text" id="m5" style="width:60px" placeholder="---?"></td>
                <td><input type="text" id="e5" style="width:60px" placeholder="---?"></td>
            </tr>
        </table>

        <button onclick="checkMessreihe()">Messreihe prüfen</button>
        <div class="feedback" id="fb4"></div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="nextStep(3)">Zurück</button>
            <button onclick="nextStep(5)">Weiter zur Auswertung</button>
        </div>
    </div>

    <!-- ==================== SCHRITT 5 ==================== -->
    <div class="step" id="step5">
        <div class="step-header">
            <div class="step-number">5</div>
            <div class="step-title">Grafische Darstellung</div>
        </div>

        <p>Jetzt kommt der entscheidende Schritt: <strong>Visualisiere deine Daten!</strong></p>

        <div class="info-box" style="background: #fff8e1; border-color: #ffc107;">
            <strong style="color: #f57c00;">Vorüberlegung: Was verrät uns eine Gerade?</strong><br><br>
            Wenn <em>E</em><sub>kin</sub> linear von <em>f</em> abhängt, gilt: <em>E</em><sub>kin</sub> = <em>m</em> · <em>f</em> + <em>n</em><br><br>
            <table style="margin: 0; border: none;">
                <tr style="border: none;"><td style="border: none; padding: 3px 10px 3px 0;"><strong>Steigung <em>m</em></strong></td><td style="border: none; padding: 3px 0;">= Änderung von <em>E</em><sub>kin</sub> pro Frequenzeinheit</td></tr>
                <tr style="border: none;"><td style="border: none; padding: 3px 10px 3px 0;"><strong>y-Achsenabschnitt <em>n</em></strong></td><td style="border: none; padding: 3px 0;">= Wert von <em>E</em><sub>kin</sub> bei <em>f</em> = 0 (Extrapolation!)</td></tr>
                <tr style="border: none;"><td style="border: none; padding: 3px 10px 3px 0;"><strong>x-Achsenabschnitt <em>f</em><sub>G</sub></strong></td><td style="border: none; padding: 3px 0;">= Frequenz, bei der <em>E</em><sub>kin</sub> = 0 wird</td></tr>
            </table>
            <br>
            <em>Überlege: Was bedeuten diese Größen physikalisch beim Photoeffekt?</em>
        </div>

        <div class="hefter-hinweis">
            <strong>Aufgabe 2:</strong> Zeichne deine Messwerte ins Koordinatensystem auf dem AB ein.<br>
            <ul>
                <li>x-Achse: Frequenz <em>f</em> (in 10<sup>14</sup> Hz)</li>
                <li>y-Achse: <em>E</em><sub>kin</sub> (in eV)</li>
                <li>Zeichne eine <strong>Ausgleichsgerade</strong> durch die Punkte</li>
            </ul>
        </div>

        <div class="exercise">
            <div class="exercise-label">Beobachtung</div>
            <p>Was fällt dir auf, wenn du die Punkte verbindest?</p>
            <select id="q5" style="width: 100%; margin: 10px 0;">
                <option value="">-- Wähle --</option>
                <option value="a">Die Punkte liegen auf einer Parabel</option>
                <option value="b">Die Punkte liegen auf einer Geraden</option>
                <option value="c">Die Punkte liegen zufällig verteilt</option>
            </select>
            <button onclick="checkQ5()">Prüfen</button>
            <div class="feedback" id="fb5"></div>
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="nextStep(4)">Zurück</button>
            <button onclick="nextStep(6)">Weiter</button>
        </div>
    </div>

    <!-- ==================== SCHRITT 6 ==================== -->
    <div class="step" id="step6">
        <div class="step-header">
            <div class="step-number">6</div>
            <div class="step-title">Die Steigung – Das Plancksche Wirkungsquantum</div>
        </div>

        <p>Eine Gerade hat die Form: <strong><em>y</em> = <em>m</em> · <em>x</em> + <em>b</em></strong></p>
        <p>Bei uns: <strong><em>E</em><sub>kin</sub> = <em>m</em> · <em>f</em> + <em>b</em></strong></p>

        <div class="formula-box">
            <strong>Was bedeutet die Steigung <em>m</em>?</strong><br><br>
            <em>m</em> = Δ<em>E</em> / Δ<em>f</em> = (<em>E</em><sub>2</sub> − <em>E</em><sub>1</sub>) / (<em>f</em><sub>2</sub> − <em>f</em><sub>1</sub>)<br><br>
            <span class="highlight">Die Steigung ist das <strong>Plancksche Wirkungsquantum <em>h</em></strong>!</span>
        </div>

        <div class="hefter-hinweis">
            <strong>Aufgabe 3a:</strong> Bestimme die Steigung deiner Geraden auf dem AB.<br>
            <small>Literaturwert: <em>h</em> = 4,14 · 10<sup>−15</sup> eV·s</small>
        </div>

        <div class="exercise">
            <div class="exercise-label">Kontrolle</div>
            <p>Trage dein Ergebnis ein:</p>
            <p><em>h</em> = <input type="number" id="q6" step="0.1"> · 10<sup>−15</sup> eV·s</p>
            <button onclick="checkQ6()">Prüfen</button>
            <div class="feedback" id="fb6"></div>
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="nextStep(5)">Zurück</button>
            <button onclick="nextStep(7)">Weiter</button>
        </div>
    </div>

    <!-- ==================== SCHRITT 7 ==================== -->
    <div class="step" id="step7">
        <div class="step-header">
            <div class="step-number">7</div>
            <div class="step-title">Die Achsenabschnitte und die Photogleichung</div>
        </div>

        <h3>Der x-Achsenabschnitt</h3>
        <p>Wo schneidet deine Gerade die x-Achse? Das ist die <strong>Grenzfrequenz <em>f</em><sub>G</sub></strong>.</p>

        <div class="exercise">
            <div class="exercise-label">Ablesen</div>
            <p>Bei welcher Frequenz ist <em>E</em><sub>kin</sub> = 0?</p>
            <p><em>f</em><sub>G</sub> = <input type="number" id="q7a" step="0.1"> · 10<sup>14</sup> Hz</p>
            <button onclick="checkQ7a()">Prüfen</button>
            <div class="feedback" id="fb7a"></div>
        </div>

        <div class="info-box">
            <strong>Bedeutung:</strong> Unterhalb der Grenzfrequenz findet <strong>kein Photoeffekt</strong> statt – die Photonenenergie reicht nicht aus!
        </div>

        <h3>Die Austrittsarbeit</h3>
        <p>Bei der Grenzfrequenz <em>f</em><sub>G</sub> ist <em>E</em><sub>kin</sub> = 0. Was bedeutet das für <em>W</em><sub>A</sub>?</p>

        <div class="hefter-hinweis">
            <strong>Aufgabe 3b:</strong> Lies beide Achsenabschnitte ab. Dann: Was bedeutet der y-Achsenabschnitt physikalisch? (Bei <em>f</em> = 0 ist <em>E</em><sub>Photon</sub> = 0 → Energiebilanz einsetzen)<br>
            <strong>Aufgabe 3c:</strong> Berechne <em>W</em><sub>A</sub> aus dem y-Achsenabschnitt oder aus <em>h</em> · <em>f</em><sub>G</sub>.<br>
            <small>Literaturwert für Natrium: <em>W</em><sub>A</sub> = 2,3 eV</small>
        </div>

        <div class="exercise">
            <div class="exercise-label">Kontrolle</div>
            <p>Dein Ergebnis für <em>W</em><sub>A</sub>:</p>
            <p><input type="number" id="q7b" step="0.1" style="width:80px"> eV</p>
            <button onclick="checkQ7b()">Prüfen</button>
            <div class="feedback" id="fb7b"></div>
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="nextStep(6)">Zurück</button>
            <button onclick="nextStep(8)">Weiter zur Zusammenfassung</button>
        </div>
    </div>

    <!-- ==================== SCHRITT 8 ==================== -->
    <div class="step" id="step8">
        <div class="step-header">
            <div class="step-number">8</div>
            <div class="step-title">Zusammenfassung</div>
        </div>

        <div class="erkenntnispfad">
            <h4>Dein Erkenntnispfad heute</h4>
            <div class="pfad-schritt"><div class="pfad-nummer done">OK</div> Problem: Wellenmodell versagt</div>
            <div class="pfad-schritt"><div class="pfad-nummer done">OK</div> Hypothese: <em>E</em> = <em>h</em> · <em>f</em> (Photonen)</div>
            <div class="pfad-schritt"><div class="pfad-nummer done">OK</div> Experiment: Messreihe aufgenommen</div>
            <div class="pfad-schritt"><div class="pfad-nummer done">OK</div> Visualisierung: Einsteinsche Gerade</div>
            <div class="pfad-schritt"><div class="pfad-nummer done">OK</div> Muster: Linearer Zusammenhang</div>
            <div class="pfad-schritt"><div class="pfad-nummer done">OK</div> Theorie: <em>E</em><sub>kin</sub> = <em>h</em> · <em>f</em> − <em>W</em><sub>A</sub></div>
        </div>

        <div class="hefter-hinweis">
            <strong>Kasten 3:</strong> Lies die Zusammenfassung auf deinem AB.<br>
            <strong>Aufgabe 4a:</strong> Warum konnte <em>h</em> bestimmt werden?<br>
            <strong>Aufgabe 4b:</strong> Nenne zwei Fehlerquellen.
        </div>

        <div class="info-box">
            <strong>Was du erreicht hast:</strong><br>
            Du hast aus eigenen Messdaten das Plancksche Wirkungsquantum <em>h</em> bestimmt – eine fundamentale Naturkonstante der Quantenphysik!
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="nextStep(7)">Zurück</button>
            <button onclick="alert('Lernpfad abgeschlossen! Prüfe dein Arbeitsblatt.')">Fertig!</button>
        </div>
    </div>

</div>

<script>
    var LERNPFAD_ID = 'lp-pe-02';
    var currentStep = 1;
    var totalSteps = 8;

    // Dezimalkomma → Dezimalpunkt (DIN-konform: Komma akzeptieren)
    function parseNum(str) {
        if (!str || str === '---' || str === '-') return NaN;
        return parseFloat(String(str).replace(',', '.'));
    }

    // Erwartete Messwerte (Natrium, W_A = 2,3 eV) mit Toleranzen
    var EXPECTED = {
        // Wellenlänge: [U_G in V, E_kin in eV, toleranz]
        '400': [0.8, 0.8, 0.15],   // violett
        '450': [0.5, 0.5, 0.15],   // blau
        '500': [0.2, 0.2, 0.15],   // grün
        '550': [null, null, 0],    // gelb - kein Photoeffekt
        '600': [null, null, 0]     // orange - kein Photoeffekt
    };

    function updateProgress() {
        var pct = ((currentStep - 1) / (totalSteps - 1)) * 100;
        document.getElementById('progress').style.width = pct + '%';
        updateStepNav();
    }

    function updateStepNav() {
        var navItems = document.querySelectorAll('.step-nav-item');
        for (var i = 0; i < navItems.length; i++) {
            navItems[i].classList.remove('active', 'done');
            if (i + 1 < currentStep) {
                navItems[i].classList.add('done');
            } else if (i + 1 === currentStep) {
                navItems[i].classList.add('active');
            }
        }
    }

    function nextStep(n) {
        document.getElementById('step' + currentStep).classList.remove('active');
        currentStep = n;
        document.getElementById('step' + currentStep).classList.add('active');
        updateProgress();
        localStorage.setItem(LERNPFAD_ID + '-step', currentStep);
        window.scrollTo(0, 0);
    }

    function checkQ1() {
        var a = document.getElementById('q1').value;
        var fb = document.getElementById('fb1');
        if (a === 'b') {
            fb.className = 'feedback correct';
            fb.innerHTML = '<strong>Richtig!</strong> Das Wellenmodell konnte nicht erklären, warum die Frequenz (Farbe) entscheidend ist – nicht die Intensität.';
        } else {
            fb.className = 'feedback incorrect';
            fb.innerHTML = 'Nicht ganz. Denke daran: Was passiert bei rotem Licht mit hoher Intensität?';
        }
    }

    function checkQ3() {
        var a = parseNum(document.getElementById('q3').value);
        var fb = document.getElementById('fb3');
        if (Math.abs(a - 1.5) < 0.1) {
            fb.className = 'feedback correct';
            fb.innerHTML = '<strong>Richtig!</strong> <em>E</em><sub>kin</sub> = 1,5 eV (numerisch gleich der Spannung in Volt)';
        } else {
            fb.className = 'feedback incorrect';
            fb.innerHTML = 'Tipp: Bei <em>U</em><sub>G</sub> in Volt ist <em>E</em><sub>kin</sub> numerisch gleich in eV.';
        }
    }

    function checkMessreihe() {
        var fb = document.getElementById('fb4');
        var errors = [];
        var correct = 0;
        var total = 0;

        // Prüfe alle 5 Wellenlängen
        var wavelengths = ['400', '450', '500', '550', '600'];
        var colors = ['violett', 'blau', 'grün', 'gelb', 'orange'];

        for (var i = 0; i < wavelengths.length; i++) {
            var wl = wavelengths[i];
            var exp = EXPECTED[wl];
            var mVal = document.getElementById('m' + (i + 1)).value;
            var eVal = document.getElementById('e' + (i + 1)).value;

            if (exp[0] === null) {
                // Kein Photoeffekt erwartet
                total++;
                if (mVal === '---' || mVal === '-' || mVal.toLowerCase() === 'kein') {
                    correct++;
                } else if (mVal !== '' && !isNaN(parseNum(mVal))) {
                    errors.push(colors[i] + ': Hier gibt es keinen Photoeffekt (erwarte "---")');
                }
            } else {
                // Photoeffekt erwartet - prüfe U_G
                total += 2;
                var mNum = parseNum(mVal);
                var eNum = parseNum(eVal);

                if (!isNaN(mNum)) {
                    if (Math.abs(mNum - exp[0]) <= exp[2]) {
                        correct++;
                    } else {
                        errors.push(colors[i] + ' <em>U</em><sub>G</sub>: erwartet ca. ' + exp[0].toFixed(1).replace('.', ',') + ' V');
                    }
                }

                if (!isNaN(eNum)) {
                    if (Math.abs(eNum - exp[1]) <= exp[2]) {
                        correct++;
                    } else {
                        errors.push(colors[i] + ' <em>E</em><sub>kin</sub>: sollte = <em>U</em><sub>G</sub> in eV sein');
                    }
                }
            }
        }

        // Feedback
        if (correct >= 6) {
            fb.className = 'feedback correct';
            fb.innerHTML = '<strong>Sehr gut!</strong> Deine Messwerte stimmen. Du hast erkannt, dass bei gelb/orange kein Photoeffekt auftritt.';
        } else if (correct >= 4) {
            fb.className = 'feedback correct';
            fb.innerHTML = '<strong>Gut!</strong> Die meisten Werte stimmen.' + (errors.length > 0 ? '<br><small>Hinweis: ' + errors[0] + '</small>' : '');
        } else if (errors.length > 0) {
            fb.className = 'feedback incorrect';
            fb.innerHTML = 'Prüfe nochmal:<br>' + errors.slice(0, 2).join('<br>');
        } else {
            fb.className = 'feedback incorrect';
            fb.innerHTML = 'Trage erst deine Messwerte ein! Bei <em>U</em><sub>G</sub> in Volt ist <em>E</em><sub>kin</sub> numerisch gleich in eV.';
        }
    }

    function checkQ5() {
        var a = document.getElementById('q5').value;
        var fb = document.getElementById('fb5');
        if (a === 'b') {
            fb.className = 'feedback correct';
            fb.innerHTML = '<strong>Genau!</strong> Die Punkte liegen auf einer Geraden – das ist die <strong>Einsteinsche Gerade</strong>!';
        } else {
            fb.className = 'feedback incorrect';
            fb.innerHTML = 'Schau dir dein Diagramm nochmal an. Welche Form haben die Punkte?';
        }
    }

    function checkQ6() {
        var a = parseNum(document.getElementById('q6').value);
        var fb = document.getElementById('fb6');
        if (a >= 3.8 && a <= 4.2) {
            fb.className = 'feedback correct';
            fb.innerHTML = '<strong>Hervorragend!</strong> Du hast <em>h</em> = ca. 4,0 · 10<sup>−15</sup> eV·s bestimmt. Der Literaturwert ist 4,14 · 10<sup>−15</sup> eV·s – nur etwa 3% Abweichung!';
        } else {
            fb.className = 'feedback incorrect';
            fb.innerHTML = 'Tipp: <em>m</em> = 0,6 / (1,5 · 10<sup>14</sup>) = 0,6 / 1,5 · 10<sup>−14</sup> = 4 · 10<sup>−15</sup>';
        }
    }

    function checkQ7a() {
        var a = parseNum(document.getElementById('q7a').value);
        var fb = document.getElementById('fb7a');
        if (a >= 5.4 && a <= 5.7) {
            fb.className = 'feedback correct';
            fb.innerHTML = '<strong>Richtig!</strong> Die Grenzfrequenz von Natrium liegt bei etwa 5,5–5,6 · 10<sup>14</sup> Hz.';
        } else {
            fb.className = 'feedback incorrect';
            fb.innerHTML = 'Verlängere deine Gerade nach links, bis sie die x-Achse schneidet. Der Wert liegt zwischen 5 und 6.';
        }
    }

    function checkQ7b() {
        var a = parseNum(document.getElementById('q7b').value);
        var fb = document.getElementById('fb7b');
        if (a >= 2.1 && a <= 2.5) {
            fb.className = 'feedback correct';
            fb.innerHTML = '<strong>Richtig!</strong> <em>W</em><sub>A</sub> ≈ 2,3 eV für Natrium.';
        } else {
            fb.className = 'feedback incorrect';
            fb.innerHTML = 'Prüfe deine Herleitung und Rechnung auf dem AB.';
        }
    }

    // localStorage: Fortschritt speichern
    function saveInputs() {
        var inputs = document.querySelectorAll('input, select');
        for (var i = 0; i < inputs.length; i++) {
            var el = inputs[i];
            if (el.id) {
                localStorage.setItem(LERNPFAD_ID + '-' + el.id, el.value);
            }
        }
    }

    function loadInputs() {
        var inputs = document.querySelectorAll('input, select');
        for (var i = 0; i < inputs.length; i++) {
            var el = inputs[i];
            if (el.id) {
                var saved = localStorage.getItem(LERNPFAD_ID + '-' + el.id);
                if (saved) el.value = saved;
            }
        }

        var savedStep = localStorage.getItem(LERNPFAD_ID + '-step');
        if (savedStep) {
            currentStep = parseInt(savedStep);
            var allSteps = document.querySelectorAll('.step');
            for (var j = 0; j < allSteps.length; j++) {
                allSteps[j].classList.remove('active');
            }
            document.getElementById('step' + currentStep).classList.add('active');
        }
        updateProgress();
    }

    // Event Listener
    var allInputs = document.querySelectorAll('input, select');
    for (var k = 0; k < allInputs.length; k++) {
        allInputs[k].addEventListener('change', saveInputs);
    }

    // Init
    loadInputs();
</script>

</body>
</html>
