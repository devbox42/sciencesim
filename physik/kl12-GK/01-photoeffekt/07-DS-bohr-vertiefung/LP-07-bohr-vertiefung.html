<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lernpfad: Bohr-Vertiefung | Physik 12 GK</title>
    <style>
/* ===============================================================
   LERNPFAD: BOHR-VERTIEFUNG (DS7, 80 min)
   sciencesim Design System (ES5)
   Stand: 06.02.2026
=============================================================== */

* { box-sizing: border-box; margin: 0; padding: 0; }

:root {
    --bg: #f5f5f5;
    --white: #ffffff;
    --border: #dddddd;
    --text-primary: #222222;
    --text-secondary: #555555;
    --text-muted: #888888;
    --accent: #2c5aa0;
    --accent-light: #e8f0fa;
    --success: #2a7a4b;
    --success-bg: #e8f5e9;
    --warning: #b35c00;
    --warning-bg: #fff3e0;
    --danger: #c62828;
    --danger-bg: #ffebee;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg);
    font-size: 16px;
    color: var(--text-primary);
    line-height: 1.5;
}

.container {
    max-width: 850px;
    margin: 0 auto;
    padding: 15px;
}

/* Header */
header {
    background: var(--white);
    border: 1px solid var(--border);
    padding: 15px 20px;
    margin-bottom: 15px;
}

header h1 {
    color: var(--accent);
    font-size: 1.35em;
    font-weight: 600;
}

header .meta {
    color: var(--text-secondary);
    font-size: 0.85em;
    margin-top: 4px;
}

.progress-bar {
    background: var(--border);
    height: 6px;
    margin-top: 10px;
}

.progress-fill {
    background: var(--accent);
    height: 100%;
    width: 0%;
    transition: width 0.3s;
}

/* Phase-Leiste */
.phase-bar {
    display: flex;
    background: var(--white);
    border: 1px solid var(--border);
    margin-bottom: 15px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.phase-item {
    flex: 1;
    text-align: center;
    padding: 12px 4px;
    font-size: 0.72em;
    font-weight: 600;
    color: var(--text-muted);
    min-width: 70px;
    min-height: 44px;
    border-right: 1px solid var(--border);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.phase-item:last-child { border-right: none; }

.phase-item.active {
    background: var(--accent);
    color: white;
}

.phase-item.done {
    background: var(--success);
    color: white;
}

/* Steps */
.step {
    background: var(--white);
    border: 1px solid var(--border);
    padding: 20px;
    margin-bottom: 15px;
    display: none;
}

.step.active { display: block; }

.step-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}
.step-number { margin-right: 10px; }

.step-number {
    background: var(--accent);
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.9em;
    flex-shrink: 0;
}

.step-title {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--accent);
}

.step-content { margin-bottom: 15px; }
.step-content p { margin-bottom: 10px; }
.step-content ul, .step-content ol { margin-left: 20px; margin-bottom: 10px; }
.step-content li { margin-bottom: 5px; }

/* Boxes */
.info-box {
    background: var(--accent-light);
    border: 1px solid var(--accent);
    padding: 12px 15px;
    margin: 12px 0;
    font-size: 0.95em;
}

.info-box strong { color: var(--accent); }

.success-box {
    background: var(--success-bg);
    border: 1px solid var(--success);
    padding: 12px 15px;
    margin: 12px 0;
    font-size: 0.95em;
}

.success-box strong { color: var(--success); }

.warning-box {
    background: var(--warning-bg);
    border: 2px solid var(--warning);
    padding: 12px 15px;
    margin: 12px 0;
    font-size: 0.95em;
}

.warning-box::before {
    content: "Arbeitsblatt";
    display: inline-block;
    background: var(--warning);
    color: white;
    font-size: 0.75em;
    font-weight: 600;
    padding: 2px 8px;
    margin-bottom: 8px;
}

.warning-box strong { color: var(--warning); }

.danger-box {
    background: var(--danger-bg);
    border: 1px solid var(--danger);
    padding: 12px 15px;
    margin: 12px 0;
    font-size: 0.95em;
}

.danger-box strong { color: var(--danger); }

/* Formelbox */
.formula {
    font-family: "Times New Roman", Times, serif;
    font-style: italic;
    font-size: 1.15em;
    text-align: center;
    padding: 14px;
    background: white;
    border: 2px solid var(--accent);
    margin: 12px 0;
}

.formula-small {
    font-family: "Times New Roman", Times, serif;
    font-style: italic;
    font-size: 1.05em;
    text-align: center;
    padding: 10px;
    background: #f9f9f9;
    border: 1px solid var(--border);
    margin: 8px 0;
}

/* Tabellen */
.data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 12px 0;
    font-size: 0.9em;
}

.data-table th, .data-table td {
    border: 1px solid var(--border);
    padding: 8px 10px;
    text-align: center;
}

.data-table th {
    background: var(--accent-light);
    color: var(--accent);
    font-weight: 600;
}

.data-table tr:hover { background: #f0f7ff; }

/* Quiz / MC */
.quiz-box {
    background: #f9f9f9;
    border: 1px solid var(--border);
    padding: 15px;
    margin: 12px 0;
}

.quiz-box h4 {
    color: var(--accent);
    margin-bottom: 10px;
    font-size: 0.95em;
}

.mc-option {
    display: block;
    padding: 10px 14px;
    margin: 6px 0;
    border: 2px solid var(--border);
    background: white;
    cursor: pointer;
    font-size: 0.95em;
    min-height: 44px;
    transition: border-color 0.2s, background 0.2s;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.mc-option:hover { border-color: var(--accent); }
.mc-option.correct { background: #d4edda; border-color: #28a745; }
.mc-option.incorrect { background: #f8d7da; border-color: #dc3545; }
.mc-option.disabled { pointer-events: none; opacity: 0.7; }

.feedback {
    padding: 10px;
    margin-top: 8px;
    font-size: 0.9em;
    display: none;
}

.feedback.show { display: block; }

/* Fill-blank */
.fill-blank {
    display: inline-block;
    border-bottom: 2px solid var(--accent);
    min-width: 80px;
    min-height: 44px;
    padding: 8px 6px;
    font-family: inherit;
    font-size: 0.95em;
    background: transparent;
    border-top: none;
    border-left: none;
    border-right: none;
    outline: none;
    text-align: center;
}

.fill-blank.correct { border-color: #28a745; color: #28a745; }
.fill-blank.incorrect { border-color: #dc3545; color: #dc3545; }

.check-btn {
    display: inline-block;
    padding: 8px 16px;
    background: var(--accent);
    color: white;
    border: none;
    cursor: pointer;
    font-size: 0.9em;
    font-weight: 600;
    margin: 8px 4px;
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
}

.check-btn:hover { opacity: 0.9; }

/* Tabellen-Scroll für iPad */
.table-scroll { overflow-x: auto; -webkit-overflow-scrolling: touch; }

/* Rechnung interaktiv */
.calc-step {
    background: #fafafa;
    border: 1px solid var(--border);
    padding: 12px;
    margin: 8px 0;
}

.calc-step .label {
    font-weight: 600;
    color: var(--text-secondary);
    font-size: 0.85em;
    margin-bottom: 4px;
}

.calc-result {
    font-family: "Times New Roman", Times, serif;
    font-size: 1.1em;
    color: var(--accent);
    font-weight: 600;
}

/* Spektrum inline */
.spectrum-inline {
    height: 50px;
    position: relative;
    border: 1px solid #333;
    margin: 10px 0;
    background: linear-gradient(to right,
        #8B00FF 0%, #4B0082 10%, #0000FF 20%,
        #00FFFF 35%, #00FF00 50%, #FFFF00 65%,
        #FF7F00 80%, #FF0000 100%
    );
}

.spectrum-inline.absorption {
    /* Continuous with dark lines */
}

.fraunhofer-line {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 3px;
    background: #000;
}

.fraunhofer-label {
    position: absolute;
    top: -18px;
    font-size: 0.7em;
    font-weight: 600;
    transform: translateX(-50%);
}

.spectrum-scale {
    display: flex;
    justify-content: space-between;
    font-size: 0.75em;
    color: var(--text-secondary);
    margin-top: 3px;
}

/* Farbfeld */
.color-swatch {
    display: inline-block;
    width: 22px;
    height: 22px;
    border: 1px solid #333;
    vertical-align: middle;
    margin: 0 4px;
}

/* SIM Embed */
.sim-embed {
    border: 1px solid var(--border);
    margin: 12px 0;
}

.sim-embed iframe {
    width: 100%;
    height: 500px;
    border: none;
}

.sim-embed .sim-caption {
    padding: 8px 12px;
    background: #f0f0f0;
    font-size: 0.85em;
    color: var(--text-secondary);
}

/* Navigation */
.nav-container {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}
.nav-container .btn-nav + .btn-nav { margin-left: 10px; }

.btn-nav {
    padding: 12px 24px;
    font-size: 1em;
    font-weight: 600;
    border: none;
    cursor: pointer;
    background: var(--accent);
    color: white;
    min-height: 44px;
    touch-action: manipulation;
}

.btn-nav:hover { opacity: 0.9; }
.btn-nav:disabled { background: var(--border); cursor: not-allowed; }
.btn-nav.btn-back { background: var(--text-secondary); }
.btn-nav.btn-success { background: var(--success); }

/* Checkliste */
.checklist {
    list-style: none;
    margin: 0;
    padding: 0;
}

.checklist li {
    padding: 8px 10px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
}
.checklist input[type="checkbox"] { margin-right: 10px; }

.checklist li:last-child { border-bottom: none; }

.checklist input[type="checkbox"] {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    /* Touch-target via padding on parent li (44px total) */
}

.checklist li {
    min-height: 44px;
    cursor: pointer;
}

/* Niveau-Badges */
.niveau { font-size: 0.8em; font-weight: 600; padding: 2px 6px; margin-left: 5px; }
.niveau-1 { color: #2a7a4b; }
.niveau-2 { color: var(--accent); }
.niveau-3 { color: #8e24aa; }

/* Responsive */
@media (max-width: 600px) {
    .container { padding: 10px; }
    .step { padding: 15px; }
    .formula { font-size: 1em; padding: 10px; }
    .phase-item { font-size: 0.65em; padding: 8px 2px; min-width: 55px; min-height: 44px; }
    .data-table { font-size: 0.8em; }
    .data-table th, .data-table td { padding: 5px 4px; }
}
</style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Bohr-Vertiefung: Rechnen, Anwenden, Grenzen</h1>
            <div class="meta">Fr 06.02.2026 | Physik 12 GK | DS (80 min, SEV)</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </header>

        <div class="phase-bar" id="phaseBar">
            <div class="phase-item" data-phase="1">Warm-up</div>
            <div class="phase-item" data-phase="2">Ionisierung</div>
            <div class="phase-item" data-phase="3">Übergänge</div>
            <div class="phase-item" data-phase="4">Z-Erweiterung</div>
            <div class="phase-item" data-phase="5">Fraunhofer</div>
            <div class="phase-item" data-phase="6">Grenzen</div>
            <div class="phase-item" data-phase="7">Checkliste</div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════
             SCHRITT 1: WARM-UP & WIEDERHOLUNG (5 min)
        ═══════════════════════════════════════════════════════════ -->
        <div class="step active" id="step1" data-phase="1">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">Warm-up: Was weißt du noch?</div>
            </div>
            <div class="step-content">
                <p>Bevor wir heute rechnen und vertiefen, frischen wir kurz die Grundlagen auf.</p>

                <div class="quiz-box">
                    <h4>Schnellcheck: Die drei Bohr-Postulate</h4>
                    <p>Welche Aussage ist <strong>kein</strong> Bohr-Postulat?</p>
                    <div class="mc-option" data-correct="false" data-q="q1" onclick="checkMC(this)">Elektronen bewegen sich auf bestimmten Bahnen, ohne zu strahlen.</div>
                    <div class="mc-option" data-correct="false" data-q="q1" onclick="checkMC(this)">Nur bestimmte Bahnen sind erlaubt (Quantenzahl n).</div>
                    <div class="mc-option" data-correct="true" data-q="q1" onclick="checkMC(this)">Elektronen können sich auf jeder beliebigen Bahn befinden.</div>
                    <div class="mc-option" data-correct="false" data-q="q1" onclick="checkMC(this)">Bei Übergängen wird ein Photon emittiert oder absorbiert.</div>
                    <div class="feedback" id="fb-q1"></div>
                </div>

                <div class="quiz-box">
                    <h4>Formuliere die drei Postulate</h4>
                    <p>Ergänze die Schlüsselbegriffe:</p>

                    <p style="margin: 10px 0;"><strong>Postulat 1 (Stabilität):</strong><br>
                    Elektronen bewegen sich auf bestimmten Bahnen, ohne zu
                    <input type="text" class="fill-blank" id="post-1" placeholder="?" style="width: 120px;" autocomplete="off" autocorrect="off" spellcheck="false">.</p>

                    <p style="margin: 10px 0;"><strong>Postulat 2 (Quantisierung):</strong><br>
                    Nur bestimmte Bahnen sind
                    <input type="text" class="fill-blank" id="post-2" placeholder="?" style="width: 120px;" autocomplete="off" autocorrect="off" spellcheck="false">.
                    Sie werden durch die Quantenzahl
                    <input type="text" class="fill-blank" id="post-3" placeholder="?" style="width: 50px;" autocomplete="off" autocorrect="off" spellcheck="false">
                    = 1, 2, 3, &hellip; beschrieben.</p>

                    <p style="margin: 10px 0;"><strong>Postulat 3 (Übergänge):</strong><br>
                    Bei einem Übergang wird ein
                    <input type="text" class="fill-blank" id="post-4" placeholder="?" style="width: 120px;" autocomplete="off" autocorrect="off" spellcheck="false">
                    emittiert oder absorbiert. Seine Energie entspricht der
                    <input type="text" class="fill-blank" id="post-5" placeholder="?" style="width: 180px;" autocomplete="off" autocorrect="off" spellcheck="false">
                    der beiden Niveaus.</p>

                    <button class="check-btn" onclick="checkPostulate()" style="min-height: 44px;">Prüfen</button>
                    <div class="feedback" id="fb-postulate"></div>
                </div>

                <div class="info-box">
                    <strong>Erinnerung:</strong> Die Energieniveaus im Wasserstoffatom:
                    <div class="formula">E<sub>n</sub> = -13,6 eV / n<sup>2</sup></div>
                    <p style="margin-top: 8px;">
                        E<sub>1</sub> = -13,6 eV &nbsp;|&nbsp;
                        E<sub>2</sub> = -3,40 eV &nbsp;|&nbsp;
                        E<sub>3</sub> = -1,51 eV &nbsp;|&nbsp;
                        E<sub>4</sub> = -0,85 eV
                    </p>
                </div>

                <div class="quiz-box">
                    <h4>Schnellcheck: Photonenenergie beim Übergang</h4>
                    <p>Ein Elektron fällt von n = 3 auf n = 2. Wie groß ist die Energie des emittierten Photons?</p>
                    <div class="mc-option" data-correct="false" data-q="q2" onclick="checkMC(this)">3,40 eV</div>
                    <div class="mc-option" data-correct="true" data-q="q2" onclick="checkMC(this)">1,89 eV</div>
                    <div class="mc-option" data-correct="false" data-q="q2" onclick="checkMC(this)">13,6 eV</div>
                    <div class="mc-option" data-correct="false" data-q="q2" onclick="checkMC(this)">0,66 eV</div>
                    <div class="feedback" id="fb-q2"></div>
                </div>
            </div>

            <div class="nav-container">
                <div></div>
                <button class="btn-nav" onclick="nextStep()">Weiter &rarr;</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════
             SCHRITT 2: IONISIERUNGSENERGIE (15 min)
        ═══════════════════════════════════════════════════════════ -->
        <div class="step" id="step2" data-phase="2">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">Ionisierungsenergie</div>
            </div>
            <div class="step-content">
                <p><strong>Frage:</strong> Wie viel Energie braucht man, um ein Elektron <em>komplett</em> aus dem Atom zu entfernen?</p>

                <div class="info-box">
                    <strong>Gedankengang:</strong>
                    <ul>
                        <li>Das Elektron ist im Grundzustand: E<sub>1</sub> = -13,6 eV</li>
                        <li>Komplett entfernt bedeutet: n &rarr; &infin; &nbsp;&rArr;&nbsp; E<sub>&infin;</sub> = 0 eV</li>
                        <li>Die nötige Energie ist die <strong>Differenz</strong>:</li>
                    </ul>
                    <div class="formula">E<sub>ion</sub> = E<sub>&infin;</sub> - E<sub>1</sub> = 0 - (-13,6 eV) = <strong>13,6 eV</strong></div>
                </div>

                <div class="quiz-box">
                    <h4>Verstanden?</h4>
                    <p>Ein Elektron befindet sich auf n = 2. Wie groß ist die Ionisierungsenergie <em>von diesem Niveau aus</em>?</p>
                    <p style="font-size: 0.85em; color: var(--text-secondary);">Tipp: E<sub>ion</sub> = 0 - E<sub>n</sub></p>
                    <div class="mc-option" data-correct="false" data-q="q3" onclick="checkMC(this)">13,6 eV</div>
                    <div class="mc-option" data-correct="true" data-q="q3" onclick="checkMC(this)">3,40 eV</div>
                    <div class="mc-option" data-correct="false" data-q="q3" onclick="checkMC(this)">1,51 eV</div>
                    <div class="mc-option" data-correct="false" data-q="q3" onclick="checkMC(this)">10,2 eV</div>
                    <div class="feedback" id="fb-q3"></div>
                </div>

                <div class="info-box" style="background: var(--success-bg); border-color: var(--success);">
                    <strong style="color: var(--success);">Merke:</strong> Die Ionisierungsenergie von Wasserstoff im Grundzustand beträgt <strong>13,6 eV</strong>. Von angeregten Zuständen aus ist sie kleiner.
                </div>
            </div>

            <div class="warning-box">
                <strong>Aufgabe 1 + Energieniveauschema:</strong> Vervollständige den Kasten zur Ionisierungsenergie auf deinem Arbeitsblatt. Trage E<sub>3</sub> und E<sub>4</sub> in das Niveauschema ein.
            </div>

            <div class="nav-container">
                <button class="btn-nav btn-back" onclick="prevStep()">&larr; Zurück</button>
                <button class="btn-nav" onclick="nextStep()">Weiter &rarr;</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════
             SCHRITT 3: UBERGANGE BERECHNEN (20 min)
        ═══════════════════════════════════════════════════════════ -->
        <div class="step" id="step3" data-phase="3">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">Übergänge berechnen: Von der Energie zur Farbe</div>
            </div>
            <div class="step-content">
                <p>Der vollständige Rechenweg von einem Übergang zur <strong>Farbe des Lichts</strong>:</p>

                <div class="info-box">
                    <strong>Rezept (3 Schritte):</strong>
                    <ol>
                        <li><strong>Energiedifferenz:</strong> &Delta;E = |E<sub>n1</sub> - E<sub>n2</sub>|</li>
                        <li><strong>Frequenz:</strong> f = &Delta;E / h &nbsp;&nbsp;(mit h = 4,14 &times; 10<sup>-15</sup> eV&middot;s)</li>
                        <li><strong>Wellenlänge:</strong> &lambda; = c / f &nbsp;&nbsp;<em>oder direkt:</em> &lambda; = h&middot;c / &Delta;E &nbsp;&nbsp;(mit h&middot;c = 1240 eV&middot;nm)</li>
                    </ol>
                </div>

                <div class="formula">
                    &lambda; = 1240 eV&middot;nm / &Delta;E
                </div>

                <p><strong>Beispielrechnung:</strong> Übergang n = 4 &rarr; n = 2</p>

                <div class="calc-step">
                    <div class="label">Schritt 1: Energiedifferenz</div>
                    <div class="calc-result">&Delta;E = |E<sub>4</sub> - E<sub>2</sub>| = |-0,85 - (-3,40)| = 2,55 eV</div>
                </div>
                <div class="calc-step">
                    <div class="label">Schritt 2: Wellenlänge</div>
                    <div class="calc-result">&lambda; = 1240 / 2,55 = 486 nm</div>
                </div>
                <div class="calc-step">
                    <div class="label">Schritt 3: Farbe ablesen</div>
                    <div class="calc-result">486 nm &rarr; <span style="color: #00cccc; font-weight: bold;">cyan (blaugrün)</span> <span class="color-swatch" style="background: #00cccc;"></span></div>
                </div>

                <div class="info-box">
                    <strong>Sichtbares Licht (Orientierung):</strong>
                    <div class="table-scroll">
                    <table class="data-table" style="margin-top: 8px;">
                        <tr>
                            <th>&lambda;</th>
                            <td>380-430</td><td>430-470</td><td>470-500</td><td>500-560</td><td>560-590</td><td>590-630</td><td>630-700</td>
                        </tr>
                        <tr>
                            <th>Farbe</th>
                            <td style="color: #7700bb;">violett</td>
                            <td style="color: #0044cc;">blau</td>
                            <td style="color: #008899;">cyan</td>
                            <td style="color: #008800;">grün</td>
                            <td style="color: #ccaa00;">gelb</td>
                            <td style="color: #cc6600;">orange</td>
                            <td style="color: #cc0000;">rot</td>
                        </tr>
                    </table>
                    </div>
                </div>

                <p style="margin-top: 15px;"><strong>Jetzt bist du dran!</strong></p>

                <!-- Interaktiver Übergangs-Rechner -->
                <div class="quiz-box" id="calcExercise1">
                    <h4>Aufgabe: Übergang n = 5 &rarr; n = 2 <span class="niveau niveau-2">&starf;&starf;</span></h4>
                    <p>E<sub>5</sub> = -13,6 / 25 = -0,544 eV &nbsp;&nbsp;|&nbsp;&nbsp; E<sub>2</sub> = -3,40 eV</p>

                    <div class="calc-step">
                        <div class="label">&Delta;E = |E<sub>5</sub> - E<sub>2</sub>| =</div>
                        <input type="number" step="0.01" class="fill-blank" id="calc1-de" placeholder="? eV" style="width: 100px;">
                        <span style="font-size: 0.9em;"> eV</span>
                    </div>
                    <div class="calc-step">
                        <div class="label">&lambda; = 1240 / &Delta;E =</div>
                        <input type="number" step="1" class="fill-blank" id="calc1-lambda" placeholder="? nm" style="width: 100px;">
                        <span style="font-size: 0.9em;"> nm</span>
                    </div>
                    <div class="calc-step">
                        <div class="label">Farbe:</div>
                        <div class="mc-option" data-correct="false" data-q="q4" onclick="checkMC(this)" style="display: inline-block; width: auto; padding: 8px 16px; margin: 4px; min-height: 44px;">rot</div>
                        <div class="mc-option" data-correct="true" data-q="q4" onclick="checkMC(this)" style="display: inline-block; width: auto; padding: 8px 16px; margin: 4px; min-height: 44px;">blau (434 nm)</div>
                        <div class="mc-option" data-correct="false" data-q="q4" onclick="checkMC(this)" style="display: inline-block; width: auto; padding: 8px 16px; margin: 4px; min-height: 44px;">violett</div>
                        <div class="mc-option" data-correct="false" data-q="q4" onclick="checkMC(this)" style="display: inline-block; width: auto; padding: 8px 16px; margin: 4px; min-height: 44px;">grün</div>
                        <div class="feedback" id="fb-q4"></div>
                    </div>
                    <button class="check-btn" onclick="checkCalc1()">Prüfen</button>
                    <div class="feedback" id="fb-calc1"></div>
                </div>

                <!-- Zweite Ubung: Absorption -->
                <div class="quiz-box">
                    <h4>Aufgabe: Absorption <span class="niveau niveau-2">&starf;&starf;</span></h4>
                    <p>Licht mit &lambda; = 122 nm trifft auf Wasserstoff. Wird es absorbiert?</p>
                    <p style="font-size: 0.85em; color: var(--text-secondary);">Tipp: Berechne &Delta;E = 1240/122 und prüfe, ob dieser Wert einem Übergang entspricht.</p>

                    <div class="mc-option" data-correct="false" data-q="q5" onclick="checkMC(this)">Nein, 122 nm liegt im UV und kann nicht absorbiert werden.</div>
                    <div class="mc-option" data-correct="true" data-q="q5" onclick="checkMC(this)">Ja: &Delta;E = 1240/122 = 10,16 eV &asymp; 10,2 eV = |E<sub>1</sub> - E<sub>2</sub>| &rarr; Übergang n=1 &rarr; n=2 (Lyman-&alpha;)</div>
                    <div class="mc-option" data-correct="false" data-q="q5" onclick="checkMC(this)">Ja, es entspricht dem Übergang n=1 &rarr; n=3 (&Delta;E &asymp; 12,1 eV).</div>
                    <div class="feedback" id="fb-q5"></div>
                </div>
            </div>

            <div class="warning-box">
                <strong>Aufgabe 2 + 3:</strong> Bearbeite die Übergangsrechnungen auf deinem Arbeitsblatt. Nutze die Formel &lambda; = 1240 eV&middot;nm / &Delta;E.
            </div>

            <div class="nav-container">
                <button class="btn-nav btn-back" onclick="prevStep()">&larr; Zurück</button>
                <button class="btn-nav" onclick="nextStep()">Weiter &rarr;</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════
             SCHRITT 4: Z-ERWEITERUNG (15 min)
        ═══════════════════════════════════════════════════════════ -->
        <div class="step" id="step4" data-phase="4">
            <div class="step-header">
                <div class="step-number">4</div>
                <div class="step-title">Erweiterung: Wasserstoff-ähnliche Ionen (Z)</div>
            </div>
            <div class="step-content">
                <p>Bisher haben wir nur <strong>Wasserstoff</strong> (Z = 1) betrachtet. Was passiert bei Ionen mit <em>einem</em> Elektron, aber <strong>mehr Protonen</strong> im Kern?</p>

                <div class="info-box">
                    <strong>Beispiele für wasserstoff-ähnliche Ionen:</strong>
                    <ul>
                        <li><strong>He<sup>+</sup></strong> (Helium-Ion): Z = 2, ein Elektron</li>
                        <li><strong>Li<sup>2+</sup></strong> (Lithium-Ion): Z = 3, ein Elektron</li>
                    </ul>
                    <p style="margin-top: 8px;">Die größere Kernladung (Z) bindet das Elektron <strong>stärker</strong>. Die Formel wird erweitert:</p>
                </div>

                <div class="formula">E<sub>n</sub> = -13,6 eV &middot; Z<sup>2</sup> / n<sup>2</sup></div>

                <p><strong>Vergleich der Grundzustandsenergien:</strong></p>
                <div class="table-scroll">
                <table class="data-table">
                    <tr>
                        <th>Ion</th><th>Z</th><th>E<sub>1</sub></th><th>E<sub>2</sub></th><th>E<sub>3</sub></th><th>E<sub>ion</sub></th>
                    </tr>
                    <tr>
                        <td>H</td><td>1</td><td>-13,6 eV</td><td>-3,40 eV</td><td>-1,51 eV</td><td>13,6 eV</td>
                    </tr>
                    <tr>
                        <td>He<sup>+</sup></td><td>2</td><td>-54,4 eV</td><td>-13,6 eV</td><td>-6,04 eV</td><td>54,4 eV</td>
                    </tr>
                    <tr>
                        <td>Li<sup>2+</sup></td><td>3</td><td>-122,4 eV</td><td>-30,6 eV</td><td>-13,6 eV</td><td>122,4 eV</td>
                    </tr>
                </table>
                </div>

                <p style="margin-top: 15px;"><strong>Rechenbeispiel:</strong> He<sup>+</sup>, Übergang n = 3 &rarr; n = 2</p>
                <div class="calc-step">
                    <div class="label">Energieniveaus (Z = 2):</div>
                    <div class="calc-result">E<sub>3</sub> = -13,6 &middot; 4 / 9 = -6,04 eV &nbsp;&nbsp;|&nbsp;&nbsp; E<sub>2</sub> = -13,6 &middot; 4 / 4 = -13,6 eV</div>
                </div>
                <div class="calc-step">
                    <div class="label">&Delta;E:</div>
                    <div class="calc-result">&Delta;E = |-6,04 - (-13,6)| = 7,56 eV</div>
                </div>
                <div class="calc-step">
                    <div class="label">Wellenlänge:</div>
                    <div class="calc-result">&lambda; = 1240 / 7,56 = 164 nm &rarr; <strong>UV-Strahlung</strong> (nicht sichtbar!)</div>
                </div>

                <div class="danger-box">
                    <strong>Beachte:</strong> Bei He<sup>+</sup> liegt derselbe Übergang (3&rarr;2) im UV statt im sichtbaren Bereich, weil die Energiedifferenzen <strong>4-mal größer</strong> sind (Z<sup>2</sup> = 4).
                </div>

                <!-- Ubung -->
                <div class="quiz-box">
                    <h4>Aufgabe: He<sup>+</sup>, Übergang n = 4 &rarr; n = 3 <span class="niveau niveau-2">&starf;&starf;</span></h4>
                    <p>Berechne die Wellenlänge und bestimme den Spektralbereich.</p>
                    <p style="font-size: 0.85em; color: var(--text-secondary);">E<sub>4</sub> = -13,6 &middot; 4/16 = -3,40 eV &nbsp;|&nbsp; E<sub>3</sub> = -6,04 eV</p>
                    <div class="calc-step">
                        <div class="label">&Delta;E =</div>
                        <input type="number" step="0.01" class="fill-blank" id="calc2-de" placeholder="?" style="width: 80px;"> eV
                    </div>
                    <div class="calc-step">
                        <div class="label">&lambda; =</div>
                        <input type="number" step="1" class="fill-blank" id="calc2-lambda" placeholder="?" style="width: 80px;"> nm
                    </div>
                    <div class="calc-step">
                        <div class="label">Spektralbereich:</div>
                        <div class="mc-option" data-correct="false" data-q="q6" onclick="checkMC(this)" style="display: inline-block; width: auto; padding: 8px 16px; margin: 4px; min-height: 44px;">sichtbar</div>
                        <div class="mc-option" data-correct="false" data-q="q6" onclick="checkMC(this)" style="display: inline-block; width: auto; padding: 8px 16px; margin: 4px; min-height: 44px;">UV</div>
                        <div class="mc-option" data-correct="true" data-q="q6" onclick="checkMC(this)" style="display: inline-block; width: auto; padding: 8px 16px; margin: 4px; min-height: 44px;">sichtbar (blau)</div>
                        <div class="mc-option" data-correct="false" data-q="q6" onclick="checkMC(this)" style="display: inline-block; width: auto; padding: 8px 16px; margin: 4px; min-height: 44px;">Infrarot</div>
                        <div class="feedback" id="fb-q6"></div>
                    </div>
                    <button class="check-btn" onclick="checkCalc2()">Prüfen</button>
                    <div class="feedback" id="fb-calc2"></div>
                </div>
            </div>

            <div class="warning-box">
                <strong>Aufgabe 4:</strong> Berechne auf dem Arbeitsblatt den Übergang für He<sup>+</sup> und bestimme die Emissionsfarbe.
            </div>

            <div class="nav-container">
                <button class="btn-nav btn-back" onclick="prevStep()">&larr; Zurück</button>
                <button class="btn-nav" onclick="nextStep()">Weiter &rarr;</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════
             SCHRITT 5: SONNENSPEKTRUM / FRAUNHOFER (15 min)
        ═══════════════════════════════════════════════════════════ -->
        <div class="step" id="step5" data-phase="5">
            <div class="step-header">
                <div class="step-number">5</div>
                <div class="step-title">Sonnenspektrum und Fraunhofer-Linien</div>
            </div>
            <div class="step-content">
                <p>Bisher: <strong>Emission</strong> (heißes Gas sendet Licht aus). Jetzt: <strong>Absorption</strong> (kühleres Gas absorbiert Licht).</p>

                <div class="info-box">
                    <strong>Das Prinzip:</strong>
                    <ol>
                        <li>Die heiße Sonnenoberfläche sendet ein <strong>kontinuierliches Spektrum</strong> aus (alle Farben)</li>
                        <li>Das kühlere Gas in der Sonnenatmosphäre <strong>absorbiert</strong> genau die Wellenlängen, die es auch emittieren würde</li>
                        <li>Im Spektrum fehlen daher bestimmte Wellenlängen &rarr; <strong>dunkle Linien</strong></li>
                    </ol>
                </div>

                <p><strong>Das Sonnenspektrum mit Fraunhofer-Linien:</strong></p>

                <div style="position: relative; margin: 15px 0;">
                    <div class="spectrum-inline absorption" id="solarSpectrum">
                        <!-- Fraunhofer-Linien werden per JS eingefugt -->
                    </div>
                    <div class="spectrum-scale">
                        <span>380 nm</span>
                        <span>450</span>
                        <span>500</span>
                        <span>550</span>
                        <span>600</span>
                        <span>650</span>
                        <span>700 nm</span>
                    </div>
                </div>

                <p style="font-size: 0.9em; color: var(--text-secondary); margin-top: 5px;">Die dunklen Linien zeigen, welche Elemente in der Sonnenatmosphäre vorhanden sind.</p>

                <div class="table-scroll">
                <table class="data-table" style="margin-top: 15px;">
                    <tr>
                        <th>Linie</th><th>&lambda; (nm)</th><th>Element</th><th>Farbe im Spektrum</th>
                    </tr>
                    <tr><td><strong>K</strong></td><td>393</td><td>Ca<sup>+</sup></td><td style="color: #7700bb;">violett</td></tr>
                    <tr><td><strong>H</strong></td><td>397</td><td>Ca<sup>+</sup></td><td style="color: #7700bb;">violett</td></tr>
                    <tr><td><strong>G</strong></td><td>431</td><td>Fe, Ca</td><td style="color: #0044cc;">blau</td></tr>
                    <tr><td><strong>F</strong></td><td>486</td><td>H<sub>&beta;</sub></td><td style="color: #00aacc;">blaugrün</td></tr>
                    <tr><td><strong>b</strong></td><td>517</td><td>Mg</td><td style="color: #00aa00;">grün</td></tr>
                    <tr><td><strong>D</strong></td><td>589/590</td><td>Na</td><td style="color: #ddaa00;">gelb</td></tr>
                    <tr><td><strong>C</strong></td><td>656</td><td>H<sub>&alpha;</sub></td><td style="color: #cc0000;">rot</td></tr>
                </table>
                </div>

                <div class="info-box" style="margin-top: 15px;">
                    <strong>Niveauschema eines anderen Elements: Natrium (Na)</strong>
                    <p style="margin-top: 8px; font-size: 0.9em;">
                        Bei Natrium (11 Elektronen) hängt die Energie nicht nur von <em>n</em>, sondern auch vom Bahndrehimpuls <em>l</em> ab.
                        Die berühmte gelbe <strong>D-Linie</strong> bei 589 nm entsteht durch den Übergang 3p &rarr; 3s:
                    </p>
                    <table class="data-table" style="margin: 10px auto; width: auto;">
                        <tr><th>Niveau</th><th>Energie</th><th>Bemerkung</th></tr>
                        <tr><td style="color: var(--text-muted);">...</td><td style="color: var(--text-muted);">näher an 0</td><td style="font-size: 0.8em; color: var(--text-muted);">höhere Niveaus</td></tr>
                        <tr><td>3d</td><td>-1,52 eV</td><td style="font-size: 0.8em;">gleiches n=3, anderes l!</td></tr>
                        <tr><td>4s</td><td>-1,95 eV</td><td style="font-size: 0.8em;"></td></tr>
                        <tr style="background: #fff8e1;"><td><strong>3p</strong></td><td><strong>-3,04 eV</strong></td><td style="font-size: 0.8em;">1. angeregter Zustand</td></tr>
                        <tr style="background: #fff8e1;"><td><strong>3s</strong></td><td><strong>-5,14 eV</strong></td><td style="font-size: 0.8em;">Grundzustand</td></tr>
                    </table>
                    <div class="formula-small" style="border-color: #ddaa00; background: #fffde7;">
                        <strong style="color: #b38a00;">D-Linie:</strong> 3p &rarr; 3s: &nbsp; &Delta;E = 5,14 - 3,04 = 2,10 eV &nbsp;&rarr;&nbsp; &lambda; = 1240 / 2,10 &asymp; <strong>590 nm</strong> (Lit.: 589 nm)
                        <span class="color-swatch" style="background: #ffcc00;"></span> gelb
                    </div>
                    <p style="font-size: 0.9em; margin-top: 10px;"><strong>Vergleich mit H:</strong> Bei Wasserstoff hängen die Niveaus nur von n ab. Bei Na ist 3s &ne; 3p (verschiedene Energien trotz gleichem n&nbsp;=&nbsp;3). Das Bohr-Modell kann diesen Unterschied <em>nicht</em> erklären &mdash; es kennt nur n, nicht l.</p>
                </div>

                <div class="success-box">
                    <strong>Erkennst du die Wasserstoff-Linien?</strong> Die Fraunhofer-Linien <strong>C</strong> (656 nm) und <strong>F</strong> (486 nm) sind genau die H<sub>&alpha;</sub>- und H<sub>&beta;</sub>-Linien der Balmer-Serie! Das Sonnenspektrum beweist: Es gibt Wasserstoff in der Sonnenatmosphäre.
                </div>

                <p style="margin-top: 12px;">Schaue dir nochmal die <strong>Emissionsspektren</strong> in der Simulation an. Vergleiche mit den dunklen Linien oben:</p>

                <div class="sim-embed">
                    <iframe src="../06-ES-bohr-postulate/SIM-06b-wasserstoff-spektrum.html"></iframe>
                    <div class="sim-caption">SIM-06b: Wasserstoff-Emissionsspektrum (Balmer-Serie) &mdash; Vergleiche die hellen Emissionslinien mit den dunklen Fraunhofer-Linien oben!</div>
                </div>

                <div class="quiz-box">
                    <h4>Verständnis-Check</h4>
                    <p>Ein Stern zeigt <strong>keine</strong> Natrium-D-Linie (589 nm) im Absorptionsspektrum. Was bedeutet das?</p>
                    <div class="mc-option" data-correct="false" data-q="q7" onclick="checkMC(this)">Der Stern ist zu heiß für Natrium.</div>
                    <div class="mc-option" data-correct="true" data-q="q7" onclick="checkMC(this)">In der Sternatmosphäre befindet sich kein Natrium.</div>
                    <div class="mc-option" data-correct="false" data-q="q7" onclick="checkMC(this)">Natrium absorbiert kein Licht.</div>
                    <div class="feedback" id="fb-q7"></div>
                </div>
            </div>

            <div class="warning-box">
                <strong>Aufgabe 5:</strong> Bearbeite die Fraunhofer-Aufgabe auf dem Arbeitsblatt. Identifiziere die Elemente anhand der Absorptionslinien und zeichne den Na-Übergang ein (Aufg. 5c).
            </div>

            <div class="nav-container">
                <button class="btn-nav btn-back" onclick="prevStep()">&larr; Zurück</button>
                <button class="btn-nav" onclick="nextStep()">Weiter &rarr;</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════
             SCHRITT 6: GRENZEN DES BOHR-MODELLS (10 min)
        ═══════════════════════════════════════════════════════════ -->
        <div class="step" id="step6" data-phase="6">
            <div class="step-header">
                <div class="step-number">6</div>
                <div class="step-title">Grenzen des Bohr-Modells</div>
            </div>
            <div class="step-content">
                <p>Das Bohr-Modell ist ein <strong>Meilenstein</strong> der Physik. Aber es hat klare Grenzen.</p>

                <div class="success-box">
                    <strong>Was Bohr erklären kann:</strong>
                    <ul>
                        <li>Stabilität der Atome</li>
                        <li>Spektrallinien von Wasserstoff (und H-ähnlichen Ionen)</li>
                        <li>Ionisierungsenergie</li>
                        <li>Absorption und Emission von Photonen</li>
                    </ul>
                </div>

                <div class="danger-box">
                    <strong>Was Bohr NICHT erklären kann:</strong>
                    <ul>
                        <li><strong>Mehrelektronensysteme</strong> (He, Li, ...) &mdash; nur 1-Elektron-Systeme funktionieren</li>
                        <li><strong>Intensitäten</strong> der Spektrallinien (warum manche heller sind)</li>
                        <li><strong>Feinstruktur</strong> (Aufspaltung in eng benachbarte Linien)</li>
                        <li>Warum manche Übergänge häufiger vorkommen als andere (<strong>Auswahlregeln</strong>)</li>
                    </ul>
                </div>

                <div class="info-box">
                    <strong>Ausblick: Vom Bohr-Modell zum Orbitalmodell</strong>
                    <p style="margin-top: 8px;">Die moderne Quantenmechanik (Schrödinger, 1926) ersetzt die festen Bahnen durch <strong>Orbitale</strong> &mdash; dreidimensionale Aufenthaltswahrscheinlichkeiten. Das Elektron hat keinen festen Ort, sondern eine <strong>Wahrscheinlichkeitsverteilung</strong>.</p>
                    <p style="margin-top: 8px;">Für die Klausur gilt: Bohr ist ein <strong>Modell</strong> mit bekannten Grenzen, kein exaktes Abbild der Realität.</p>
                </div>

                <div class="quiz-box">
                    <h4>Verständnis-Check: Grenzen</h4>
                    <p>Warum kann das Bohr-Modell das Helium-Atom (He, nicht He<sup>+</sup>!) nicht korrekt beschreiben?</p>
                    <div class="mc-option" data-correct="false" data-q="q8" onclick="checkMC(this)">Helium hat zu viele Protonen.</div>
                    <div class="mc-option" data-correct="true" data-q="q8" onclick="checkMC(this)">Helium hat zwei Elektronen, die sich gegenseitig beeinflussen.</div>
                    <div class="mc-option" data-correct="false" data-q="q8" onclick="checkMC(this)">Helium ist ein Edelgas und reagiert nicht mit Licht.</div>
                    <div class="feedback" id="fb-q8"></div>
                </div>
            </div>

            <div class="warning-box">
                <strong>Aufgabe 6:</strong> Trage die Stärken und Grenzen des Bohr-Modells in die Tabelle auf deinem Arbeitsblatt ein.
            </div>

            <div class="nav-container">
                <button class="btn-nav btn-back" onclick="prevStep()">&larr; Zurück</button>
                <button class="btn-nav" onclick="nextStep()">Weiter &rarr;</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════
             SCHRITT 7: KLAUSUR-CHECKLISTE (5 min)
        ═══════════════════════════════════════════════════════════ -->
        <div class="step" id="step7" data-phase="7">
            <div class="step-header">
                <div class="step-number">7</div>
                <div class="step-title">Klausur-Checkliste: Alles Wichtige auf einen Blick</div>
            </div>
            <div class="step-content">
                <p>Die Klausur umfasst: <strong>Photoeffekt, de Broglie, Doppelspalt, Bohr, Spektralanalyse</strong>.</p>
                <p>Prüfe, ob du alles kannst:</p>

                <div class="info-box">
                    <strong>Formelsammlung (muss sitzen!):</strong>
                    <table class="data-table" style="margin-top: 8px; text-align: left;">
                        <tr><th style="width: 50%;">Formel</th><th>Bedeutung</th></tr>
                        <tr><td style="font-family: serif; font-style: italic;">E = h &middot; f</td><td>Photonenenergie</td></tr>
                        <tr><td style="font-family: serif; font-style: italic;">E<sub>kin</sub> = h &middot; f - W<sub>A</sub></td><td>Photogleichung (Einstein)</td></tr>
                        <tr><td style="font-family: serif; font-style: italic;">&lambda; = h / p</td><td>De-Broglie-Wellenlänge</td></tr>
                        <tr><td style="font-family: serif; font-style: italic;">E<sub>n</sub> = -13,6 eV &middot; Z<sup>2</sup> / n<sup>2</sup></td><td>Bohr-Energieniveaus</td></tr>
                        <tr><td style="font-family: serif; font-style: italic;">&Delta;E = |E<sub>n1</sub> - E<sub>n2</sub>| = h &middot; f</td><td>Photon bei Übergang</td></tr>
                        <tr><td style="font-family: serif; font-style: italic;">&lambda; = 1240 eV&middot;nm / &Delta;E</td><td>Schnellformel Wellenlänge</td></tr>
                        <tr><td style="font-family: serif; font-style: italic;">E<sub>ion</sub> = -E<sub>1</sub></td><td>Ionisierungsenergie</td></tr>
                    </table>
                </div>

                <div class="info-box">
                    <strong>Naturkonstanten (werden gegeben):</strong>
                    <p style="margin-top: 5px; font-family: serif;">
                        h = 6,63 &times; 10<sup>-34</sup> J&middot;s = 4,14 &times; 10<sup>-15</sup> eV&middot;s &nbsp;&nbsp;|&nbsp;&nbsp;
                        c = 3,00 &times; 10<sup>8</sup> m/s &nbsp;&nbsp;|&nbsp;&nbsp;
                        h&middot;c = 1240 eV&middot;nm
                    </p>
                </div>

                <p style="margin-top: 15px;"><strong>Selbstcheck:</strong></p>

                <ul class="checklist" id="checklist">
                    <li><input type="checkbox"> Ich kann die Photogleichung anwenden und U<sub>G</sub> berechnen.</li>
                    <li><input type="checkbox"> Ich kann die Steigung der Einsteinschen Geraden interpretieren.</li>
                    <li><input type="checkbox"> Ich kann die de-Broglie-Wellenlänge berechnen.</li>
                    <li><input type="checkbox"> Ich kann den Welle-Teilchen-Dualismus erklären.</li>
                    <li><input type="checkbox"> Ich kann die drei Bohr-Postulate formulieren.</li>
                    <li><input type="checkbox"> Ich kann Übergänge berechnen: &Delta;E &rarr; &lambda; &rarr; Farbe.</li>
                    <li><input type="checkbox"> Ich kann die Z-Erweiterung anwenden (He<sup>+</sup>, Li<sup>2+</sup>).</li>
                    <li><input type="checkbox"> Ich kann Fraunhofer-Linien erklären (Absorption).</li>
                    <li><input type="checkbox"> Ich kann die Ionisierungsenergie bestimmen.</li>
                    <li><input type="checkbox"> Ich kenne die Grenzen des Bohr-Modells.</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Selbstcheck auf dem AB:</strong> Übertrage deinen Check-Status auf das Arbeitsblatt. Bereite dich über die Ferien gezielt auf offene Punkte vor.
            </div>

            <div class="nav-container">
                <button class="btn-nav btn-back" onclick="prevStep()">&larr; Zurück</button>
                <button class="btn-nav btn-success" onclick="finish()">&#10003; Fertig</button>
            </div>
        </div>

        <!-- ABSCHLUSS -->
        <div class="step" id="stepEnd">
            <div class="step-header">
                <div class="step-number" style="background: var(--success);">&#10003;</div>
                <div class="step-title" style="color: var(--success);">Lernpfad abgeschlossen!</div>
            </div>
            <div class="step-content">
                <div class="success-box">
                    <strong>Zusammenfassung &mdash; Heute hast du gelernt:</strong>
                    <ul style="margin-top: 8px;">
                        <li>Was die Ionisierungsenergie ist (13,6 eV für H)</li>
                        <li>Den Rechenweg: Übergang &rarr; &Delta;E &rarr; &lambda; &rarr; Farbe</li>
                        <li>Die Z-Erweiterung für wasserstoff-ähnliche Ionen</li>
                        <li>Fraunhofer-Linien und Spektralanalyse</li>
                        <li>Die Grenzen des Bohr-Modells</li>
                    </ul>
                </div>
                <div class="info-box" style="margin-top: 15px;">
                    <strong>Klausurvorbereitung:</strong>
                    <p style="margin-top: 5px;">Nutze die Winterferien, um alle Formeln und Rechentypen zu üben. Schau dir die Checkliste oben nochmal an und arbeite gezielt an offenen Punkten.</p>
                    <p style="margin-top: 5px;"><strong>Klausur:</strong> Fr 27.02.2026 | 60 BE | 90 min</p>
                </div>
            </div>
            <div class="nav-container">
                <button class="btn-nav btn-back" onclick="prevStep()">&larr; Zurück</button>
            </div>
        </div>
    </div>

<script>
// ===============================================================
// LERNPFAD: BOHR-VERTIEFUNG (DS7, 80 min) - ES5
// Navigation, Diagnostik, Persistenz
// ===============================================================

(function() {
    'use strict';

    var LP_ID = 'lp-07-bohr-vertiefung';
    var currentStep = 1;
    var totalSteps = 7;

    var steps = document.querySelectorAll('.step');
    var progressFill = document.getElementById('progressFill');
    var phaseBar = document.getElementById('phaseBar');
    var phaseItems = phaseBar.querySelectorAll('.phase-item');

    // ─── Persistenz ───
    function save() {
        try {
            localStorage.setItem(LP_ID + '-step', currentStep);
            // Inputs speichern (number + text)
            var inputs = document.querySelectorAll('.fill-blank');
            inputs.forEach(function(inp) {
                if (inp.id) localStorage.setItem(LP_ID + '-' + inp.id, inp.value);
            });
            // Checkboxen speichern
            var cbs = document.querySelectorAll('.checklist input[type="checkbox"]');
            var cbState = [];
            cbs.forEach(function(cb) { cbState.push(cb.checked); });
            localStorage.setItem(LP_ID + '-checklist', JSON.stringify(cbState));
            // MC-Quiz-State speichern
            var mcState = {};
            document.querySelectorAll('.mc-option').forEach(function(opt) {
                var q = opt.dataset.q;
                if (!q) return;
                if (!mcState[q]) mcState[q] = { answered: false, options: [] };
                var state = {
                    correct: opt.classList.contains('correct'),
                    incorrect: opt.classList.contains('incorrect'),
                    disabled: opt.classList.contains('disabled')
                };
                mcState[q].options.push(state);
                if (state.disabled) mcState[q].answered = true;
            });
            // Feedback-Divs speichern
            var fbState = {};
            document.querySelectorAll('.feedback').forEach(function(fb) {
                if (fb.id && fb.classList.contains('show')) {
                    fbState[fb.id] = fb.innerHTML;
                }
            });
            localStorage.setItem(LP_ID + '-mc', JSON.stringify(mcState));
            localStorage.setItem(LP_ID + '-fb', JSON.stringify(fbState));
            // Fill-blank Input-Klassen speichern (correct/incorrect)
            var inputClasses = {};
            document.querySelectorAll('.fill-blank').forEach(function(inp) {
                if (inp.id) {
                    var cls = [];
                    if (inp.classList.contains('correct')) cls.push('correct');
                    if (inp.classList.contains('incorrect')) cls.push('incorrect');
                    if (cls.length > 0) inputClasses[inp.id] = cls;
                }
            });
            localStorage.setItem(LP_ID + '-inputcls', JSON.stringify(inputClasses));
        } catch(e) {}
    }

    function load() {
        try {
            var s = localStorage.getItem(LP_ID + '-step');
            if (s) currentStep = parseInt(s);
            // Inputs (number + text)
            var inputs = document.querySelectorAll('.fill-blank');
            inputs.forEach(function(inp) {
                if (inp.id) {
                    var v = localStorage.getItem(LP_ID + '-' + inp.id);
                    if (v) inp.value = v;
                }
            });
            // Checkboxen
            var cbData = localStorage.getItem(LP_ID + '-checklist');
            if (cbData) {
                var arr = JSON.parse(cbData);
                var cbs = document.querySelectorAll('.checklist input[type="checkbox"]');
                cbs.forEach(function(cb, i) { if (arr[i] !== undefined) cb.checked = arr[i]; });
            }
            // MC-Quiz-State laden
            var mcData = localStorage.getItem(LP_ID + '-mc');
            if (mcData) {
                var mcState = JSON.parse(mcData);
                Object.keys(mcState).forEach(function(q) {
                    if (!mcState[q].answered) return;
                    var opts = document.querySelectorAll('.mc-option[data-q="' + q + '"]');
                    var states = mcState[q].options;
                    opts.forEach(function(opt, i) {
                        if (states[i]) {
                            if (states[i].correct) opt.classList.add('correct');
                            if (states[i].incorrect) opt.classList.add('incorrect');
                            if (states[i].disabled) opt.classList.add('disabled');
                        }
                    });
                });
            }
            // Feedback laden
            var fbData = localStorage.getItem(LP_ID + '-fb');
            if (fbData) {
                var fbState = JSON.parse(fbData);
                Object.keys(fbState).forEach(function(id) {
                    var fb = document.getElementById(id);
                    if (fb) {
                        fb.innerHTML = fbState[id];
                        fb.classList.add('show');
                    }
                });
            }
            // Fill-blank Input-Klassen laden
            var inputClsData = localStorage.getItem(LP_ID + '-inputcls');
            if (inputClsData) {
                var inputClasses = JSON.parse(inputClsData);
                Object.keys(inputClasses).forEach(function(id) {
                    var el = document.getElementById(id);
                    if (el) {
                        inputClasses[id].forEach(function(cls) { el.classList.add(cls); });
                    }
                });
            }
        } catch(e) {}
        showStep(currentStep);
    }

    // ─── Navigation ───
    function updatePhaseBar() {
        var activePhase = currentStep <= totalSteps ? currentStep : totalSteps;
        phaseItems.forEach(function(item, index) {
            item.classList.remove('active', 'done');
            var p = parseInt(item.dataset.phase);
            if (p < activePhase) item.classList.add('done');
            else if (p === activePhase) item.classList.add('active');
        });
    }

    function showStep(n) {
        steps.forEach(function(s) { s.classList.remove('active'); });
        var targetId = n > totalSteps ? 'stepEnd' : 'step' + n;
        var target = document.getElementById(targetId);
        if (target) target.classList.add('active');
        var pct = Math.min((n / totalSteps) * 100, 100);
        progressFill.style.width = pct + '%';
        updatePhaseBar();
        save();
        window.scrollTo(0, 0);
    }

    window.nextStep = function() {
        if (currentStep <= totalSteps) {
            currentStep++;
            showStep(currentStep);
        }
    };

    window.prevStep = function() {
        if (currentStep > 1) {
            currentStep--;
            showStep(currentStep);
        } else if (currentStep > totalSteps) {
            currentStep = totalSteps;
            showStep(currentStep);
        }
    };

    window.finish = function() {
        currentStep = totalSteps + 1;
        showStep(currentStep);
    };

    // Phase-Leiste klickbar
    phaseItems.forEach(function(item) {
        item.addEventListener('click', function() {
            var p = parseInt(item.dataset.phase);
            if (p >= 1 && p <= totalSteps) {
                currentStep = p;
                showStep(currentStep);
            }
        });
    });

    // ─── MC-Quiz ───
    window.checkMC = function(el) {
        var q = el.dataset.q;
        var isCorrect = el.dataset.correct === 'true';
        var siblings = el.parentNode.querySelectorAll('.mc-option[data-q="' + q + '"]');
        var fb = document.getElementById('fb-' + q);

        siblings.forEach(function(s) {
            s.classList.add('disabled');
            if (s.dataset.correct === 'true') s.classList.add('correct');
        });

        if (!isCorrect) {
            el.classList.add('incorrect');
            if (fb) { fb.innerHTML = '<span style="color: #c62828;">Nicht ganz. Die richtige Antwort ist grün markiert.</span>'; fb.classList.add('show'); }
        } else {
            if (fb) { fb.innerHTML = '<span style="color: #2a7a4b;">Richtig!</span>'; fb.classList.add('show'); }
        }
        save();
    };

    // ─── Postulate-Check ───
    window.checkPostulate = function() {
        var answers = {
            'post-1': ['strahlen'],
            'post-2': ['erlaubt'],
            'post-3': ['n'],
            'post-4': ['photon', 'lichtquant'],
            'post-5': ['energiedifferenz', 'differenz', 'energie-differenz']
        };
        var correct = 0;
        var total = 5;
        var ids = ['post-1', 'post-2', 'post-3', 'post-4', 'post-5'];
        ids.forEach(function(id) {
            var el = document.getElementById(id);
            if (!el) return;
            var val = el.value.trim().toLowerCase().replace(/\s+/g, '');
            el.classList.remove('correct', 'incorrect');
            if (!val) return;
            var ok = answers[id].some(function(a) { return val === a.toLowerCase().replace(/\s+/g, ''); });
            el.classList.add(ok ? 'correct' : 'incorrect');
            if (ok) correct++;
        });
        var fb = document.getElementById('fb-postulate');
        if (correct === total) {
            fb.innerHTML = '<span style="color: #2a7a4b;">Alle richtig! Du kannst die drei Postulate formulieren.</span>';
        } else {
            fb.innerHTML = '<span style="color: #c62828;">' + correct + ' von ' + total + ' richtig. Tipp: Schaue in deinem Hefter oder in LP-06 nach.</span>';
        }
        fb.classList.add('show');
        save();
    };

    // ─── Berechnungs-Checks ───
    window.checkCalc1 = function() {
        var de = parseFloat(document.getElementById('calc1-de').value);
        var lam = parseFloat(document.getElementById('calc1-lambda').value);
        var fb = document.getElementById('fb-calc1');
        var deEl = document.getElementById('calc1-de');
        var lamEl = document.getElementById('calc1-lambda');
        var msgs = [];
        deEl.classList.remove('correct', 'incorrect');
        lamEl.classList.remove('correct', 'incorrect');
        // dE = |−0.544 − (−3.40)| = 2.856 eV
        if (de && Math.abs(de - 2.86) < 0.1) {
            deEl.classList.add('correct');
            msgs.push('Delta-E: Richtig!');
        } else if (de) {
            deEl.classList.add('incorrect');
            msgs.push('Delta-E: Prüfe nochmal. E5 = -0,544 eV, E2 = -3,40 eV.');
        }
        // lambda = 1240/2.856 = 434 nm
        if (lam && Math.abs(lam - 434) < 10) {
            lamEl.classList.add('correct');
            msgs.push('Wellenlänge: Richtig! (' + lam + ' nm)');
        } else if (lam) {
            lamEl.classList.add('incorrect');
            msgs.push('Wellenlänge: Prüfe nochmal. lambda = 1240 / Delta-E.');
        }
        if (msgs.length > 0) { fb.innerHTML = msgs.join('<br>'); fb.classList.add('show'); }
    };

    window.checkCalc2 = function() {
        var de = parseFloat(document.getElementById('calc2-de').value);
        var lam = parseFloat(document.getElementById('calc2-lambda').value);
        var fb = document.getElementById('fb-calc2');
        var deEl = document.getElementById('calc2-de');
        var lamEl = document.getElementById('calc2-lambda');
        var msgs = [];
        deEl.classList.remove('correct', 'incorrect');
        lamEl.classList.remove('correct', 'incorrect');
        // dE = |-3.40 - (-6.04)| = 2.64 eV
        if (de && Math.abs(de - 2.64) < 0.1) {
            deEl.classList.add('correct');
            msgs.push('Delta-E: Richtig!');
        } else if (de) {
            deEl.classList.add('incorrect');
            msgs.push('Delta-E: Prüfe nochmal. E4 = -3,40 eV, E3 = -6,04 eV.');
        }
        // lambda = 1240/2.64 = 470 nm
        if (lam && Math.abs(lam - 470) < 15) {
            lamEl.classList.add('correct');
            msgs.push('Wellenlänge: Richtig! (' + lam + ' nm) - sichtbar, blau/violett!');
        } else if (lam) {
            lamEl.classList.add('incorrect');
            msgs.push('Wellenlänge: Prüfe nochmal.');
        }
        if (msgs.length > 0) { fb.innerHTML = msgs.join('<br>'); fb.classList.add('show'); }
    };

    // ─── Fraunhofer-Linien zeichnen ───
    function drawFraunhofer() {
        var spectrum = document.getElementById('solarSpectrum');
        if (!spectrum) return;
        var lines = [
            { name: 'K', lambda: 393, element: 'Ca+' },
            { name: 'H', lambda: 397, element: 'Ca+' },
            { name: 'G', lambda: 431, element: 'Fe' },
            { name: 'F', lambda: 486, element: 'H' },
            { name: 'b', lambda: 517, element: 'Mg' },
            { name: 'D', lambda: 589, element: 'Na' },
            { name: 'C', lambda: 656, element: 'H' }
        ];

        lines.forEach(function(line) {
            var pct = ((line.lambda - 380) / (700 - 380)) * 100;
            var el = document.createElement('div');
            el.className = 'fraunhofer-line';
            el.style.left = pct + '%';
            el.title = line.name + ' (' + line.lambda + ' nm, ' + line.element + ')';

            var label = document.createElement('div');
            label.className = 'fraunhofer-label';
            label.style.left = pct + '%';
            label.textContent = line.name;

            spectrum.appendChild(el);
            spectrum.parentNode.appendChild(label);
        });
    }

    // ─── Inputs live speichern ───
    document.querySelectorAll('input').forEach(function(inp) {
        inp.addEventListener('change', save);
        inp.addEventListener('input', save);
    });

    // ─── Init ───
    drawFraunhofer();
    load();
})();
</script>
</body>
</html>
