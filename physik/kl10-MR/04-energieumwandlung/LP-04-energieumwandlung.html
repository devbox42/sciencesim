<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energieumwandlung & Erhaltungssatz | Physik 10 MR</title>
    <style>
        :root {
            --physik: #2c5aa0;
            --physik-light: #e8f0fa;
            --success: #2a7a4b;
            --success-bg: #e8f5e9;
            --warning: #b35c00;
            --warning-bg: #fff3e0;
            --error: #c62828;
            --error-bg: #ffebee;
            --bg: #f5f5f5;
            --white: #ffffff;
            --border: #dddddd;
            --text: #222222;
            --text-muted: #555555;
            --Epot: #2c5aa0;
            --Ekin: #c62828;
            --Etherm: #888888;
            --bne: #2a7a4b;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            font-size: 16px;
            line-height: 1.5;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        h1 {
            font-size: 1.4em;
            font-weight: 600;
            color: var(--physik);
            margin-bottom: 5px;
        }
        h2 {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--physik);
            margin: 25px 0 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid var(--physik);
        }
        h3 { font-size: 1em; font-weight: 600; margin: 15px 0 8px; }
        .meta { color: var(--text-muted); font-size: 0.85em; margin-bottom: 20px; }
        .section {
            background: var(--white);
            border: 1px solid var(--border);
            padding: 20px;
            margin-bottom: 15px;
        }
        .info-box {
            background: var(--physik-light);
            border-left: 4px solid var(--physik);
            padding: 12px 15px;
            margin: 15px 0;
            font-size: 0.95em;
        }
        .merksatz {
            background: var(--physik-light);
            border: 2px solid var(--physik);
            padding: 15px;
            margin: 15px 0;
            font-weight: 500;
        }
        .hefter-hinweis {
            background: var(--warning-bg);
            border: 2px solid var(--warning);
            padding: 12px 15px;
            margin: 20px 0;
            font-size: 0.9em;
        }
        .hefter-hinweis::before {
            content: "üìì Arbeitsblatt";
            display: inline-block;
            background: var(--warning);
            color: white;
            font-size: 0.75em;
            font-weight: 600;
            padding: 2px 8px;
            margin-bottom: 8px;
        }
        .sim-container {
            background: var(--white);
            border: 2px solid var(--physik);
            margin: 20px 0;
        }
        .sim-header {
            background: var(--physik);
            color: white;
            padding: 10px 15px;
            font-weight: 600;
            font-size: 0.95em;
        }
        .sim-body { padding: 15px; }
        canvas {
            display: block;
            margin: 0 auto;
            background: #fafafa;
            border: 1px solid var(--border);
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            padding: 10px;
            background: #f9f9f9;
            border: 1px solid var(--border);
        }
        .control-group { display: flex; align-items: center; gap: 8px; }
        .control-group label { font-size: 0.85em; font-weight: 500; }
        input[type="range"] { width: 120px; }
        button {
            background: var(--physik);
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 0.9em;
            cursor: pointer;
        }
        button:hover { opacity: 0.9; }
        button.secondary {
            background: var(--text-muted);
        }
        .toggle-btn {
            padding: 6px 12px;
            font-size: 0.85em;
        }
        .toggle-btn.active {
            background: var(--success);
        }
        .energy-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }
        .energy-bar .label {
            width: 60px;
            font-size: 0.85em;
            font-weight: 500;
        }
        .energy-bar .bar {
            flex: 1;
            height: 20px;
            background: #eee;
            position: relative;
        }
        .energy-bar .fill {
            height: 100%;
            transition: width 0.1s;
        }
        .energy-bar .value {
            width: 50px;
            text-align: right;
            font-size: 0.85em;
            font-family: monospace;
        }
        .quiz-box {
            background: var(--white);
            border: 1px solid var(--border);
            padding: 15px;
            margin: 15px 0;
        }
        .quiz-question {
            font-weight: 500;
            margin-bottom: 10px;
        }
        .quiz-options { display: flex; flex-direction: column; gap: 8px; }
        .quiz-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            background: #f9f9f9;
            border: 1px solid var(--border);
            cursor: pointer;
        }
        .quiz-option:hover { background: #f0f0f0; }
        .quiz-option.correct { background: var(--success-bg); border-color: var(--success); }
        .quiz-option.incorrect { background: var(--error-bg); border-color: var(--error); }
        .feedback {
            padding: 10px 15px;
            margin-top: 10px;
            font-size: 0.9em;
            display: none;
        }
        .feedback.success { display: block; background: var(--success-bg); color: var(--success); }
        .feedback.error { display: block; background: var(--error-bg); color: var(--error); }
        .fill-blank {
            border: none;
            border-bottom: 2px solid var(--physik);
            padding: 2px 5px;
            width: 100px;
            font-size: inherit;
            background: transparent;
            text-align: center;
        }
        .fill-blank.correct { border-color: var(--success); background: var(--success-bg); }
        .fill-blank.incorrect { border-color: var(--error); background: var(--error-bg); }
        .inline-select {
            padding: 4px 8px;
            font-size: 0.95em;
            border: 2px solid var(--physik);
            background: white;
            cursor: pointer;
        }
        .inline-select.correct { border-color: var(--success); background: var(--success-bg); }
        .inline-select.incorrect { border-color: var(--error); background: var(--error-bg); }
        .bne-box {
            background: #e8f5e9;
            border-left: 4px solid var(--bne);
            padding: 12px 15px;
            margin: 15px 0;
        }
        .bne-box::before {
            content: "üå± BNE";
            display: inline-block;
            background: var(--bne);
            color: white;
            font-size: 0.7em;
            font-weight: 600;
            padding: 2px 6px;
            margin-right: 8px;
        }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #ddd;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 100%;
            background: var(--physik);
            transition: width 0.3s;
        }
        .step { display: none; }
        .step.active { display: block; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9em;
        }
        th, td {
            border: 1px solid var(--border);
            padding: 8px 12px;
            text-align: left;
        }
        th { background: var(--physik-light); }
        .drag-item {
            display: inline-block;
            padding: 8px 15px;
            margin: 5px;
            background: var(--physik-light);
            border: 2px solid var(--physik);
            cursor: move;
            font-size: 0.9em;
        }
        .drop-zone {
            min-width: 100px;
            min-height: 40px;
            border: 2px dashed var(--border);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 5px;
            padding: 5px;
            background: #fafafa;
        }
        .drop-zone.over { border-color: var(--physik); background: var(--physik-light); }
        .drop-zone.filled { border-style: solid; border-color: var(--success); }

        /* Step Indicators */
        .step-indicators {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }
        .step-indicator {
            width: 32px;
            height: 32px;
            border: 2px solid var(--border);
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        .step-indicator:hover { border-color: var(--physik); }
        .step-indicator.current {
            border-color: var(--physik);
            border-width: 3px;
            background: var(--physik-light);
            color: var(--physik);
            font-weight: 600;
        }
        .step-indicator.completed {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Energieumwandlung & Erhaltungssatz</h1>
        <p class="meta">Physik Klasse 10 MR | Stunde 04</p>

        <div class="progress-bar">
            <div class="progress-fill" id="progress" style="width: 0%"></div>
        </div>

        <div class="step-indicators" id="stepIndicators"></div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 1: EINSTIEG -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step active" id="step1">
            <div class="section">
                <h2>Warum stoppt das Pendel?</h2>

                <p>Stell dir vor: Du st√∂√üt ein Pendel an. Es schwingt hin und her ‚Äì aber nach einer Weile wird es immer langsamer und bleibt stehen.</p>

                <div class="info-box">
                    <strong>Kernfrage:</strong> Wo bleibt die Energie? Das Pendel hatte doch am Anfang Energie ‚Äì ist sie einfach verschwunden?
                </div>

                <p>In dieser Stunde lernst du:</p>
                <ul>
                    <li>Wie Energie von einer Form in eine andere <strong>umgewandelt</strong> wird</li>
                    <li>Warum Energie niemals verloren geht (<strong>Energieerhaltungssatz</strong>)</li>
                    <li>Wie man Energieumwandlungen mit <strong>Flussdiagrammen</strong> darstellt</li>
                    <li>Wie wir in M-V <strong>Energie gewinnen</strong> k√∂nnen</li>
                </ul>
            </div>

            <div class="nav-buttons">
                <span></span>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 2: ENERGIEFORMEN -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step2">
            <div class="section">
                <h2>Energieformen (Wiederholung)</h2>

                <p>Energie kann in verschiedenen Formen auftreten:</p>

                <table>
                    <tr>
                        <th>Energieform</th>
                        <th>Symbol</th>
                        <th>Beispiel</th>
                    </tr>
                    <tr>
                        <td><strong style="color: var(--Epot)">Lageenergie</strong></td>
                        <td>E<sub>pot</sub></td>
                        <td>Buch auf dem Regal, Wasser im Stausee</td>
                    </tr>
                    <tr>
                        <td><strong style="color: var(--Ekin)">Bewegungsenergie</strong></td>
                        <td>E<sub>kin</sub></td>
                        <td>Fahrendes Auto, fliegender Ball</td>
                    </tr>
                    <tr>
                        <td><strong style="color: var(--Etherm)">Thermische Energie</strong></td>
                        <td>E<sub>therm</sub></td>
                        <td>Warmes Wasser, hei√üe Bremsscheibe</td>
                    </tr>
                    <tr>
                        <td><strong>Elektrische Energie</strong></td>
                        <td>E<sub>el</sub></td>
                        <td>Strom aus der Steckdose, Batterie</td>
                    </tr>
                    <tr>
                        <td><strong>Chemische Energie</strong></td>
                        <td>E<sub>chem</sub></td>
                        <td>Benzin, Nahrung, Batterie</td>
                    </tr>
                </table>

                <div class="quiz-box">
                    <p class="quiz-question">Welche Energieform hat ein Stein, der auf einem Berg liegt?</p>
                    <div class="quiz-options" id="quiz1">
                        <div class="quiz-option" onclick="checkQuiz('quiz1', this, false)">E<sub>kin</sub> (Bewegungsenergie)</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz1', this, true)">E<sub>pot</sub> (Lageenergie)</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz1', this, false)">E<sub>therm</sub> (Thermische Energie)</div>
                    </div>
                    <div class="feedback" id="quiz1-feedback"></div>
                </div>

                <div class="hefter-hinweis">
                    <strong>Kasten 1 ausf√ºllen:</strong> √úbertrage die 5 Energieformen mit ihrer Beschreibung in deinen Hefter.
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 3: HYPOTHESE PENDEL -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step3">
            <div class="section">
                <h2>Hypothese: Fadenpendel</h2>

                <p>Beobachte das schwingende Pendel. Es bewegt sich zwischen drei Positionen:</p>
                <ul>
                    <li><strong>L</strong> = links (ausgelenkt)</li>
                    <li><strong>M</strong> = Mitte (tiefster Punkt)</li>
                    <li><strong>R</strong> = rechts (ausgelenkt)</li>
                </ul>

                <div class="sim-container">
                    <div class="sim-header">üî¨ Fadenpendel</div>
                    <div class="sim-body">
                        <canvas id="pendelCanvasSimple" width="500" height="280"></canvas>
                    </div>
                </div>

                <div class="info-box" style="background: #fff3e0; border-color: #b35c00;">
                    <strong>üîÆ Deine Hypothese:</strong> √úberlege, bevor du auf ‚ÄûWeiter" klickst:
                    <ul style="margin: 8px 0 0 20px;">
                        <li>Wann ist die <strong>Lageenergie E<sub>pot</sub></strong> am gr√∂√üten? (L, M oder R?)</li>
                        <li>Wann ist die <strong>Bewegungsenergie E<sub>kin</sub></strong> am gr√∂√üten?</li>
                        <li>Was passiert mit der <strong>Gesamtenergie E<sub>ges</sub></strong>?</li>
                    </ul>
                </div>

                <div class="quiz-box">
                    <p class="quiz-question">Deine Vermutung: An welcher Position ist E<sub>pot</sub> (Lageenergie) am gr√∂√üten?</p>
                    <div class="quiz-options" id="quizHypo1">
                        <div class="quiz-option" onclick="checkHypothese('quizHypo1', this)">Bei L und R (links/rechts oben)</div>
                        <div class="quiz-option" onclick="checkHypothese('quizHypo1', this)">Bei M (Mitte unten)</div>
                        <div class="quiz-option" onclick="checkHypothese('quizHypo1', this)">√úberall gleich</div>
                    </div>
                    <div class="feedback" id="quizHypo1-feedback"></div>
                </div>

                <div class="quiz-box">
                    <p class="quiz-question">Deine Vermutung: An welcher Position ist E<sub>kin</sub> (Bewegungsenergie) am gr√∂√üten?</p>
                    <div class="quiz-options" id="quizHypo2">
                        <div class="quiz-option" onclick="checkHypothese('quizHypo2', this)">Bei L und R (links/rechts oben)</div>
                        <div class="quiz-option" onclick="checkHypothese('quizHypo2', this)">Bei M (Mitte unten)</div>
                        <div class="quiz-option" onclick="checkHypothese('quizHypo2', this)">√úberall gleich</div>
                    </div>
                    <div class="feedback" id="quizHypo2-feedback"></div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí (zur Simulation mit Energiebalken)</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 4: SIMULATION PENDEL (MIT ENERGIEBALKEN) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step4">
            <div class="section">
                <h2>Simulation: Energiebalken</h2>

                <p><strong>Beobachte</strong> jetzt, wie sich die Energie beim Pendeln ver√§ndert:</p>

                <div class="sim-container">
                    <div class="sim-header">üî¨ Fadenpendel-Simulation</div>
                    <div class="sim-body">
                        <canvas id="pendelCanvas" width="500" height="300"></canvas>

                        <div style="margin-top: 15px;">
                            <div class="energy-bar">
                                <span class="label" style="color: var(--Epot)">E<sub>pot</sub></span>
                                <div class="bar"><div class="fill" id="epotBar" style="background: var(--Epot); width: 100%"></div></div>
                                <span class="value" id="epotValue">100 J</span>
                            </div>
                            <div class="energy-bar">
                                <span class="label" style="color: var(--Ekin)">E<sub>kin</sub></span>
                                <div class="bar"><div class="fill" id="ekinBar" style="background: var(--Ekin); width: 0%"></div></div>
                                <span class="value" id="ekinValue">0 J</span>
                            </div>
                            <div class="energy-bar" id="ethermRow" style="display: none;">
                                <span class="label" style="color: var(--Etherm)">E<sub>therm</sub></span>
                                <div class="bar"><div class="fill" id="ethermBar" style="background: var(--Etherm); width: 0%"></div></div>
                                <span class="value" id="ethermValue">0 J</span>
                            </div>
                            <div class="energy-bar">
                                <span class="label"><strong>E<sub>ges</sub></strong></span>
                                <div class="bar"><div class="fill" id="egesBar" style="background: #333; width: 100%"></div></div>
                                <span class="value" id="egesValue">100 J</span>
                            </div>
                        </div>

                        <div class="controls">
                            <div class="control-group">
                                <label>Starth√∂he:</label>
                                <input type="range" id="heightSlider" min="20" max="80" value="60">
                                <span id="heightValue">60%</span>
                            </div>
                            <div class="control-group">
                                <button class="toggle-btn active" id="idealBtn" onclick="setMode('ideal')">Ideal</button>
                                <button class="toggle-btn" id="realBtn" onclick="setMode('real')">Real (mit Reibung)</button>
                            </div>
                            <button onclick="resetPendel()">‚ü≤ Neustart</button>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>üëÅÔ∏è Beobachtung (ideal):</strong> Die Summe E<sub>pot</sub> + E<sub>kin</sub> bleibt immer gleich! Am h√∂chsten Punkt (L oder R) ist alles E<sub>pot</sub>, am tiefsten Punkt (M) alles E<sub>kin</sub>.
                </div>

                <div class="info-box" style="background: var(--success-bg); border-color: var(--success);">
                    <strong>‚úì Verifizierung:</strong> Stimmte deine Hypothese?
                    <ul style="margin: 8px 0 0 20px;">
                        <li>E<sub>pot</sub> ist maximal bei <strong>L</strong> und <strong>R</strong> (h√∂chste Position)</li>
                        <li>E<sub>kin</sub> ist maximal bei <strong>M</strong> (schnellste Bewegung)</li>
                        <li>E<sub>ges</sub> bleibt <strong>konstant</strong> (Energieerhaltung!)</li>
                    </ul>
                </div>

                <div class="quiz-box">
                    <p class="quiz-question">Im tiefsten Punkt des Pendels ist...</p>
                    <div class="quiz-options" id="quiz2">
                        <div class="quiz-option" onclick="checkQuiz('quiz2', this, false)">E<sub>pot</sub> maximal, E<sub>kin</sub> = 0</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz2', this, true)">E<sub>kin</sub> maximal, E<sub>pot</sub> = 0</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz2', this, false)">Beide gleich gro√ü</div>
                    </div>
                    <div class="feedback" id="quiz2-feedback"></div>
                </div>

                <div class="hefter-hinweis">
                    <strong>Aufgabe 2 bearbeiten:</strong>
                    <ul>
                        <li><strong>a)</strong> Berechne die Lageenergie E<sub>pot</sub> des Pendels</li>
                        <li><strong>b)</strong> Bestimme die Bewegungsenergie E<sub>kin</sub> im tiefsten Punkt</li>
                    </ul>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 5: REALES PENDEL -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step5">
            <div class="section">
                <h2>Reales Pendel: Was passiert mit der Energie?</h2>

                <p>Klicke oben auf <strong>‚ÄûReal (mit Reibung)"</strong> und beobachte!</p>

                <div class="merksatz">
                    <strong>Erkenntnis:</strong> In der Realit√§t wird ein Teil der Energie durch <strong>Reibung</strong> in <strong>thermische Energie</strong> (W√§rme) umgewandelt. Deshalb schwingt das Pendel immer niedriger und kommt zur Ruhe.
                </div>

                <p>Aber: Die <strong>Gesamtenergie</strong> bleibt konstant! Sie ‚Äûverschwindet" nicht ‚Äì sie wird nur in W√§rme umgewandelt, die wir nicht mehr nutzen k√∂nnen.</p>

                <div class="quiz-box">
                    <p class="quiz-question">Warum stoppt das Pendel in der Realit√§t?</p>
                    <div class="quiz-options" id="quiz3">
                        <div class="quiz-option" onclick="checkQuiz('quiz3', this, false)">Die Energie verschwindet einfach</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz3', this, true)">Energie wird durch Reibung in W√§rme umgewandelt</div>
                        <div class="quiz-option" onclick="checkQuiz('quiz3', this, false)">Die Erdanziehung wird schw√§cher</div>
                    </div>
                    <div class="feedback" id="quiz3-feedback"></div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 6: ENERGIEERHALTUNGSSATZ -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step6">
            <div class="section">
                <h2>Der Energieerhaltungssatz</h2>

                <div class="merksatz">
                    <strong>Energieerhaltungssatz:</strong><br>
                    Energie kann nicht erzeugt oder vernichtet werden.<br>
                    Sie wird nur von einer Form in eine andere <strong>umgewandelt</strong>.<br><br>
                    <div style="text-align: center; font-size: 1.2em; margin-top: 10px;">
                        E<sub>ges</sub> = E<sub>1</sub> + E<sub>2</sub> + E<sub>3</sub> + ... = <strong>konstant</strong>
                    </div>
                </div>

                <div class="info-box">
                    <strong>G√ºltigkeitsbedingung:</strong> Der Satz gilt nur in einem <strong>geschlossenen System</strong> ‚Äì das hei√üt, es flie√üt keine Energie von au√üen hinein oder nach au√üen ab.
                </div>

                <div class="info-box" style="background: #f5f5f5; border-color: #888;">
                    <strong>üì¶ Beispiel ‚Äûgeschlossenes System":</strong><br>
                    Eine Thermoskanne mit hei√üem Tee ist (fast) ein geschlossenes System: Die W√§rme bleibt drin, keine Energie flie√üt rein oder raus.<br><br>
                    <strong>Kein geschlossenes System:</strong> Ein Topf auf dem Herd ‚Äì hier flie√üt st√§ndig W√§rme von der Flamme hinein!
                </div>

                <h3>Erg√§nze den L√ºckentext:</h3>
                <p>
                    Beim Fadenpendel wird am h√∂chsten Punkt die
                    <select id="luecke1" class="inline-select">
                        <option value="">‚Äì w√§hlen ‚Äì</option>
                        <option value="epot">Lageenergie (E‚Çö‚Çí‚Çú)</option>
                        <option value="ekin">Bewegungsenergie (E‚Çñ·µ¢‚Çô)</option>
                        <option value="etherm">Thermische Energie (E‚Çú‚Çï‚Çë·µ£‚Çò)</option>
                        <option value="eel">Elektrische Energie (E‚Çë‚Çó)</option>
                        <option value="echem">Chemische Energie (E·¥Ñ‚Çï‚Çë‚Çò)</option>
                        <option value="schwerkraft">Schwerkraft</option>
                        <option value="geschwindigkeit">Geschwindigkeit</option>
                    </select>
                    in
                    <select id="luecke2" class="inline-select">
                        <option value="">‚Äì w√§hlen ‚Äì</option>
                        <option value="epot">Lageenergie (E‚Çö‚Çí‚Çú)</option>
                        <option value="ekin">Bewegungsenergie (E‚Çñ·µ¢‚Çô)</option>
                        <option value="etherm">Thermische Energie (E‚Çú‚Çï‚Çë·µ£‚Çò)</option>
                        <option value="eel">Elektrische Energie (E‚Çë‚Çó)</option>
                        <option value="echem">Chemische Energie (E·¥Ñ‚Çï‚Çë‚Çò)</option>
                        <option value="schwerkraft">Schwerkraft</option>
                        <option value="geschwindigkeit">Geschwindigkeit</option>
                    </select>
                    umgewandelt. In der Realit√§t geht ein Teil durch
                    <select id="luecke3" class="inline-select">
                        <option value="">‚Äì w√§hlen ‚Äì</option>
                        <option value="reibung">Reibung</option>
                        <option value="schwerkraft">Schwerkraft</option>
                        <option value="magnetismus">Magnetismus</option>
                        <option value="strahlung">Strahlung</option>
                        <option value="druck">Druck</option>
                        <option value="spannung">Spannung</option>
                        <option value="stromstaerke">Stromst√§rke</option>
                    </select>
                    als W√§rme verloren.
                </p>
                <button onclick="checkLuecken()" style="margin-top: 10px;">√úberpr√ºfen</button>
                <div class="feedback" id="luecken-feedback"></div>

                <div class="hefter-hinweis">
                    <strong>Kasten 2 ausf√ºllen:</strong> √úbertrage den Energieerhaltungssatz und die G√ºltigkeitsbedingung.
                    <br><br>
                    <strong>Aufgabe 3 bearbeiten:</strong>
                    <ul>
                        <li><strong>a)</strong> Berechne die Geschwindigkeit v im tiefsten Punkt</li>
                        <li><strong>b)</strong> R√ºckw√§rts-Aufgabe: Berechne die Starth√∂he h</li>
                    </ul>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 7: ENERGIEFLUSSDIAGRAMME -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step7">
            <div class="section">
                <h2>Energieflussdiagramme</h2>

                <p>Ein <strong>Energieflussdiagramm</strong> zeigt, welche Energieformen in welche umgewandelt werden.</p>

                <h3>Beispiel: Ball f√§llt (ideal)</h3>
                <div style="text-align: center; margin: 20px 0;">
                    <span class="drag-item" style="background: #bbdefb; cursor: default;">E<sub>pot</sub></span>
                    <span style="font-size: 1.5em; margin: 0 15px;">‚Üí</span>
                    <span class="drag-item" style="background: #ffcdd2; cursor: default;">E<sub>kin</sub></span>
                </div>

                <h3>Beispiel: Auto bremst (real)</h3>
                <div style="text-align: center; margin: 20px 0;">
                    <span class="drag-item" style="background: #ffcdd2; cursor: default;">E<sub>kin</sub></span>
                    <span style="font-size: 1.5em; margin: 0 15px;">‚Üí</span>
                    <span class="drag-item" style="background: #e0e0e0; cursor: default;">E<sub>therm</sub></span>
                </div>

                <div class="sim-container">
                    <div class="sim-header">üß© √úbung: Ordne die Energieformen zu</div>
                    <div class="sim-body">
                        <p><strong>Lampe leuchtet:</strong></p>
                        <div style="text-align: center; margin: 15px 0;">
                            <div class="drop-zone" id="drop1" ondrop="drop(event, 'drop1')" ondragover="allowDrop(event)" ondragleave="leaveDrop(event)">?</div>
                            <span style="font-size: 1.5em; margin: 0 10px;">‚Üí</span>
                            <span class="drag-item" style="background: #fff9c4; cursor: default;">Licht</span>
                            <span>+</span>
                            <div class="drop-zone" id="drop2" ondrop="drop(event, 'drop2')" ondragover="allowDrop(event)" ondragleave="leaveDrop(event)">?</div>
                        </div>

                        <p style="margin-top: 20px;"><strong>Ziehe die passenden Energieformen:</strong></p>
                        <div style="text-align: center;">
                            <span class="drag-item" draggable="true" ondragstart="drag(event)" id="dragEel">E<sub>el</sub></span>
                            <span class="drag-item" draggable="true" ondragstart="drag(event)" id="dragEtherm">E<sub>therm</sub></span>
                            <span class="drag-item" draggable="true" ondragstart="drag(event)" id="dragEkin">E<sub>kin</sub></span>
                        </div>
                    </div>
                </div>

                <div class="hefter-hinweis">
                    <strong>Kasten 3 ausf√ºllen:</strong>
                    <ul>
                        <li>Beschrifte die Energieformen an jeder Pendel-Position (L, M, R)</li>
                        <li>Trage die Energieformen in die Flussdiagramm-K√§stchen ein</li>
                        <li>Erg√§nze den Satz zur Realit√§t (Reibung, W√§rme)</li>
                    </ul>
                    <strong>Aufgabe 1 bearbeiten:</strong>
                    <ul>
                        <li><strong>a)</strong> Ball f√§llt herunter ‚Äì Energieformen erg√§nzen</li>
                        <li><strong>b)</strong> Auto bremst ab ‚Äì Energieformen erg√§nzen</li>
                    </ul>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 8: ACHTERBAHN-SIMULATION -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step8">
            <div class="section">
                <h2>Simulation: Achterbahn</h2>

                <p>Eine Achterbahn ist ein perfektes Beispiel f√ºr Energieumwandlung!</p>

                <div class="sim-container">
                    <div class="sim-header">üé¢ Achterbahn-Simulation</div>
                    <div class="sim-body">
                        <canvas id="achterbahnCanvas" width="500" height="250"></canvas>

                        <div style="margin-top: 15px;">
                            <div class="energy-bar">
                                <span class="label" style="color: var(--Epot)">E<sub>pot</sub></span>
                                <div class="bar"><div class="fill" id="ab_epotBar" style="background: var(--Epot); width: 100%"></div></div>
                                <span class="value" id="ab_epotValue">100 J</span>
                            </div>
                            <div class="energy-bar">
                                <span class="label" style="color: var(--Ekin)">E<sub>kin</sub></span>
                                <div class="bar"><div class="fill" id="ab_ekinBar" style="background: var(--Ekin); width: 0%"></div></div>
                                <span class="value" id="ab_ekinValue">0 J</span>
                            </div>
                        </div>

                        <div class="controls">
                            <button onclick="startAchterbahn()">‚ñ∂ Start</button>
                            <button onclick="resetAchterbahn()">‚ü≤ Neustart</button>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>Beobachte:</strong> Am h√∂chsten Punkt hat der Wagen maximale E<sub>pot</sub>. Im Tal ist die Geschwindigkeit (und damit E<sub>kin</sub>) am gr√∂√üten!
                </div>

                <div class="hefter-hinweis">
                    <strong>Aufgabe 5 bearbeiten:</strong> Fehlersuche ‚Äì Florians Rechnung
                    <ul>
                        <li><strong>a)</strong> Finde den Fehler in der Rechnung und erkl√§re ihn</li>
                        <li><strong>b)</strong> Berechne die richtige Geschwindigkeit</li>
                    </ul>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 9: KRAFTWERKE BNE -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step9">
            <div class="section">
                <h2>Energiegewinnung in Mecklenburg-Vorpommern</h2>

                <div class="bne-box">
                    Wie k√∂nnen wir in M-V nachhaltig Energie gewinnen? Welche Vor- und Nachteile haben verschiedene Kraftwerkstypen?
                </div>

                <div class="sim-container">
                    <div class="sim-header">‚ö° Kraftwerk-Vergleich</div>
                    <div class="sim-body">
                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <button class="toggle-btn active" id="kwWind" onclick="showKraftwerk('wind')">Windkraft</button>
                            <button class="toggle-btn" id="kwPV" onclick="showKraftwerk('pv')">Fotovoltaik</button>
                            <button class="toggle-btn" id="kwWasser" onclick="showKraftwerk('wasser')">Wasserkraft</button>
                            <button class="toggle-btn" id="kwKern" onclick="showKraftwerk('kern')">Kernkraft</button>
                        </div>

                        <div id="kraftwerkInfo">
                            <div id="kw-wind">
                                <h3 style="color: var(--bne)">üå¨Ô∏è Windkraftanlage</h3>
                                <p><strong>Energieumwandlung:</strong></p>
                                <div style="text-align: center; margin: 10px 0;">
                                    <span class="drag-item" style="cursor: default;">E<sub>kin</sub> (Wind)</span>
                                    <span style="margin: 0 8px;">‚Üí</span>
                                    <span class="drag-item" style="cursor: default;">E<sub>kin</sub> (Rotor)</span>
                                    <span style="margin: 0 8px;">‚Üí</span>
                                    <span class="drag-item" style="background: #e8f5e9; cursor: default;">Generator</span>
                                    <span style="margin: 0 8px;">‚Üí</span>
                                    <span class="drag-item" style="background: #fff9c4; cursor: default;">E<sub>el</sub></span>
                                </div>
                                <table>
                                    <tr><th>Vorteile</th><th>Nachteile</th></tr>
                                    <tr>
                                        <td>‚úì Erneuerbar, kein CO‚ÇÇ<br>‚úì M-V hat viel Wind (K√ºste!)<br>‚úì Geringe Betriebskosten</td>
                                        <td>‚úó Wetterabh√§ngig<br>‚úó L√§rm, Schattenwurf<br>‚úó Eingriff ins Landschaftsbild</td>
                                    </tr>
                                </table>
                            </div>
                            <div id="kw-pv" style="display: none;">
                                <h3 style="color: var(--bne)">‚òÄÔ∏è Fotovoltaikanlage</h3>
                                <p><strong>Energieumwandlung:</strong></p>
                                <div style="text-align: center; margin: 10px 0;">
                                    <span class="drag-item" style="cursor: default;">Lichtenergie</span>
                                    <span style="margin: 0 10px;">‚Üí</span>
                                    <span class="drag-item" style="background: #fff9c4; cursor: default;">E<sub>el</sub></span>
                                </div>
                                <table>
                                    <tr><th>Vorteile</th><th>Nachteile</th></tr>
                                    <tr>
                                        <td>‚úì Erneuerbar, kein CO‚ÇÇ<br>‚úì Auf D√§chern m√∂glich<br>‚úì Wenig Wartung</td>
                                        <td>‚úó Nur bei Sonnenschein<br>‚úó Fl√§chenverbrauch<br>‚úó Speicherung n√∂tig</td>
                                    </tr>
                                </table>
                            </div>
                            <div id="kw-wasser" style="display: none;">
                                <h3 style="color: var(--bne)">üíß Wasserkraftwerk</h3>
                                <p><strong>Energieumwandlung:</strong></p>
                                <div style="text-align: center; margin: 10px 0;">
                                    <span class="drag-item" style="cursor: default;">E<sub>pot</sub> (Wasser)</span>
                                    <span style="margin: 0 10px;">‚Üí</span>
                                    <span class="drag-item" style="cursor: default;">E<sub>kin</sub> (Turbine)</span>
                                    <span style="margin: 0 10px;">‚Üí</span>
                                    <span class="drag-item" style="background: #fff9c4; cursor: default;">E<sub>el</sub></span>
                                </div>
                                <table>
                                    <tr><th>Vorteile</th><th>Nachteile</th></tr>
                                    <tr>
                                        <td>‚úì Erneuerbar, kein CO‚ÇÇ<br>‚úì Konstante Leistung<br>‚úì Speicher m√∂glich</td>
                                        <td>‚úó M-V ist flach (wenig Gef√§lle)<br>‚úó Eingriff in √ñkosystem<br>‚úó Hohe Baukosten</td>
                                    </tr>
                                </table>
                            </div>
                            <div id="kw-kern" style="display: none;">
                                <h3 style="color: var(--error)">‚ò¢Ô∏è Kernkraftwerk</h3>
                                <p><strong>Energieumwandlung:</strong></p>
                                <div style="text-align: center; margin: 10px 0;">
                                    <span class="drag-item" style="cursor: default;">Kernenergie</span>
                                    <span style="margin: 0 10px;">‚Üí</span>
                                    <span class="drag-item" style="cursor: default;">E<sub>therm</sub></span>
                                    <span style="margin: 0 10px;">‚Üí</span>
                                    <span class="drag-item" style="cursor: default;">E<sub>kin</sub></span>
                                    <span style="margin: 0 10px;">‚Üí</span>
                                    <span class="drag-item" style="background: #fff9c4; cursor: default;">E<sub>el</sub></span>
                                </div>
                                <table>
                                    <tr><th>Vorteile</th><th>Nachteile</th></tr>
                                    <tr>
                                        <td>‚úì Kein CO‚ÇÇ im Betrieb<br>‚úì Hohe Leistung<br>‚úì Unabh√§ngig vom Wetter</td>
                                        <td>‚úó Radioaktiver Abfall<br>‚úó Unfallrisiko<br>‚úó Endlagerung ungekl√§rt</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-box" style="background: #e8f5e9; border-color: var(--bne);">
                    <strong>üìù Notiere dir:</strong> Welche Energiegewinnung ist f√ºr Mecklenburg-Vorpommern besonders geeignet? (Windkraft an der K√ºste, Fotovoltaik auf D√§chern)
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 10: WIRKUNGSGRAD -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step10">
            <div class="section">
                <h2>Der Wirkungsgrad</h2>

                <p>Bei jeder Energieumwandlung geht ein Teil der Energie ‚Äûverloren" ‚Äì meist als W√§rme. Der <strong>Wirkungsgrad</strong> sagt uns, wie viel Energie tats√§chlich nutzbar ist.</p>

                <div class="merksatz">
                    <strong>Wirkungsgrad Œ∑ (eta):</strong><br><br>
                    <div style="text-align: center; font-size: 1.3em;">
                        Œ∑ = <span style="display: inline-block; text-align: center; vertical-align: middle;">
                            <span style="border-bottom: 2px solid #333; padding: 0 8px;">E<sub>nutz</sub></span><br>
                            <span style="padding: 0 8px;">E<sub>zu</sub></span>
                        </span>
                        &nbsp;=&nbsp;
                        <span style="display: inline-block; text-align: center; vertical-align: middle;">
                            <span style="border-bottom: 2px solid #333; padding: 0 8px;">P<sub>nutz</sub></span><br>
                            <span style="padding: 0 8px;">P<sub>zu</sub></span>
                        </span>
                    </div>
                    <p style="margin-top: 12px; font-size: 0.9em;">
                        <strong>Œ∑</strong> liegt immer zwischen <strong>0</strong> (0% ‚Äì gar nichts nutzbar) und <strong>1</strong> (100% ‚Äì alles nutzbar)
                    </p>
                </div>

                <div class="info-box">
                    <strong>Beispiel Gl√ºhbirne:</strong> Eine 60-W-Gl√ºhbirne wandelt nur etwa 5% der elektrischen Energie in Licht um. Der Rest (95%) wird zu W√§rme.<br>
                    ‚Üí Œ∑ = 0,05 (5%)
                </div>

                <div class="sim-container">
                    <div class="sim-header">üí° Wirkungsgrad-Vergleich: LED vs. Gl√ºhbirne</div>
                    <div class="sim-body">
                        <div style="display: flex; justify-content: space-around; align-items: flex-start; flex-wrap: wrap; gap: 20px;">
                            <div style="text-align: center; min-width: 180px;">
                                <h3>Gl√ºhbirne</h3>
                                <div style="width: 100px; height: 100px; margin: 10px auto; position: relative;">
                                    <svg viewBox="0 0 100 100" width="100" height="100">
                                        <ellipse cx="50" cy="50" rx="30" ry="35" fill="#fff3e0" stroke="#ffa000" stroke-width="2"/>
                                        <rect x="40" y="78" width="20" height="15" fill="#666"/>
                                        <ellipse cx="50" cy="50" rx="15" ry="18" fill="#ffcc00" opacity="0.5"/>
                                    </svg>
                                </div>
                                <div style="font-size: 1.5em; color: var(--error); font-weight: bold;">Œ∑ = 5%</div>
                                <div style="margin-top: 10px;">
                                    <div style="display: flex; align-items: center; gap: 5px; justify-content: center;">
                                        <div style="width: 60px; height: 15px; background: #ffcc00;"></div>
                                        <span style="font-size: 0.8em;">Licht (5%)</span>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 5px; justify-content: center; margin-top: 3px;">
                                        <div style="width: 60px; height: 15px; background: var(--Etherm);"></div>
                                        <span style="font-size: 0.8em;">W√§rme (95%)</span>
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: center; min-width: 180px;">
                                <h3>LED</h3>
                                <div style="width: 100px; height: 100px; margin: 10px auto; position: relative;">
                                    <svg viewBox="0 0 100 100" width="100" height="100">
                                        <ellipse cx="50" cy="45" rx="20" ry="25" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
                                        <rect x="42" y="68" width="16" height="10" fill="#666"/>
                                        <ellipse cx="50" cy="45" rx="12" ry="15" fill="#64b5f6" opacity="0.7"/>
                                    </svg>
                                </div>
                                <div style="font-size: 1.5em; color: var(--success); font-weight: bold;">Œ∑ = 40%</div>
                                <div style="margin-top: 10px;">
                                    <div style="display: flex; align-items: center; gap: 5px; justify-content: center;">
                                        <div style="width: 60px; height: 15px; background: #64b5f6;"></div>
                                        <span style="font-size: 0.8em;">Licht (40%)</span>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 5px; justify-content: center; margin-top: 3px;">
                                        <div style="width: 60px; height: 15px; background: var(--Etherm);"></div>
                                        <span style="font-size: 0.8em;">W√§rme (60%)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p style="text-align: center; margin-top: 15px; font-size: 0.9em; color: var(--text-muted);">
                            ‚Üí Eine LED ist <strong>8√ó effizienter</strong> als eine Gl√ºhbirne!
                        </p>
                    </div>
                </div>

                <h3>Wirkungsgrade verschiedener Ger√§te</h3>
                <table>
                    <tr><th>Ger√§t</th><th>Wirkungsgrad Œ∑</th><th>Verlust</th></tr>
                    <tr><td>Elektromotor</td><td style="color: var(--success);">85-95%</td><td>5-15%</td></tr>
                    <tr><td>Windkraftanlage</td><td>35-50%</td><td>50-65%</td></tr>
                    <tr><td>Solarzelle</td><td>15-25%</td><td>75-85%</td></tr>
                    <tr><td>Kohlekraftwerk</td><td>35-45%</td><td>55-65%</td></tr>
                    <tr><td>LED</td><td style="color: var(--success);">35-50%</td><td>50-65%</td></tr>
                    <tr><td>Gl√ºhbirne</td><td style="color: var(--error);">5%</td><td>95%</td></tr>
                </table>

                <h3>Kettenrechnung: Gesamtwirkungsgrad</h3>
                <p>Wenn mehrere Umwandlungen hintereinander stattfinden, multipliziert man die Wirkungsgrade:</p>

                <div class="info-box">
                    <strong>Beispiel Windkraftanlage:</strong><br>
                    Wind ‚Üí Rotor (Œ∑‚ÇÅ = 0,45) ‚Üí Generator (Œ∑‚ÇÇ = 0,95) ‚Üí Netz (Œ∑‚ÇÉ = 0,98)<br><br>
                    <strong>Œ∑<sub>ges</sub></strong> = Œ∑‚ÇÅ ¬∑ Œ∑‚ÇÇ ¬∑ Œ∑‚ÇÉ = 0,45 ¬∑ 0,95 ¬∑ 0,98 = <strong>0,42</strong> (42%)
                </div>

                <div class="quiz-box">
                    <p class="quiz-question">Eine Solarzelle hat Œ∑ = 20%. Von 500 J Sonnenenergie werden nutzbar:</p>
                    <div class="quiz-options" id="quizEta">
                        <div class="quiz-option" onclick="checkQuiz('quizEta', this, false)">20 J</div>
                        <div class="quiz-option" onclick="checkQuiz('quizEta', this, true)">100 J</div>
                        <div class="quiz-option" onclick="checkQuiz('quizEta', this, false)">400 J</div>
                        <div class="quiz-option" onclick="checkQuiz('quizEta', this, false)">500 J</div>
                    </div>
                    <div class="feedback" id="quizEta-feedback"></div>
                </div>

                <div class="hefter-hinweis">
                    <strong>Kasten 4 ausf√ºllen:</strong>
                    <ul>
                        <li>√úbertrage die Wirkungsgrad-Formel</li>
                        <li>Erg√§nze die Beispielwerte (Elektromotor, LED, Gl√ºhbirne)</li>
                        <li>Notiere die Kettenrechnung: Œ∑<sub>ges</sub> = Œ∑‚ÇÅ ¬∑ Œ∑‚ÇÇ ¬∑ ...</li>
                    </ul>
                    <strong>Aufgabe 4 bearbeiten:</strong>
                    <ul>
                        <li><strong>a)</strong> Berechne den Wirkungsgrad Œ∑ der LED</li>
                        <li><strong>b)</strong> Berechne die W√§rmeleistung P<sub>W√§rme</sub></li>
                    </ul>
                    <strong>Aufgabe 6 bearbeiten:</strong> Kettenaufgabe Windkraftanlage
                    <ul>
                        <li><strong>a)</strong> Berechne den Gesamtwirkungsgrad Œ∑<sub>ges</sub></li>
                        <li><strong>b)</strong> Berechne die elektrische Energie E<sub>el</sub></li>
                    </ul>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <button onclick="nextStep()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- SCHRITT 11: ZUSAMMENFASSUNG -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="step" id="step11">
            <div class="section">
                <h2>Zusammenfassung</h2>

                <div class="merksatz">
                    <strong>Das hast du heute gelernt:</strong>
                    <ul style="margin-top: 10px;">
                        <li>Energie kann in verschiedenen <strong>Formen</strong> auftreten (E<sub>pot</sub>, E<sub>kin</sub>, E<sub>therm</sub>, E<sub>el</sub>, E<sub>chem</sub>)</li>
                        <li>Der <strong>Energieerhaltungssatz</strong>: E<sub>ges</sub> = konstant</li>
                        <li>Energie wird nicht vernichtet, sondern <strong>umgewandelt</strong></li>
                        <li>In der Realit√§t geht Energie durch <strong>Reibung</strong> als W√§rme ‚Äûverloren"</li>
                        <li><strong>Energieflussdiagramme</strong> zeigen Umwandlungen grafisch</li>
                        <li>Der <strong>Wirkungsgrad</strong> Œ∑ = E<sub>nutz</sub>/E<sub>zu</sub> gibt an, wie viel Energie nutzbar ist</li>
                        <li>In M-V sind <strong>Windkraft</strong> und <strong>Fotovoltaik</strong> besonders geeignet</li>
                    </ul>
                </div>

                <div class="quiz-box">
                    <p class="quiz-question">Abschlussquiz: Welche Aussage ist richtig?</p>
                    <div class="quiz-options" id="quizFinal">
                        <div class="quiz-option" onclick="checkQuiz('quizFinal', this, false)">Energie kann aus dem Nichts erzeugt werden</div>
                        <div class="quiz-option" onclick="checkQuiz('quizFinal', this, false)">Beim Bremsen verschwindet die Bewegungsenergie</div>
                        <div class="quiz-option" onclick="checkQuiz('quizFinal', this, true)">Beim Bremsen wird E<sub>kin</sub> in E<sub>therm</sub> umgewandelt</div>
                        <div class="quiz-option" onclick="checkQuiz('quizFinal', this, false)">Der Energieerhaltungssatz gilt nur f√ºr Pendel</div>
                    </div>
                    <div class="feedback" id="quizFinal-feedback"></div>
                </div>

                <div class="hefter-hinweis">
                    <strong>Arbeitsblatt √ºberpr√ºfen ‚Äì Checkliste:</strong>
                    <ul>
                        <li>‚òê <strong>Kasten 1:</strong> Energieformen mit Beschreibungen</li>
                        <li>‚òê <strong>Kasten 2:</strong> Energieerhaltungssatz + G√ºltigkeitsbedingung</li>
                        <li>‚òê <strong>Kasten 3:</strong> Pendel-Diagramm + Energiefluss</li>
                        <li>‚òê <strong>Kasten 4:</strong> Wirkungsgrad-Formel + Beispiele</li>
                        <li>‚òê <strong>Aufgabe 1a+b:</strong> Energieumwandlungen (Ball, Auto)</li>
                        <li>‚òê <strong>Aufgabe 2a+b:</strong> Lageenergie berechnen</li>
                        <li>‚òê <strong>Aufgabe 3a+b:</strong> Geschwindigkeit berechnen</li>
                        <li>‚òê <strong>Aufgabe 4a+b:</strong> Wirkungsgrad berechnen</li>
                        <li>‚òê <strong>Aufgabe 5a+b:</strong> Fehlersuche</li>
                        <li>‚òê <strong>Aufgabe 6a+b:</strong> Kettenaufgabe</li>
                    </ul>
                </div>

                <div class="info-box" style="background: var(--success-bg); border-color: var(--success);">
                    <strong>üéâ Geschafft!</strong> Du hast den Lernpfad zur Energieumwandlung abgeschlossen.
                </div>
            </div>

            <div class="nav-buttons">
                <button class="secondary" onclick="prevStep()">‚Üê Zur√ºck</button>
                <span></span>
            </div>
        </div>

    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- JAVASCRIPT -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // KONFIGURATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        var STORAGE_KEY = 'lp-physik-10mr-04-energieumwandlung';
        var currentStep = 1;
        var totalSteps = 11;
        var visitedSteps = [1];

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // STEP INDICATORS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function generateStepIndicators() {
            var container = document.getElementById('stepIndicators');
            container.innerHTML = '';
            for (var i = 1; i <= totalSteps; i++) {
                var indicator = document.createElement('div');
                indicator.className = 'step-indicator';
                indicator.textContent = i;
                indicator.setAttribute('data-step', i);
                indicator.onclick = (function(step) {
                    return function() { showStep(step); };
                })(i);
                container.appendChild(indicator);
            }
            updateStepIndicators();
        }

        function updateStepIndicators() {
            var indicators = document.querySelectorAll('.step-indicator');
            for (var i = 0; i < indicators.length; i++) {
                var step = parseInt(indicators[i].getAttribute('data-step'));
                indicators[i].classList.remove('current', 'completed');
                if (step === currentStep) {
                    indicators[i].classList.add('current');
                } else if (visitedSteps.indexOf(step) !== -1) {
                    indicators[i].classList.add('completed');
                }
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // NAVIGATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function updateProgress() {
            var percent = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progress').style.width = percent + '%';
        }

        function saveProgress() {
            localStorage.setItem(STORAGE_KEY + '-step', currentStep);
            localStorage.setItem(STORAGE_KEY + '-visited', JSON.stringify(visitedSteps));
        }

        function loadProgress() {
            var savedStep = localStorage.getItem(STORAGE_KEY + '-step');
            var savedVisited = localStorage.getItem(STORAGE_KEY + '-visited');
            if (savedStep) {
                currentStep = parseInt(savedStep);
            }
            if (savedVisited) {
                try {
                    visitedSteps = JSON.parse(savedVisited);
                } catch(e) {
                    visitedSteps = [1];
                }
            }
        }

        function showStep(n) {
            var steps = document.querySelectorAll('.step');
            for (var i = 0; i < steps.length; i++) {
                steps[i].classList.remove('active');
            }
            document.getElementById('step' + n).classList.add('active');
            currentStep = n;

            // Mark as visited
            if (visitedSteps.indexOf(n) === -1) {
                visitedSteps.push(n);
            }

            updateProgress();
            updateStepIndicators();
            saveProgress();
            window.scrollTo(0, 0);
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                showStep(currentStep + 1);
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // INPUT PERSISTENZ
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function saveInputs() {
            var inputs = document.querySelectorAll('input[type="text"], input[type="number"], select');
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].id) {
                    localStorage.setItem(STORAGE_KEY + '-' + inputs[i].id, inputs[i].value);
                }
            }
        }

        function loadInputs() {
            var inputs = document.querySelectorAll('input[type="text"], input[type="number"], select');
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].id) {
                    var saved = localStorage.getItem(STORAGE_KEY + '-' + inputs[i].id);
                    if (saved !== null) {
                        inputs[i].value = saved;
                    }
                }
            }
        }

        function initInputListeners() {
            var inputs = document.querySelectorAll('input[type="text"], input[type="number"]');
            for (var i = 0; i < inputs.length; i++) {
                inputs[i].addEventListener('input', saveInputs);
            }
            var selects = document.querySelectorAll('select');
            for (var j = 0; j < selects.length; j++) {
                selects[j].addEventListener('change', saveInputs);
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // INITIALISIERUNG
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        loadProgress();
        generateStepIndicators();
        loadInputs();
        initInputListeners();

        // Show saved step
        var steps = document.querySelectorAll('.step');
        for (var i = 0; i < steps.length; i++) {
            steps[i].classList.remove('active');
        }
        document.getElementById('step' + currentStep).classList.add('active');
        updateProgress();
        updateStepIndicators();

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // QUIZ
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function checkQuiz(quizId, element, correct) {
            var options = document.querySelectorAll('#' + quizId + ' .quiz-option');
            var feedback = document.getElementById(quizId + '-feedback');

            for (var i = 0; i < options.length; i++) {
                options[i].style.pointerEvents = 'none';
            }

            if (correct) {
                element.classList.add('correct');
                feedback.className = 'feedback success';
                feedback.textContent = '‚úì Richtig!';
            } else {
                element.classList.add('incorrect');
                feedback.className = 'feedback error';
                feedback.textContent = '‚úó Leider falsch. Versuche es nochmal!';
                setTimeout(function() {
                    for (var i = 0; i < options.length; i++) {
                        options[i].classList.remove('incorrect');
                        options[i].style.pointerEvents = 'auto';
                    }
                    feedback.className = 'feedback';
                }, 2000);
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // HYPOTHESE (keine Wertung, nur Notieren)
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function checkHypothese(quizId, element) {
            var options = document.querySelectorAll('#' + quizId + ' .quiz-option');
            var feedback = document.getElementById(quizId + '-feedback');

            // Alle Optionen zur√ºcksetzen
            for (var i = 0; i < options.length; i++) {
                options[i].classList.remove('correct', 'incorrect');
                options[i].style.background = '#f9f9f9';
            }

            // Ausgew√§hlte Option markieren (neutral, nicht richtig/falsch)
            element.style.background = 'var(--physik-light)';
            element.style.borderColor = 'var(--physik)';

            // Positives Feedback ohne Wertung
            feedback.className = 'feedback success';
            feedback.innerHTML = '‚úì Hypothese notiert! Im n√§chsten Schritt √ºberpr√ºfst du sie mit der Simulation.';
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // L√úCKENTEXT
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function checkLuecken() {
            var l1 = document.getElementById('luecke1').value;
            var l2 = document.getElementById('luecke2').value;
            var l3 = document.getElementById('luecke3').value;
            var feedback = document.getElementById('luecken-feedback');

            var correct1 = (l1 === 'epot');
            var correct2 = (l2 === 'ekin');
            var correct3 = (l3 === 'reibung');

            document.getElementById('luecke1').classList.remove('correct', 'incorrect');
            document.getElementById('luecke2').classList.remove('correct', 'incorrect');
            document.getElementById('luecke3').classList.remove('correct', 'incorrect');

            if (l1) document.getElementById('luecke1').classList.add(correct1 ? 'correct' : 'incorrect');
            if (l2) document.getElementById('luecke2').classList.add(correct2 ? 'correct' : 'incorrect');
            if (l3) document.getElementById('luecke3').classList.add(correct3 ? 'correct' : 'incorrect');

            if (correct1 && correct2 && correct3) {
                feedback.className = 'feedback success';
                feedback.innerHTML = '‚úì Richtig! Lageenergie (E<sub>pot</sub>) ‚Üí Bewegungsenergie (E<sub>kin</sub>), Verlust durch Reibung.';
            } else if (!l1 || !l2 || !l3) {
                feedback.className = 'feedback error';
                feedback.innerHTML = '‚úó Bitte alle Felder ausf√ºllen.';
            } else {
                feedback.className = 'feedback error';
                feedback.innerHTML = '‚úó Noch nicht ganz richtig. √úberlege: Welche Energie hat das Pendel oben? Welche unten?';
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // DRAG & DROP
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        var draggedElement = null;

        function drag(event) {
            draggedElement = event.target;
            event.dataTransfer.setData('text', event.target.id);
        }

        function allowDrop(event) {
            event.preventDefault();
            event.target.classList.add('over');
        }

        function leaveDrop(event) {
            event.target.classList.remove('over');
        }

        function drop(event, dropId) {
            event.preventDefault();
            event.target.classList.remove('over');

            var correctAnswers = {
                'drop1': 'dragEel',
                'drop2': 'dragEtherm'
            };

            if (draggedElement && correctAnswers[dropId] === draggedElement.id) {
                event.target.innerHTML = draggedElement.innerHTML;
                event.target.classList.add('filled');
                draggedElement.style.display = 'none';
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // EINFACHES PENDEL (HYPOTHESE-STEP, OHNE ENERGIEBALKEN)
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        var simpleCanvas = document.getElementById('pendelCanvasSimple');
        var simpleCtx = simpleCanvas ? simpleCanvas.getContext('2d') : null;
        var simpleAngle = Math.PI / 3;
        var simpleVelocity = 0;
        var simpleLength = 140;

        function drawSimplePendel() {
            if (!simpleCtx) return;
            simpleCtx.clearRect(0, 0, 500, 280);

            var pivotX = 250;
            var pivotY = 25;
            var bobX = pivotX + simpleLength * Math.sin(simpleAngle);
            var bobY = pivotY + simpleLength * Math.cos(simpleAngle);
            var maxAngle = Math.PI / 3;

            // Hintergrund: Positionen L, M, R
            simpleCtx.fillStyle = '#888';
            simpleCtx.font = 'bold 14px sans-serif';

            // L Position (links)
            var lX = pivotX - simpleLength * Math.sin(maxAngle);
            var lY = pivotY + simpleLength * Math.cos(maxAngle);
            simpleCtx.fillText('L', lX - 25, lY + 5);
            simpleCtx.setLineDash([3, 3]);
            simpleCtx.strokeStyle = '#ccc';
            simpleCtx.beginPath();
            simpleCtx.moveTo(pivotX, pivotY);
            simpleCtx.lineTo(lX, lY);
            simpleCtx.stroke();

            // R Position (rechts)
            var rX = pivotX + simpleLength * Math.sin(maxAngle);
            var rY = pivotY + simpleLength * Math.cos(maxAngle);
            simpleCtx.fillText('R', rX + 10, rY + 5);
            simpleCtx.beginPath();
            simpleCtx.moveTo(pivotX, pivotY);
            simpleCtx.lineTo(rX, rY);
            simpleCtx.stroke();

            // M Position (Mitte)
            simpleCtx.fillText('M', pivotX - 5, pivotY + simpleLength + 25);
            simpleCtx.beginPath();
            simpleCtx.moveTo(pivotX, pivotY);
            simpleCtx.lineTo(pivotX, pivotY + simpleLength);
            simpleCtx.stroke();
            simpleCtx.setLineDash([]);

            // Grundlinie (tiefster Punkt)
            simpleCtx.setLineDash([5, 5]);
            simpleCtx.beginPath();
            simpleCtx.moveTo(80, pivotY + simpleLength);
            simpleCtx.lineTo(420, pivotY + simpleLength);
            simpleCtx.strokeStyle = '#aaa';
            simpleCtx.stroke();
            simpleCtx.setLineDash([]);

            // Aufh√§ngung
            simpleCtx.fillStyle = '#333';
            simpleCtx.fillRect(pivotX - 40, pivotY - 8, 80, 12);

            // Faden
            simpleCtx.beginPath();
            simpleCtx.moveTo(pivotX, pivotY);
            simpleCtx.lineTo(bobX, bobY);
            simpleCtx.strokeStyle = '#555';
            simpleCtx.lineWidth = 2;
            simpleCtx.stroke();

            // Kugel
            simpleCtx.beginPath();
            simpleCtx.arc(bobX, bobY, 22, 0, 2 * Math.PI);
            simpleCtx.fillStyle = '#2c5aa0';
            simpleCtx.fill();
            simpleCtx.strokeStyle = '#1a3d6e';
            simpleCtx.lineWidth = 2;
            simpleCtx.stroke();

            // H√∂henmarkierung
            simpleCtx.fillStyle = '#666';
            simpleCtx.font = '11px sans-serif';
            var currentH = simpleLength - simpleLength * Math.cos(simpleAngle);
            simpleCtx.fillText('h = ' + (currentH / simpleLength * 100).toFixed(0) + '%', bobX + 30, bobY);
        }

        function updateSimplePendel() {
            var gravity = 0.0012;
            var acceleration = -gravity * Math.sin(simpleAngle);
            simpleVelocity += acceleration;
            simpleVelocity *= 0.9995; // Minimale D√§mpfung f√ºr Realismus
            simpleAngle += simpleVelocity;

            drawSimplePendel();
            requestAnimationFrame(updateSimplePendel);
        }

        if (simpleCanvas) {
            updateSimplePendel();
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // PENDEL SIMULATION (MIT ENERGIEBALKEN)
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        var pendelCanvas = document.getElementById('pendelCanvas');
        var pendelCtx = pendelCanvas.getContext('2d');
        var pendelAngle = Math.PI / 3;
        var pendelVelocity = 0;
        var pendelLength = 150;
        var pendelDamping = 0;
        var pendelRunning = true;
        var initialAngle = Math.PI / 3;  // Startwinkel speichern f√ºr Normalisierung
        var thermalEnergy = 0;
        var totalEnergy = 100;  // Gesamtenergie (konstant im idealen Fall)

        function setMode(mode) {
            document.getElementById('idealBtn').classList.toggle('active', mode === 'ideal');
            document.getElementById('realBtn').classList.toggle('active', mode === 'real');
            document.getElementById('ethermRow').style.display = mode === 'real' ? 'flex' : 'none';
            pendelDamping = mode === 'real' ? 0.002 : 0;
            resetPendel();
        }

        function resetPendel() {
            var height = parseInt(document.getElementById('heightSlider').value);
            pendelAngle = (height / 100) * (Math.PI / 2);
            initialAngle = pendelAngle;  // Startwinkel merken
            pendelVelocity = 0;
            thermalEnergy = 0;
            totalEnergy = 100;
        }

        document.getElementById('heightSlider').addEventListener('input', function() {
            document.getElementById('heightValue').textContent = this.value + '%';
            resetPendel();
        });

        function drawPendel() {
            pendelCtx.clearRect(0, 0, 500, 300);

            var pivotX = 250;
            var pivotY = 30;
            var bobX = pivotX + pendelLength * Math.sin(pendelAngle);
            var bobY = pivotY + pendelLength * Math.cos(pendelAngle);

            // Pivot
            pendelCtx.fillStyle = '#333';
            pendelCtx.fillRect(pivotX - 30, pivotY - 5, 60, 10);

            // String
            pendelCtx.beginPath();
            pendelCtx.moveTo(pivotX, pivotY);
            pendelCtx.lineTo(bobX, bobY);
            pendelCtx.strokeStyle = '#555';
            pendelCtx.lineWidth = 2;
            pendelCtx.stroke();

            // Bob
            pendelCtx.beginPath();
            pendelCtx.arc(bobX, bobY, 20, 0, 2 * Math.PI);
            pendelCtx.fillStyle = '#2c5aa0';
            pendelCtx.fill();

            // Ground reference (tiefster Punkt)
            pendelCtx.setLineDash([5, 5]);
            pendelCtx.beginPath();
            pendelCtx.moveTo(50, pivotY + pendelLength);
            pendelCtx.lineTo(450, pivotY + pendelLength);
            pendelCtx.strokeStyle = '#ccc';
            pendelCtx.lineWidth = 1;
            pendelCtx.stroke();
            pendelCtx.setLineDash([]);

            // Labels: L (links), M (Mitte), R (rechts)
            pendelCtx.fillStyle = '#888';
            pendelCtx.font = '11px sans-serif';
            pendelCtx.fillText('L', pivotX - pendelLength * Math.sin(initialAngle) - 5, pivotY + pendelLength * Math.cos(initialAngle) + 35);
            pendelCtx.fillText('M', pivotX - 5, pivotY + pendelLength + 15);
            pendelCtx.fillText('R', pivotX + pendelLength * Math.sin(initialAngle) - 5, pivotY + pendelLength * Math.cos(initialAngle) + 35);
        }

        function updatePendel() {
            var gravity = 0.0015;

            // Physics
            var acceleration = -gravity * Math.sin(pendelAngle);
            pendelVelocity += acceleration;
            pendelVelocity *= (1 - pendelDamping);
            pendelAngle += pendelVelocity;

            // Energie-Berechnung: NORMALISIERT auf Starth√∂he = 100%
            // H√∂he relativ zur Starth√∂he: 0 (unten) bis 1 (oben)
            var currentHeight = 1 - Math.cos(pendelAngle);
            var maxHeight = 1 - Math.cos(initialAngle);
            var heightRatio = maxHeight > 0 ? currentHeight / maxHeight : 0;
            if (heightRatio > 1) heightRatio = 1;  // Begrenzen falls √úberschwingen
            if (heightRatio < 0) heightRatio = 0;

            // E_pot = 100% bei Starth√∂he, 0% im tiefsten Punkt
            var epot = heightRatio * (totalEnergy - thermalEnergy);
            // E_kin = Restenergie
            var ekin = (totalEnergy - thermalEnergy) - epot;
            if (ekin < 0) ekin = 0;

            // Reibungsverlust ‚Üí thermische Energie
            if (pendelDamping > 0) {
                var loss = pendelDamping * Math.abs(pendelVelocity) * 300;
                thermalEnergy += loss;
                if (thermalEnergy > totalEnergy) thermalEnergy = totalEnergy;
            }

            // Update bars
            document.getElementById('epotBar').style.width = epot + '%';
            document.getElementById('epotValue').textContent = epot.toFixed(0) + ' J';
            document.getElementById('ekinBar').style.width = ekin + '%';
            document.getElementById('ekinValue').textContent = ekin.toFixed(0) + ' J';

            if (pendelDamping > 0) {
                document.getElementById('ethermBar').style.width = thermalEnergy + '%';
                document.getElementById('ethermValue').textContent = thermalEnergy.toFixed(0) + ' J';
            }

            // E_ges bleibt immer 100 J
            document.getElementById('egesBar').style.width = '100%';
            document.getElementById('egesValue').textContent = '100 J';

            drawPendel();

            if (pendelRunning) {
                requestAnimationFrame(updatePendel);
            }
        }

        updatePendel();

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // ACHTERBAHN SIMULATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        var abCanvas = document.getElementById('achterbahnCanvas');
        var abCtx = abCanvas.getContext('2d');
        var abPos = 0;
        var abRunning = false;
        var abAnimId = null;

        var track = [
            {x: 20, y: 50},
            {x: 80, y: 180},
            {x: 150, y: 80},
            {x: 220, y: 200},
            {x: 300, y: 100},
            {x: 380, y: 180},
            {x: 450, y: 120},
            {x: 480, y: 120}
        ];

        function getTrackPoint(t) {
            if (t >= track.length - 1) return track[track.length - 1];
            var i = Math.floor(t);
            var f = t - i;
            return {
                x: track[i].x + (track[i + 1].x - track[i].x) * f,
                y: track[i].y + (track[i + 1].y - track[i].y) * f
            };
        }

        function drawAchterbahn() {
            abCtx.clearRect(0, 0, 500, 250);

            // Track
            abCtx.beginPath();
            abCtx.moveTo(track[0].x, track[0].y);
            for (var i = 1; i < track.length; i++) {
                abCtx.lineTo(track[i].x, track[i].y);
            }
            abCtx.strokeStyle = '#333';
            abCtx.lineWidth = 4;
            abCtx.stroke();

            // Supports
            for (var i = 0; i < track.length; i++) {
                abCtx.beginPath();
                abCtx.moveTo(track[i].x, track[i].y);
                abCtx.lineTo(track[i].x, 230);
                abCtx.strokeStyle = '#999';
                abCtx.lineWidth = 2;
                abCtx.stroke();
            }

            // Ground
            abCtx.fillStyle = '#8B4513';
            abCtx.fillRect(0, 230, 500, 20);

            // Cart
            var point = getTrackPoint(abPos);
            abCtx.beginPath();
            abCtx.arc(point.x, point.y - 10, 12, 0, 2 * Math.PI);
            abCtx.fillStyle = '#c62828';
            abCtx.fill();

            // Energy
            var maxH = 200;
            var epot = ((maxH - point.y) / maxH) * 100;
            var ekin = 100 - epot;

            document.getElementById('ab_epotBar').style.width = epot + '%';
            document.getElementById('ab_epotValue').textContent = epot.toFixed(0) + ' J';
            document.getElementById('ab_ekinBar').style.width = ekin + '%';
            document.getElementById('ab_ekinValue').textContent = ekin.toFixed(0) + ' J';
        }

        function animateAchterbahn() {
            abPos += 0.03;
            if (abPos >= track.length - 1) {
                abPos = track.length - 1;
                abRunning = false;
            }
            drawAchterbahn();
            if (abRunning) {
                abAnimId = requestAnimationFrame(animateAchterbahn);
            }
        }

        function startAchterbahn() {
            if (!abRunning) {
                abRunning = true;
                animateAchterbahn();
            }
        }

        function resetAchterbahn() {
            abRunning = false;
            if (abAnimId) cancelAnimationFrame(abAnimId);
            abPos = 0;
            drawAchterbahn();
        }

        drawAchterbahn();

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // KRAFTWERKE
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function showKraftwerk(type) {
            var types = ['wind', 'pv', 'wasser', 'kern'];
            // Button-IDs: kwWind, kwPV, kwWasser, kwKern (PV ist Sonderfall!)
            var btnIds = {wind: 'kwWind', pv: 'kwPV', wasser: 'kwWasser', kern: 'kwKern'};

            for (var i = 0; i < types.length; i++) {
                document.getElementById('kw-' + types[i]).style.display = 'none';
                document.getElementById(btnIds[types[i]]).classList.remove('active');
            }
            document.getElementById('kw-' + type).style.display = 'block';
            document.getElementById(btnIds[type]).classList.add('active');
        }
    </script>
</body>
</html>
