<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LP-01a: Grundgesetz der Mechanik (F = m · a)</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f5;
            color: #222;
            font-size: 16px;
            line-height: 1.6;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }

        /* Header */
        header {
            background: #2c5aa0;
            color: white;
            padding: 20px;
        }
        header h1 { font-size: 1.4em; font-weight: 600; }
        .header-info { font-size: 0.85em; opacity: 0.9; margin-top: 5px; }

        /* Progress */
        .progress-bar { background: #e0e0e0; height: 8px; margin: 15px 0 10px; }
        .progress-fill { background: #2c5aa0; height: 100%; width: 0%; transition: width 0.3s; }
        .progress-text { font-size: 0.85em; color: #666; text-align: center; margin-bottom: 10px; }

        /* Step-Indicators (klickbare Navigation) */
        .step-indicators {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 15px;
        }
        .step-dot {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: 600;
            border: 2px solid #ddd;
            background: white;
            cursor: pointer;
            transition: all 0.15s;
            color: #555;
        }
        .step-dot:hover { border-color: #2c5aa0; color: #2c5aa0; }
        .step-dot.completed { background: #2a7a4b; border-color: #2a7a4b; color: white; }
        .step-dot.current { border-color: #2c5aa0; border-width: 3px; color: #2c5aa0; font-weight: 700; }

        /* Sections */
        .section { background: white; border: 1px solid #ddd; margin: 15px 0; padding: 20px; }
        .section h2 { color: #2c5aa0; font-size: 1.2em; margin-bottom: 15px; border-bottom: 2px solid #2c5aa0; padding-bottom: 8px; }
        .section h3 { color: #2c5aa0; font-size: 1em; margin: 15px 0 10px; }

        /* Info-Box */
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2c5aa0;
            padding: 15px;
            margin: 15px 0;
        }
        .info-box.wichtig {
            background: #fff3e0;
            border-left-color: #b35c00;
        }

        /* Merksatz */
        .merksatz {
            background: #e8f5e9;
            border: 2px solid #2a7a4b;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        .merksatz .formel {
            font-size: 1.8em;
            font-weight: bold;
            color: #2a7a4b;
            margin: 10px 0;
        }

        /* ISO 80000: Formelzeichen kursiv+Serif, Einheiten aufrecht+Sans-Serif */
        .fz {
            font-family: "Times New Roman", Times, serif;
            font-style: italic;
        }
        .einheit {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            font-style: normal;
        }

        /* Hefter-Hinweis */
        .hefter-hinweis {
            background: #fff3e0;
            border: 2px solid #b35c00;
            padding: 12px 15px;
            margin: 20px 0;
            font-size: 0.9em;
        }
        .hefter-hinweis::before {
            content: "Arbeitsblatt";
            display: inline-block;
            background: #b35c00;
            color: white;
            font-size: 0.75em;
            font-weight: 600;
            padding: 2px 8px;
            margin-bottom: 8px;
        }

        /* Übung */
        .uebung {
            background: #fafafa;
            border: 1px solid #ddd;
            padding: 15px;
            margin: 15px 0;
        }
        .uebung-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .uebung-titel { font-weight: 600; color: #2c5aa0; }
        .uebung-punkte { background: #e0e0e0; padding: 2px 8px; font-size: 0.8em; }

        /* Inputs */
        input[type="text" inputmode="decimal"], input[type="text"] {
            border: none;
            border-bottom: 2px solid #2c5aa0;
            padding: 5px 10px;
            width: 80px;
            font-size: 1em;
            text-align: center;
            background: transparent;
        }
        input[type="text" inputmode="decimal"]:focus, input[type="text"]:focus {
            outline: none;
            border-bottom-color: #1e4080;
        }
        select {
            padding: 5px 10px;
            font-size: 1em;
            border: 1px solid #ddd;
        }

        /* Buttons */
        button {
            background: #2c5aa0;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 0.95em;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #1e4080; }
        button:disabled { background: #aaa; cursor: not-allowed; }
        button.btn-check { background: #2a7a4b; }

        /* Feedback */
        .feedback {
            padding: 10px 15px;
            margin: 10px 0;
            display: none;
            font-size: 0.9em;
        }
        .feedback.show { display: block; }
        .feedback.correct { background: #e8f5e9; border-left: 3px solid #2a7a4b; color: #2a7a4b; }
        .feedback.incorrect { background: #ffebee; border-left: 3px solid #c62828; color: #c62828; }
        .feedback.hint { background: #fff3e0; border-left: 3px solid #b35c00; color: #b35c00; }

        /* Simulation Container */
        .sim-container {
            background: #fafafa;
            border: 1px solid #ddd;
            padding: 15px;
            margin: 15px 0;
        }
        .sim-canvas-wrapper {
            background: white;
            border: 1px solid #ddd;
            margin: 10px 0;
            text-align: center;
        }
        canvas { display: block; margin: 0 auto; }
        .sim-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
            align-items: center;
        }
        .sim-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .sim-control label { font-weight: 600; font-size: 0.9em; }
        .sim-control input[type="range"] { width: 150px; }
        .sim-value { background: #e3f2fd; padding: 3px 10px; font-family: monospace; min-width: 80px; text-align: center; }

        /* Formel-Dreieck SVG */
        .dreieck-container { text-align: center; margin: 20px 0; }

        /* Tabelle */
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background: #2c5aa0; color: white; }

        /* Navigation */
        .nav-buttons { display: flex; justify-content: space-between; margin: 20px 0; }

        /* Responsive */
        @media (max-width: 600px) {
            .sim-controls { flex-direction: column; }
            input[type="text" inputmode="decimal"] { width: 60px; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Grundgesetz der Mechanik: <span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></h1>
        <div class="header-info">Physik Klasse 10 MR | Doppelstunde 01a | 45 Min Lernpfad + 45 Min Test</div>
    </header>

    <div class="container">
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        <div class="progress-text" id="progressText">Schritt 1 von 11</div>
        <div class="step-indicators" id="stepIndicators"></div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 1: EINSTIEG - TAUZIEHEN
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step1">
            <h2>Schritt 1: Wer gewinnt beim Tauziehen?</h2>

            <!-- MOTIVATION BOX -->
            <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border: 2px solid #2c5aa0; padding: 15px; margin-bottom: 20px;">
                <div style="font-weight: 600; color: #2c5aa0; font-size: 1.1em; margin-bottom: 10px;">Warum ist das wichtig für DICH?</div>
                <ul style="margin: 0 0 10px 20px; color: #333;">
                    <li>Warum beschleunigt ein <strong>Sportwagen</strong> schneller als ein LKW?</li>
                    <li>Warum ist ein voller <strong>Einkaufswagen</strong> so schwer zu schieben?</li>
                    <li>Wie berechnen Ingenieure die <strong>Bremswege</strong> für deine Sicherheit?</li>
                </ul>
                <div style="background: #fff; padding: 10px; border-left: 3px solid #2c5aa0;">
                    <strong>AHA-Fakt:</strong> Du erlebst das jeden Tag! Je stärker du beim Fahrradfahren in die Pedale trittst (mehr Kraft), desto schneller wirst du (mehr Beschleunigung). Mit vollen Taschen am Lenker (mehr Masse) wird das Beschleunigen schwerer!
                </div>
            </div>

            <div class="info-box">
                <strong>Stell dir vor:</strong> Zwei Teams ziehen an einem Seil.
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li>Team A (links): 3 Personen ziehen mit je <strong>200 N</strong></li>
                    <li>Team B (rechts): 2 Personen ziehen mit je <strong>250 N</strong></li>
                </ul>
            </div>

            <!-- Tauziehen-Visualisierung -->
            <div class="sim-canvas-wrapper">
                <svg width="600" height="200" viewBox="0 0 600 200" style="max-width:100%;">
                    <!-- Seil -->
                    <line x1="100" y1="100" x2="500" y2="100" stroke="#8B4513" stroke-width="8"/>

                    <!-- Team A (links) - 3 Personen -->
                    <g fill="#c62828">
                        <circle cx="80" cy="100" r="20"/>
                        <circle cx="50" cy="100" r="20"/>
                        <circle cx="20" cy="100" r="20"/>
                    </g>
                    <text x="50" y="150" text-anchor="middle" font-weight="bold" fill="#c62828">Team A</text>
                    <text x="50" y="170" text-anchor="middle" font-size="14" fill="#c62828">3 × 200 N = 600 N</text>
                    <!-- Kraftpfeil A -->
                    <line x1="100" y1="60" x2="30" y2="60" stroke="#c62828" stroke-width="4" marker-end="url(#arrow-red)"/>
                    <text x="65" y="50" text-anchor="middle" font-weight="bold" fill="#c62828">F<tspan font-size="10" baseline-shift="sub">A</tspan></text>

                    <!-- Team B (rechts) - 2 Personen -->
                    <g fill="#1565c0">
                        <circle cx="520" cy="100" r="20"/>
                        <circle cx="560" cy="100" r="20"/>
                    </g>
                    <text x="540" y="150" text-anchor="middle" font-weight="bold" fill="#1565c0">Team B</text>
                    <text x="540" y="170" text-anchor="middle" font-size="14" fill="#1565c0">2 × 250 N = 500 N</text>
                    <!-- Kraftpfeil B -->
                    <line x1="500" y1="60" x2="570" y2="60" stroke="#1565c0" stroke-width="4" marker-end="url(#arrow-blue)"/>
                    <text x="535" y="50" text-anchor="middle" font-weight="bold" fill="#1565c0">F<tspan font-size="10" baseline-shift="sub">B</tspan></text>

                    <!-- Pfeilspitzen -->
                    <defs>
                        <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <path d="M0,0 L0,6 L9,3 z" fill="#c62828"/>
                        </marker>
                        <marker id="arrow-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <path d="M0,0 L0,6 L9,3 z" fill="#1565c0"/>
                        </marker>
                    </defs>
                </svg>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 1.1</span>
                </div>
                <p><strong>a)</strong> Wie groß ist die Gesamtkraft von Team A?</p>
                <p style="margin: 10px 0;">
                    <span class="fz">F</span><sub>A</sub> = 3 × 200 N = <input type="text" inputmode="decimal" id="u1a" style="width:60px"> N
                </p>
                <p style="margin-top: 15px;"><strong>b)</strong> Wie groß ist die Gesamtkraft von Team B?</p>
                <p style="margin: 10px 0;">
                    <span class="fz">F</span><sub>B</sub> = 2 × 250 N = <input type="text" inputmode="decimal" id="u1b" style="width:60px"> N
                </p>
                <p style="margin-top: 15px;"><strong>c)</strong> Welches Team gewinnt?</p>
                <p style="margin: 10px 0;">
                    <select id="u1c">
                        <option value="">-- Auswählen --</option>
                        <option value="A">Team A</option>
                        <option value="B">Team B</option>
                        <option value="gleich">Unentschieden</option>
                    </select>
                </p>
                <button class="btn-check" onclick="checkStep1()">Prüfen</button>
                <div class="feedback correct" id="fb1-correct">
                    Richtig! Team A zieht mit 600 N, Team B nur mit 500 N. Team A gewinnt, weil sie mit mehr Kraft ziehen!
                </div>
                <div class="feedback incorrect" id="fb1-incorrect">
                    Noch nicht ganz. Rechne nochmal: 3 × 200 = ? und 2 × 250 = ?
                </div>
            </div>

            <div class="nav-buttons">
                <span></span>
                <button onclick="nextStep(2)" id="btn-next1" disabled>Weiter zu Schritt 2 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 2: RESULTIERENDE KRAFT
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step2" style="display:none;">
            <h2>Schritt 2: Die resultierende Kraft</h2>

            <div class="merksatz">
                <div style="font-size: 1.1em;">
                    <strong>Die resultierende Kraft</strong> ist die <strong>Summe</strong> aller auf einen Körper wirkenden Kräfte.
                </div>
            </div>

            <div class="info-box">
                <strong>Wichtig beim Addieren von Kräften:</strong>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li><strong>Gleiche Richtung:</strong> Kräfte werden addiert</li>
                    <li><strong>Entgegengesetzte Richtung:</strong> Kräfte werden subtrahiert</li>
                </ul>
            </div>

            <p>Beim Tauziehen:</p>
            <ul style="margin: 10px 0 10px 20px;">
                <li>Team A zieht nach <strong>links</strong> mit 600 N</li>
                <li>Team B zieht nach <strong>rechts</strong> mit 500 N</li>
            </ul>

            <p>Kräfte in entgegengesetzte Richtungen werden <strong>subtrahiert</strong>:</p>

            <div class="merksatz">
                <div>Resultierende Kraft beim Tauziehen:</div>
                <div class="formel"><span class="fz">F</span><sub>res</sub> = <span class="fz">F</span><sub>A</sub> − <span class="fz">F</span><sub>B</sub> = 600 N − 500 N = 100 N</div>
                <div style="font-size: 0.9em;">(nach links, Team A gewinnt)</div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 2.1</span>
                </div>
                <p>Ein Auto wird von zwei Kräften beeinflusst:</p>
                <ul style="margin: 10px 0 10px 20px;">
                    <li>Motor schiebt nach <strong>vorne</strong>: <span class="fz">F</span><sub>Motor</sub> = 3000 N</li>
                    <li>Reibung bremst nach <strong>hinten</strong>: <span class="fz">F</span><sub>Reib</sub> = 1000 N</li>
                </ul>
                <p style="margin-top: 15px;">Wie groß ist die resultierende Kraft?</p>
                <p style="margin: 10px 0;">
                    <span class="fz">F</span><sub>res</sub> = 3000 N − 1000 N = <input type="text" inputmode="decimal" id="u2a" style="width:80px"> N
                </p>
                <button class="btn-check" onclick="checkStep2()">Prüfen</button>
                <div class="feedback correct" id="fb2-correct">
                    Richtig! Die resultierende Kraft ist 2000 N nach vorne. Das Auto beschleunigt!
                </div>
                <div class="feedback incorrect" id="fb2-incorrect">
                    Nicht ganz. Subtrahiere: 3000 − 1000 = ?
                </div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Kasten 1:</strong> Ergänze die Definition der resultierenden Kraft.
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(1)">← Zurück</button>
                <button onclick="nextStep(3)" id="btn-next2" disabled>Weiter zu Schritt 3 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 3: ERKENNTNIS 1 - KRAFT
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step3" style="display:none;">
            <h2>Schritt 3: Wie wirkt Kraft?</h2>

            <div class="info-box">
                <strong>Experiment:</strong> Ein Wagen (10 kg) wird mit unterschiedlicher Kraft geschoben.
            </div>

            <!-- Kraft-Simulation: gleiche Masse, verschiedene Kräfte -->
            <div class="sim-container">
                <div style="text-align: center; margin-bottom: 10px;">
                    <strong>Simulation:</strong> Gleiche Masse (10 kg), aber verschiedene Kräfte
                </div>
                <div class="sim-canvas-wrapper">
                    <canvas id="forceCanvas" width="600" height="200"></canvas>
                </div>
                <div style="display: flex; justify-content: center; gap: 10px; margin-top: 10px;">
                    <button onclick="startForceSim()">Schieben starten</button>
                    <button onclick="resetForceSim()">Zurücksetzen</button>
                </div>
                <div style="display: flex; justify-content: space-around; margin-top: 15px; font-size: 0.9em;">
                    <div style="text-align: center;">
                        <div style="color: #1565c0; font-weight: bold;">Schwaches Schieben</div>
                        <div><span class="fz">m</span> = 10 <span class="einheit">kg</span>, <span class="fz">F</span> = 20 <span class="einheit">N</span></div>
                        <div><strong><span class="fz">a</span> = 2 <span class="einheit">m/s²</span></strong></div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: #c62828; font-weight: bold;">Starkes Schieben</div>
                        <div><span class="fz">m</span> = 10 <span class="einheit">kg</span>, <span class="fz">F</span> = 50 <span class="einheit">N</span></div>
                        <div><strong><span class="fz">a</span> = 5 <span class="einheit">m/s²</span></strong></div>
                    </div>
                </div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 3.1: Beobachtung</span>
                </div>
                <p>Beobachte die Simulation und vervollständige:</p>
                <p style="margin: 15px 0; font-size: 1.1em;">
                    Je <strong>größer</strong> die Kraft, desto
                    <select id="u3-kraft">
                        <option value="">-- Auswählen --</option>
                        <option value="groesser">größer</option>
                        <option value="kleiner">kleiner</option>
                    </select>
                    die Beschleunigung.
                </p>
                <button class="btn-check" onclick="checkStep3Kraft()">Prüfen</button>
                <div class="feedback correct" id="fb3kraft-correct">
                    Richtig! Mehr Kraft bedeutet mehr Beschleunigung.
                </div>
                <div class="feedback incorrect" id="fb3kraft-incorrect">
                    Schau nochmal auf die Simulation. Welcher Wagen ist schneller?
                </div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Kasten 2a:</strong> Ergänze den Lückentext zur Kraft.
            </div>

            <div class="info-box wichtig" id="erkenntnis1" style="display:none;">
                <strong>Erkenntnis 1:</strong><br>
                Je größer die <strong>Kraft</strong>, desto <strong>größer</strong> die Beschleunigung.
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(2)">← Zurück</button>
                <button onclick="nextStep(4)" id="btn-next3" disabled>Weiter zu Schritt 4 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 4: ERKENNTNIS 2 - MASSE (Einkaufswagen)
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step4" style="display:none;">
            <h2>Schritt 4: Wie wirkt Masse?</h2>

            <div class="info-box">
                <strong>Experiment:</strong> Zwei Einkaufswagen werden mit der gleichen Kraft (50 N) geschoben.
            </div>

            <table>
                <tr>
                    <th>Wagen</th>
                    <th>Kraft</th>
                    <th>Masse</th>
                </tr>
                <tr>
                    <td>Leerer Wagen</td>
                    <td>50 N</td>
                    <td>10 kg</td>
                </tr>
                <tr>
                    <td>Voller Wagen</td>
                    <td>50 N</td>
                    <td>50 kg</td>
                </tr>
            </table>

            <!-- Einkaufswagen-Simulation: gleiche Kraft, verschiedene Massen -->
            <div class="sim-container">
                <div style="text-align: center; margin-bottom: 10px;">
                    <strong>Simulation:</strong> Gleiche Kraft (50 N), aber verschiedene Massen
                </div>
                <div class="sim-canvas-wrapper">
                    <canvas id="cartCanvas" width="600" height="200"></canvas>
                </div>
                <div style="display: flex; justify-content: center; gap: 10px; margin-top: 10px;">
                    <button onclick="startCartSim()">Schieben starten</button>
                    <button onclick="resetCartSim()">Zurücksetzen</button>
                </div>
                <div style="display: flex; justify-content: space-around; margin-top: 15px; font-size: 0.9em;">
                    <div style="text-align: center;">
                        <div style="color: #2a7a4b; font-weight: bold;">Leerer Wagen</div>
                        <div><span class="fz">m</span> = 10 <span class="einheit">kg</span>, <span class="fz">F</span> = 50 <span class="einheit">N</span></div>
                        <div><strong><span class="fz">a</span> = 5 <span class="einheit">m/s²</span></strong></div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: #c62828; font-weight: bold;">Voller Wagen</div>
                        <div><span class="fz">m</span> = 50 <span class="einheit">kg</span>, <span class="fz">F</span> = 50 <span class="einheit">N</span></div>
                        <div><strong><span class="fz">a</span> = 1 <span class="einheit">m/s²</span></strong></div>
                    </div>
                </div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 4.1: Beobachtung</span>
                </div>
                <p>Beobachte die Simulation und vervollständige:</p>
                <p style="margin: 15px 0; font-size: 1.1em;">
                    Je <strong>größer</strong> die Masse, desto
                    <select id="u4-masse">
                        <option value="">-- Auswählen --</option>
                        <option value="groesser">größer</option>
                        <option value="kleiner">kleiner</option>
                    </select>
                    die Beschleunigung.
                </p>
                <button class="btn-check" onclick="checkStep4Masse()">Prüfen</button>
                <div class="feedback correct" id="fb4masse-correct">
                    Richtig! Mehr Masse bedeutet weniger Beschleunigung.
                </div>
                <div class="feedback incorrect" id="fb4masse-incorrect">
                    Schau nochmal auf die Simulation. Welcher Wagen ist langsamer?
                </div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Kasten 2b:</strong> Ergänze den Lückentext zur Masse.
            </div>

            <div class="info-box wichtig" id="erkenntnis2" style="display:none;">
                <strong>Erkenntnis 2:</strong><br>
                Je größer die <strong>Masse</strong>, desto <strong>kleiner</strong> die Beschleunigung.
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(3)">← Zurück</button>
                <button onclick="nextStep(5)" id="btn-next4" disabled>Weiter zu Schritt 5 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 5: FORMEL F = m · a
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step5" style="display:none;">
            <h2>Schritt 5: Von der Beobachtung zur Formel</h2>

            <div class="info-box">
                <strong>Zusammenfassung der Erkenntnisse:</strong>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li>Mehr <strong>Kraft</strong> → mehr Beschleunigung</li>
                    <li>Mehr <strong>Masse</strong> → weniger Beschleunigung</li>
                </ul>
            </div>

            <p>Jetzt übersetzen wir diese Beobachtungen in <strong>mathematische Sprache</strong>:</p>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe: Proportionalität erkennen</span>
                </div>

                <p><strong>Aus Erkenntnis 1:</strong> Mehr Kraft → mehr Beschleunigung</p>
                <p style="margin-left: 20px;">
                    Mathematisch: a ~ F (a ist
                    <select id="prop1" onchange="checkProportionalitaet()">
                        <option value="">-- wählen --</option>
                        <option value="proportional">proportional</option>
                        <option value="umgekehrt">umgekehrt proportional</option>
                    </select>
                    zu F)
                </p>

                <p style="margin-top: 15px;"><strong>Aus Erkenntnis 2:</strong> Mehr Masse → weniger Beschleunigung</p>
                <p style="margin-left: 20px;">
                    Mathematisch: a ~ 1/m (a ist
                    <select id="prop2" onchange="checkProportionalitaet()">
                        <option value="">-- wählen --</option>
                        <option value="proportional">proportional</option>
                        <option value="umgekehrt">umgekehrt proportional</option>
                    </select>
                    zu m)
                </p>

                <div class="feedback correct" id="fb-prop-correct" style="display:none;">
                    Richtig! Jetzt können wir beide Erkenntnisse kombinieren.
                </div>
            </div>

            <div id="formel-herleitung" style="display:none; margin-top: 20px;">
                <div class="info-box wichtig">
                    <strong>Beide zusammen:</strong><br><br>
                    <div style="font-size: 1.2em; text-align: center;">
                        <span class="fz">a</span> ~ <span class="fz">F</span> &nbsp;&nbsp;und&nbsp;&nbsp; <span class="fz">a</span> ~ 1/<span class="fz">m</span> &nbsp;&nbsp;⟹&nbsp;&nbsp;
                        <strong><span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></strong>
                    </div>
                    <br>
                    Umgestellt nach <span class="fz">F</span>: &nbsp;&nbsp;<strong style="font-size: 1.3em;"><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></strong>
                </div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Kasten 2c:</strong> Ergänze die Proportionalitäten und leite die Formel her.
            </div>

            <div id="grundgesetz-box" style="display:none; margin-top: 20px;">
                <p>Newton fasste diese Beobachtungen in einer Formel zusammen:</p>

                <div class="merksatz">
                    <div>Das <strong>Grundgesetz der Mechanik</strong> (Newton):</div>
                    <div class="formel"><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></div>
                    <div style="font-size: 0.9em;">
                        <span class="fz">F</span> = Kraft in Newton (<span class="einheit">N</span>)<br>
                        <span class="fz">m</span> = Masse in Kilogramm (<span class="einheit">kg</span>)<br>
                        <span class="fz">a</span> = Beschleunigung in <span class="einheit">m/s²</span>
                    </div>
                </div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 5.1: Größen zuordnen</span>
                </div>
                <p>Ordne die Formelzeichen den richtigen Größen zu:</p>
                <div style="margin: 15px 0;">
                    <div style="display:flex;align-items:center;gap:10px;margin:10px 0;">
                        <span style="min-width:30px;font-weight:bold;">F</span> =
                        <select id="u5a" style="flex:1;max-width:200px;">
                            <option value="">-- Auswählen --</option>
                            <option value="kraft">Kraft</option>
                            <option value="masse">Masse</option>
                            <option value="beschleunigung">Beschleunigung</option>
                        </select>
                        <span>Einheit:</span>
                        <select id="u5a-unit">
                            <option value="">--</option>
                            <option value="N">N</option>
                            <option value="kg">kg</option>
                            <option value="ms2">m/s²</option>
                        </select>
                    </div>
                    <div style="display:flex;align-items:center;gap:10px;margin:10px 0;">
                        <span style="min-width:30px;font-weight:bold;">m</span> =
                        <select id="u5b" style="flex:1;max-width:200px;">
                            <option value="">-- Auswählen --</option>
                            <option value="kraft">Kraft</option>
                            <option value="masse">Masse</option>
                            <option value="beschleunigung">Beschleunigung</option>
                        </select>
                        <span>Einheit:</span>
                        <select id="u5b-unit">
                            <option value="">--</option>
                            <option value="N">N</option>
                            <option value="kg">kg</option>
                            <option value="ms2">m/s²</option>
                        </select>
                    </div>
                    <div style="display:flex;align-items:center;gap:10px;margin:10px 0;">
                        <span style="min-width:30px;font-weight:bold;">a</span> =
                        <select id="u5c" style="flex:1;max-width:200px;">
                            <option value="">-- Auswählen --</option>
                            <option value="kraft">Kraft</option>
                            <option value="masse">Masse</option>
                            <option value="beschleunigung">Beschleunigung</option>
                        </select>
                        <span>Einheit:</span>
                        <select id="u5c-unit">
                            <option value="">--</option>
                            <option value="N">N</option>
                            <option value="kg">kg</option>
                            <option value="ms2">m/s²</option>
                        </select>
                    </div>
                </div>
                <button class="btn-check" onclick="checkStep5Formel()">Prüfen</button>
                <div class="feedback correct" id="fb5formel-correct">
                    Perfekt! F = Kraft (N), m = Masse (kg), a = Beschleunigung (m/s²)
                </div>
                <div class="feedback incorrect" id="fb5formel-incorrect">
                    Denke daran: F steht für Force (Kraft), m für Masse, a für Acceleration (Beschleunigung).
                </div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Kasten 3:</strong> Übertrage die Formel F = m · a mit allen Größen und Einheiten.
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(4)">← Zurück</button>
                <button onclick="nextStep(6)" id="btn-next5" disabled>Weiter zu Schritt 6 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 6: FORMEL-DREIECK
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step6" style="display:none;">
            <h2>Schritt 6: Das Formel-Dreieck</h2>

            <div class="info-box">
                Mit dem <strong>Formel-Dreieck</strong> kannst du die Formel einfach umstellen, um F, m oder a zu berechnen.
            </div>

            <div class="dreieck-container">
                <svg width="300" height="220" viewBox="0 0 300 220">
                    <!-- Dreieck -->
                    <polygon points="150,20 50,180 250,180" fill="none" stroke="#2c5aa0" stroke-width="3"/>
                    <!-- Horizontale Trennlinie (nur innerhalb des Dreiecks) -->
                    <line x1="75" y1="100" x2="225" y2="100" stroke="#2c5aa0" stroke-width="2"/>
                    <!-- Vertikale Trennlinie unten -->
                    <line x1="150" y1="100" x2="150" y2="180" stroke="#2c5aa0" stroke-width="2"/>
                    <!-- Multiplikationszeichen auf vertikaler Linie -->
                    <text x="150" y="145" text-anchor="middle" font-size="18" font-weight="bold" fill="#2c5aa0">×</text>

                    <!-- Beschriftung -->
                    <text x="150" y="70" text-anchor="middle" font-size="28" font-weight="bold" fill="#c62828">F</text>
                    <text x="100" y="155" text-anchor="middle" font-size="28" font-weight="bold" fill="#1565c0">m</text>
                    <text x="200" y="155" text-anchor="middle" font-size="28" font-weight="bold" fill="#2a7a4b">a</text>

                    <!-- Legende -->
                    <text x="150" y="210" text-anchor="middle" font-size="14" fill="#666">Decke ab, was du suchst!</text>
                </svg>
            </div>

            <div class="info-box">
                <strong>So funktioniert's:</strong>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li>Du suchst <strong style="color:#c62828;"><span class="fz">F</span></strong>? → Decke <span class="fz">F</span> ab → <span class="fz">m</span> · <span class="fz">a</span> steht nebeneinander → <strong><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></strong></li>
                    <li>Du suchst <strong style="color:#1565c0;"><span class="fz">m</span></strong>? → Decke <span class="fz">m</span> ab → <span class="fz">F</span> über <span class="fz">a</span> → <strong><span class="fz">m</span> = <span class="fz">F</span> / <span class="fz">a</span></strong></li>
                    <li>Du suchst <strong style="color:#2a7a4b;"><span class="fz">a</span></strong>? → Decke <span class="fz">a</span> ab → <span class="fz">F</span> über <span class="fz">m</span> → <strong><span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></strong></li>
                </ul>
            </div>

            <div class="merksatz">
                <div>Die drei Formeln:</div>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; margin: 15px 0;">
                    <div style="padding: 10px;">
                        <div style="font-size: 1.3em; color:#c62828; font-weight: bold;"><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></div>
                    </div>
                    <div style="padding: 10px;">
                        <div style="font-size: 1.3em; color:#1565c0; font-weight: bold;"><span class="fz">m</span> = <span class="fz">F</span> / <span class="fz">a</span></div>
                    </div>
                    <div style="padding: 10px;">
                        <div style="font-size: 1.3em; color:#2a7a4b; font-weight: bold;"><span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></div>
                    </div>
                </div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 6.1: Formeln anwenden</span>
                </div>
                <p>Welche Formel brauchst du?</p>
                <div style="margin: 15px 0;">
                    <p><strong>a)</strong> Gegeben: <span class="fz">m</span> = 5 <span class="einheit">kg</span>, <span class="fz">a</span> = 4 <span class="einheit">m/s²</span>. Gesucht: <span class="fz">F</span></p>
                    <p style="margin: 5px 0;">
                        Formel: <span class="fz">F</span> =
                        <select id="u6-dreieck-a">
                            <option value="">--</option>
                            <option value="ma"><span class="fz">m</span> · <span class="fz">a</span></option>
                            <option value="fa"><span class="fz">F</span> / <span class="fz">a</span></option>
                            <option value="fm"><span class="fz">F</span> / <span class="fz">m</span></option>
                        </select>
                    </p>
                    <p style="margin-top: 15px;"><strong>b)</strong> Gegeben: <span class="fz">F</span> = 100 <span class="einheit">N</span>, <span class="fz">a</span> = 5 <span class="einheit">m/s²</span>. Gesucht: <span class="fz">m</span></p>
                    <p style="margin: 5px 0;">
                        Formel: <span class="fz">m</span> =
                        <select id="u6-dreieck-b">
                            <option value="">--</option>
                            <option value="ma"><span class="fz">m</span> · <span class="fz">a</span></option>
                            <option value="fa"><span class="fz">F</span> / <span class="fz">a</span></option>
                            <option value="fm"><span class="fz">F</span> / <span class="fz">m</span></option>
                        </select>
                    </p>
                    <p style="margin-top: 15px;"><strong>c)</strong> Gegeben: <span class="fz">F</span> = 200 <span class="einheit">N</span>, <span class="fz">m</span> = 10 <span class="einheit">kg</span>. Gesucht: <span class="fz">a</span></p>
                    <p style="margin: 5px 0;">
                        Formel: <span class="fz">a</span> =
                        <select id="u6-dreieck-c">
                            <option value="">--</option>
                            <option value="ma"><span class="fz">m</span> · <span class="fz">a</span></option>
                            <option value="fa"><span class="fz">F</span> / <span class="fz">a</span></option>
                            <option value="fm"><span class="fz">F</span> / <span class="fz">m</span></option>
                        </select>
                    </p>
                </div>
                <button class="btn-check" onclick="checkStep6Dreieck()">Prüfen</button>
                <div class="feedback correct" id="fb6dreieck-correct">
                    Perfekt! Du hast das Formel-Dreieck verstanden!
                </div>
                <div class="feedback incorrect" id="fb6dreieck-incorrect">
                    Schau nochmal aufs Dreieck. Decke die gesuchte Größe ab!
                </div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Kasten 4:</strong> Zeichne das Formel-Dreieck und schreibe alle drei Formeln auf.
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(5)">← Zurück</button>
                <button onclick="nextStep(7)" id="btn-next6" disabled>Weiter zu Schritt 7 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 7: RECHENÜBUNGEN F BERECHNEN
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step7" style="display:none;">
            <h2>Schritt 7: Kraft berechnen</h2>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 6.1 ★</span>
                    <span class="uebung-punkte">leicht</span>
                </div>
                <p>Ein Skateboard (<span class="fz">m</span> = 5 <span class="einheit">kg</span>) wird mit <span class="fz">a</span> = 2 <span class="einheit">m/s²</span> beschleunigt.</p>
                <p style="margin-top: 10px;"><strong>a)</strong> Welche Formel brauchst du?</p>
                <p style="margin: 5px 0;">
                    <select id="u6-1a">
                        <option value="">-- Auswählen --</option>
                        <option value="fma"><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></option>
                        <option value="mfa"><span class="fz">m</span> = <span class="fz">F</span> / <span class="fz">a</span></option>
                        <option value="afm"><span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></option>
                    </select>
                </p>
                <p style="margin-top: 10px;"><strong>b)</strong> Rechnung: <span class="fz">F</span> = 5 <span class="einheit">kg</span> · 2 <span class="einheit">m/s²</span> = <input type="text" inputmode="decimal" id="u6-1b" style="width:60px"> <span class="einheit">N</span></p>
                <button class="btn-check" onclick="checkStep6_1()">Prüfen</button>
                <div class="feedback correct" id="fb6-1-correct">Richtig! <span class="fz">F</span> = 10 <span class="einheit">N</span></div>
                <div class="feedback incorrect" id="fb6-1-incorrect">Rechne: 5 · 2 = ?</div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 6.2 ★</span>
                    <span class="uebung-punkte">leicht</span>
                </div>
                <p>Ein Fahrrad (<span class="fz">m</span> = 20 <span class="einheit">kg</span>) wird mit <span class="fz">a</span> = 5 <span class="einheit">m/s²</span> beschleunigt.</p>
                <p style="margin-top: 10px;"><span class="fz">F</span> = <input type="text" inputmode="decimal" id="u6-2" style="width:60px"> <span class="einheit">N</span></p>
                <button class="btn-check" onclick="checkStep6_2()">Prüfen</button>
                <div class="feedback correct" id="fb6-2-correct">Super! <span class="fz">F</span> = 100 <span class="einheit">N</span></div>
                <div class="feedback incorrect" id="fb6-2-incorrect">Rechne: 20 · 5 = ?</div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 6.3 ★★</span>
                    <span class="uebung-punkte">mittel</span>
                </div>
                <p>Ein Auto (<span class="fz">m</span> = 1000 <span class="einheit">kg</span>) beschleunigt mit <span class="fz">a</span> = 4 <span class="einheit">m/s²</span>.</p>
                <p style="margin-top: 10px;"><span class="fz">F</span> = <input type="text" inputmode="decimal" id="u6-3" style="width:80px"> <span class="einheit">N</span></p>
                <button class="btn-check" onclick="checkStep6_3()">Prüfen</button>
                <div class="feedback correct" id="fb6-3-correct">Klasse! <span class="fz">F</span> = 4000 <span class="einheit">N</span> (das ist viel Kraft!)</div>
                <div class="feedback incorrect" id="fb6-3-incorrect">Rechne: 1000 · 4 = ?</div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Aufgabe 1:</strong> Bearbeite die Aufgaben zur Kraftberechnung auf dem Arbeitsblatt.
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(6)">← Zurück</button>
                <button onclick="nextStep(8)" id="btn-next7" disabled>Weiter zu Schritt 8 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 8: MASSE BERECHNEN
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step8" style="display:none;">
            <h2>Schritt 8: Masse berechnen</h2>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 7.1 ★</span>
                    <span class="uebung-punkte">leicht</span>
                </div>
                <p>Eine Kraft von <span class="fz">F</span> = 50 <span class="einheit">N</span> beschleunigt einen Koffer mit <span class="fz">a</span> = 5 <span class="einheit">m/s²</span>.</p>
                <p style="margin-top: 10px;"><strong>a)</strong> Welche Formel brauchst du?</p>
                <p style="margin: 5px 0;">
                    <select id="u7-1a">
                        <option value="">-- Auswählen --</option>
                        <option value="fma"><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></option>
                        <option value="mfa"><span class="fz">m</span> = <span class="fz">F</span> / <span class="fz">a</span></option>
                        <option value="afm"><span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></option>
                    </select>
                </p>
                <p style="margin-top: 10px;"><strong>b)</strong> Rechnung: <span class="fz">m</span> = 50 <span class="einheit">N</span> / 5 <span class="einheit">m/s²</span> = <input type="text" inputmode="decimal" id="u7-1b" style="width:60px"> <span class="einheit">kg</span></p>
                <button class="btn-check" onclick="checkStep7_1()">Prüfen</button>
                <div class="feedback correct" id="fb7-1-correct">Richtig! <span class="fz">m</span> = 10 <span class="einheit">kg</span></div>
                <div class="feedback incorrect" id="fb7-1-incorrect">Rechne: 50 /5 = ?</div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 7.2 ★★</span>
                    <span class="uebung-punkte">mittel</span>
                </div>
                <p>Eine Kraft von <span class="fz">F</span> = 200 <span class="einheit">N</span> beschleunigt ein Objekt mit <span class="fz">a</span> = 10 <span class="einheit">m/s²</span>.</p>
                <p style="margin-top: 10px;"><span class="fz">m</span> = <input type="text" inputmode="decimal" id="u7-2" style="width:60px"> <span class="einheit">kg</span></p>
                <button class="btn-check" onclick="checkStep7_2()">Prüfen</button>
                <div class="feedback correct" id="fb7-2-correct">Super! <span class="fz">m</span> = 20 <span class="einheit">kg</span></div>
                <div class="feedback incorrect" id="fb7-2-incorrect">Rechne: 200 /10 = ?</div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 7.3 ★★</span>
                    <span class="uebung-punkte">mittel</span>
                </div>
                <p><span class="fz">F</span> = 400 <span class="einheit">N</span>, <span class="fz">a</span> = 8 <span class="einheit">m/s²</span>. Berechne <span class="fz">m</span>.</p>
                <p style="margin-top: 10px;"><span class="fz">m</span> = <input type="text" inputmode="decimal" id="u7-3" style="width:60px"> <span class="einheit">kg</span></p>
                <button class="btn-check" onclick="checkStep7_3()">Prüfen</button>
                <div class="feedback correct" id="fb7-3-correct">Klasse! <span class="fz">m</span> = 50 <span class="einheit">kg</span></div>
                <div class="feedback incorrect" id="fb7-3-incorrect">Rechne: 400 /8 = ?</div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Aufgabe 2:</strong> Bearbeite die Aufgaben zur Masseberechnung auf dem Arbeitsblatt.
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(7)">← Zurück</button>
                <button onclick="nextStep(9)" id="btn-next8" disabled>Weiter zu Schritt 9 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 9: BESCHLEUNIGUNG BERECHNEN
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step9" style="display:none;">
            <h2>Schritt 9: Beschleunigung berechnen</h2>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 8.1 ★</span>
                    <span class="uebung-punkte">leicht</span>
                </div>
                <p>Ein Ball (<span class="fz">m</span> = 2 <span class="einheit">kg</span>) wird mit <span class="fz">F</span> = 10 <span class="einheit">N</span> angestoßen.</p>
                <p style="margin-top: 10px;"><strong>a)</strong> Welche Formel brauchst du?</p>
                <p style="margin: 5px 0;">
                    <select id="u8-1a">
                        <option value="">-- Auswählen --</option>
                        <option value="fma"><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></option>
                        <option value="mfa"><span class="fz">m</span> = <span class="fz">F</span> / <span class="fz">a</span></option>
                        <option value="afm"><span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></option>
                    </select>
                </p>
                <p style="margin-top: 10px;"><strong>b)</strong> Rechnung: <span class="fz">a</span> = 10 <span class="einheit">N</span> / 2 <span class="einheit">kg</span> = <input type="text" inputmode="decimal" id="u8-1b" style="width:60px"> <span class="einheit">m/s²</span></p>
                <button class="btn-check" onclick="checkStep8_1()">Prüfen</button>
                <div class="feedback correct" id="fb8-1-correct">Richtig! <span class="fz">a</span> = 5 <span class="einheit">m/s²</span></div>
                <div class="feedback incorrect" id="fb8-1-incorrect">Rechne: 10 /2 = ?</div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 8.2 ★★</span>
                    <span class="uebung-punkte">mittel</span>
                </div>
                <p><span class="fz">F</span> = 100 <span class="einheit">N</span>, <span class="fz">m</span> = 20 <span class="einheit">kg</span>. Berechne <span class="fz">a</span>.</p>
                <p style="margin-top: 10px;"><span class="fz">a</span> = <input type="text" inputmode="decimal" id="u8-2" style="width:60px"> <span class="einheit">m/s²</span></p>
                <button class="btn-check" onclick="checkStep8_2()">Prüfen</button>
                <div class="feedback correct" id="fb8-2-correct">Super! <span class="fz">a</span> = 5 <span class="einheit">m/s²</span></div>
                <div class="feedback incorrect" id="fb8-2-incorrect">Rechne: 100 /20 = ?</div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 8.3 ★★★</span>
                    <span class="uebung-punkte">schwer</span>
                </div>
                <p>Ein Motorrad (<span class="fz">m</span> = 200 <span class="einheit">kg</span>) wird von <span class="fz">F</span> = 1000 <span class="einheit">N</span> beschleunigt.</p>
                <p style="margin-top: 10px;"><span class="fz">a</span> = <input type="text" inputmode="decimal" id="u8-3" style="width:60px"> <span class="einheit">m/s²</span></p>
                <button class="btn-check" onclick="checkStep8_3()">Prüfen</button>
                <div class="feedback correct" id="fb8-3-correct">Klasse! <span class="fz">a</span> = 5 <span class="einheit">m/s²</span> (Tipp: 1000 / 200 = 10 / 2 = 5)</div>
                <div class="feedback incorrect" id="fb8-3-incorrect">Tipp: 1000 /200 = 10 /2 = ?</div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Aufgabe 3:</strong> Bearbeite die Aufgaben zur Beschleunigungsberechnung auf dem Arbeitsblatt.
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(8)">← Zurück</button>
                <button onclick="nextStep(10)" id="btn-next9" disabled>Weiter zu Schritt 10 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 10: GEMISCHTE AUFGABEN
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step10" style="display:none;">
            <h2>Schritt 10: Gemischte Aufgaben</h2>

            <div class="info-box">
                Jetzt kommt alles zusammen! Entscheide selbst, welche Formel du brauchst.
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 9.1 ★★</span>
                </div>
                <p>Ein Einkaufswagen (<span class="fz">m</span> = 25 <span class="einheit">kg</span>) wird mit <span class="fz">a</span> = 2 <span class="einheit">m/s²</span> beschleunigt.</p>
                <p style="margin-top: 10px;"><strong>Gesucht:</strong> F</p>
                <p style="margin: 10px 0;">
                    Formel: <select id="u9-1a" style="width:100px;">
                        <option value="">--</option>
                        <option value="fma"><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></option>
                        <option value="mfa"><span class="fz">m</span> = <span class="fz">F</span> / <span class="fz">a</span></option>
                        <option value="afm"><span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></option>
                    </select>
                </p>
                <p><span class="fz">F</span> = <input type="text" inputmode="decimal" id="u9-1b" style="width:60px"> <span class="einheit">N</span></p>
                <button class="btn-check" onclick="checkStep9_1()">Prüfen</button>
                <div class="feedback correct" id="fb9-1-correct">Perfekt! <span class="fz">F</span> = 25 · 2 = 50 <span class="einheit">N</span></div>
                <div class="feedback incorrect" id="fb9-1-incorrect">Du suchst <span class="fz">F</span>, also <span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 9.2 ★★</span>
                </div>
                <p>Mit <span class="fz">F</span> = 80 <span class="einheit">N</span> wird ein Objekt auf <span class="fz">a</span> = 4 <span class="einheit">m/s²</span> beschleunigt.</p>
                <p style="margin-top: 10px;"><strong>Gesucht:</strong> m</p>
                <p><span class="fz">m</span> = <input type="text" inputmode="decimal" id="u9-2" style="width:60px"> <span class="einheit">kg</span></p>
                <button class="btn-check" onclick="checkStep9_2()">Prüfen</button>
                <div class="feedback correct" id="fb9-2-correct">Richtig! <span class="fz">m</span> = 80 / 4 = 20 <span class="einheit">kg</span></div>
                <div class="feedback incorrect" id="fb9-2-incorrect"><span class="fz">m</span> = <span class="fz">F</span> / <span class="fz">a</span> = 80 / 4 = ?</div>
            </div>

            <div class="uebung">
                <div class="uebung-header">
                    <span class="uebung-titel">Aufgabe 9.3 ★★★</span>
                </div>
                <p>Zwei Kräfte wirken auf ein Auto (<span class="fz">m</span> = 500 <span class="einheit">kg</span>):</p>
                <ul style="margin: 10px 0 10px 20px;">
                    <li>Motor: <span class="fz">F</span><sub>1</sub> = 3000 <span class="einheit">N</span> (nach vorne)</li>
                    <li>Reibung: <span class="fz">F</span><sub>2</sub> = 500 <span class="einheit">N</span> (nach hinten)</li>
                </ul>
                <p><strong>a)</strong> Resultierende Kraft: <span class="fz">F</span><sub>res</sub> = <input type="text" inputmode="decimal" id="u9-3a" style="width:80px"> <span class="einheit">N</span></p>
                <p><strong>b)</strong> Beschleunigung: <span class="fz">a</span> = <input type="text" inputmode="decimal" id="u9-3b" style="width:60px"> <span class="einheit">m/s²</span></p>
                <button class="btn-check" onclick="checkStep9_3()">Prüfen</button>
                <div class="feedback correct" id="fb9-3-correct">Ausgezeichnet! <span class="fz">F</span><sub>res</sub> = 2500 <span class="einheit">N</span>, <span class="fz">a</span> = 2500 / 500 = 5 <span class="einheit">m/s²</span></div>
                <div class="feedback incorrect" id="fb9-3-incorrect"><span class="fz">F</span><sub>res</sub> = 3000 − 500 = 2500 <span class="einheit">N</span>, dann <span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></div>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Aufgaben 4 und 5:</strong> Bearbeite die Aufgaben zur resultierenden Kraft und den Transfer (Tauziehen).
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(9)">← Zurück</button>
                <button onclick="nextStep(11)" id="btn-next10" disabled>Weiter zu Schritt 11 →</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════════
             SCHRITT 11: ZUSAMMENFASSUNG
             ═══════════════════════════════════════════════════════════════════════ -->
        <div class="section" id="step11" style="display:none;">
            <h2>Schritt 11: Zusammenfassung</h2>

            <div class="merksatz">
                <div style="font-size: 1.1em; margin-bottom: 10px;"><strong>Das Grundgesetz der Mechanik</strong></div>
                <div class="formel"><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></div>
                <table style="margin: 15px auto; max-width: 400px;">
                    <tr><th>Größe</th><th>Formelzeichen</th><th>Einheit</th></tr>
                    <tr><td>Kraft</td><td><span class="fz">F</span></td><td><span class="einheit">N</span></td></tr>
                    <tr><td>Masse</td><td><span class="fz">m</span></td><td><span class="einheit">kg</span></td></tr>
                    <tr><td>Beschleunigung</td><td><span class="fz">a</span></td><td><span class="einheit">m/s²</span></td></tr>
                </table>
            </div>

            <div class="info-box">
                <strong>Die drei Formeln:</strong>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li><strong><span class="fz">F</span> = <span class="fz">m</span> · <span class="fz">a</span></strong> → Kraft berechnen</li>
                    <li><strong><span class="fz">m</span> = <span class="fz">F</span> / <span class="fz">a</span></strong> → Masse berechnen</li>
                    <li><strong><span class="fz">a</span> = <span class="fz">F</span> / <span class="fz">m</span></strong> → Beschleunigung berechnen</li>
                </ul>
            </div>

            <div class="info-box">
                <strong>Resultierende Kraft:</strong>
                <p style="margin-top: 10px;">Die Summe aller Kräfte auf einen Körper. Entgegengesetzte Kräfte werden subtrahiert.</p>
            </div>

            <div class="hefter-hinweis">
                <strong>AB Kontrolle:</strong> Prüfe, dass alle 4 Kästen und alle 5 Aufgaben vollständig bearbeitet sind!
            </div>

            <div style="background: #e8f5e9; border: 2px solid #2a7a4b; padding: 20px; margin: 20px 0; text-align: center;">
                <h3 style="color: #2a7a4b; margin-bottom: 10px;">Geschafft!</h3>
                <p>Du hast den Lernpfad abgeschlossen.</p>
                <p style="margin-top: 10px;"><strong>Jetzt folgt der Test (45 Min).</strong></p>
            </div>

            <div class="nav-buttons">
                <button onclick="prevStep(10)">← Zurück</button>
                <span></span>
            </div>
        </div>

    </div>

    <script>
    // ===== KONFIGURATION =====
    var STORAGE_KEY = 'lp-01a-grundgesetz';
    var currentStep = 1;
    var totalSteps = 11;
    var stepsCompleted = {};
    var visitedSteps = [];

    // ===== DEZIMALKOMMA-NORMALISIERUNG (DIN-konform) =====
    // Akzeptiert sowohl Komma als auch Punkt als Dezimaltrenner
    function parseNumber(value) {
        if (value === '' || value === null || value === undefined) return NaN;
        // Komma durch Punkt ersetzen für parseFloat
        var normalized = String(value).replace(',', '.');
        return parseFloat(normalized);
    }

    // ===== STEP-INDICATORS =====
    function generateStepIndicators() {
        var container = document.getElementById('stepIndicators');
        container.innerHTML = '';
        for (var i = 1; i <= totalSteps; i++) {
            var dot = document.createElement('div');
            dot.className = 'step-dot';
            if (i === currentStep) dot.classList.add('current');
            if (visitedSteps.indexOf(i) !== -1) dot.classList.add('completed');
            dot.textContent = i;
            dot.setAttribute('data-step', i);
            dot.onclick = function() {
                var stepIndex = parseInt(this.getAttribute('data-step'));
                goToStep(stepIndex);
            };
            container.appendChild(dot);
        }
    }

    function updateStepIndicators() {
        var dots = document.querySelectorAll('.step-dot');
        for (var i = 0; i < dots.length; i++) {
            var stepNum = i + 1;
            dots[i].classList.remove('current');
            if (stepNum === currentStep) {
                dots[i].classList.add('current');
            }
            if (visitedSteps.indexOf(stepNum) !== -1) {
                dots[i].classList.add('completed');
            }
        }
    }

    // ===== NAVIGATION =====
    function goToStep(n) {
        // Aktuellen Step als besucht markieren
        if (visitedSteps.indexOf(currentStep) === -1) {
            visitedSteps.push(currentStep);
        }
        document.getElementById('step' + currentStep).style.display = 'none';
        document.getElementById('step' + n).style.display = 'block';
        currentStep = n;
        updateProgress();
        updateStepIndicators();
        saveProgress();
        window.scrollTo(0, 0);
    }

    function nextStep(n) {
        goToStep(n);
    }

    function prevStep(n) {
        goToStep(n);
    }

    function updateProgress() {
        var percent = (currentStep / totalSteps) * 100;
        document.getElementById('progressFill').style.width = percent + '%';
        document.getElementById('progressText').textContent = 'Schritt ' + currentStep + ' von ' + totalSteps;
    }

    function enableNext(step) {
        var btn = document.getElementById('btn-next' + step);
        if (btn) btn.disabled = false;
        stepsCompleted[step] = true;
        saveProgress();
    }

    // ===== PERSISTENCE =====
    function saveProgress() {
        var data = {
            currentStep: currentStep,
            stepsCompleted: stepsCompleted,
            visitedSteps: visitedSteps,
            inputs: collectInputs()
        };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function loadProgress() {
        var saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
            var data = JSON.parse(saved);
            if (data.visitedSteps) {
                visitedSteps = data.visitedSteps;
            }
            if (data.currentStep) {
                for (var i = 1; i <= totalSteps; i++) {
                    document.getElementById('step' + i).style.display = 'none';
                }
                currentStep = data.currentStep;
                document.getElementById('step' + currentStep).style.display = 'block';
            }
            if (data.stepsCompleted) {
                stepsCompleted = data.stepsCompleted;
                for (var step in stepsCompleted) {
                    if (stepsCompleted[step]) enableNext(parseInt(step));
                }
            }
            if (data.inputs) restoreInputs(data.inputs);
            updateProgress();
            updateStepIndicators();
        }
    }

    function collectInputs() {
        var inputs = {};
        var allInputs = document.querySelectorAll('input, select');
        for (var i = 0; i < allInputs.length; i++) {
            if (allInputs[i].id) {
                inputs[allInputs[i].id] = allInputs[i].value;
            }
        }
        return inputs;
    }

    function restoreInputs(inputs) {
        for (var id in inputs) {
            var el = document.getElementById(id);
            if (el) el.value = inputs[id];
        }
    }

    // ===== CHECK FUNCTIONS =====
    function showFeedback(id, correct) {
        document.getElementById(id + '-correct').classList.toggle('show', correct);
        document.getElementById(id + '-incorrect').classList.toggle('show', !correct);
    }

    function checkStep1() {
        var a = parseNumber(document.getElementById('u1a').value);
        var b = parseNumber(document.getElementById('u1b').value);
        var c = document.getElementById('u1c').value;
        if (a === 600 && b === 500 && c === 'A') {
            showFeedback('fb1', true);
            enableNext(1);
        } else {
            showFeedback('fb1', false);
        }
        saveProgress();
    }

    function checkStep2() {
        var a = parseNumber(document.getElementById('u2a').value);
        if (a === 2000) {
            showFeedback('fb2', true);
            enableNext(2);
        } else {
            showFeedback('fb2', false);
        }
        saveProgress();
    }

    // Step 3: Kraft-Erkenntnis
    function checkStep3Kraft() {
        var val = document.getElementById('u3-kraft').value;
        if (val === 'groesser') {
            showFeedback('fb3kraft', true);
            document.getElementById('erkenntnis1').style.display = 'block';
            enableNext(3);
        } else {
            showFeedback('fb3kraft', false);
        }
        saveProgress();
    }

    // Step 4: Masse-Erkenntnis
    function checkStep4Masse() {
        var val = document.getElementById('u4-masse').value;
        if (val === 'kleiner') {
            showFeedback('fb4masse', true);
            document.getElementById('erkenntnis2').style.display = 'block';
            enableNext(4);
        } else {
            showFeedback('fb4masse', false);
        }
        saveProgress();
    }

    // Step 5: Proportionalität erkennen (Kasten 2c)
    function checkProportionalitaet() {
        var prop1 = document.getElementById('prop1').value;
        var prop2 = document.getElementById('prop2').value;

        if (prop1 === 'proportional' && prop2 === 'umgekehrt') {
            document.getElementById('fb-prop-correct').style.display = 'block';
            document.getElementById('formel-herleitung').style.display = 'block';
            // Nach kurzer Verzögerung das Grundgesetz einblenden
            setTimeout(function() {
                document.getElementById('grundgesetz-box').style.display = 'block';
            }, 1000);
            saveProgress();
        }
    }

    // Step 5: Formel F = m · a (Größen zuordnen)
    function checkStep5Formel() {
        var a = document.getElementById('u5a').value;
        var aUnit = document.getElementById('u5a-unit').value;
        var b = document.getElementById('u5b').value;
        var bUnit = document.getElementById('u5b-unit').value;
        var c = document.getElementById('u5c').value;
        var cUnit = document.getElementById('u5c-unit').value;
        if (a === 'kraft' && aUnit === 'N' && b === 'masse' && bUnit === 'kg' && c === 'beschleunigung' && cUnit === 'ms2') {
            showFeedback('fb5formel', true);
            enableNext(5);
        } else {
            showFeedback('fb5formel', false);
        }
        saveProgress();
    }

    // Step 6: Formel-Dreieck
    function checkStep6Dreieck() {
        var a = document.getElementById('u6-dreieck-a').value;
        var b = document.getElementById('u6-dreieck-b').value;
        var c = document.getElementById('u6-dreieck-c').value;
        if (a === 'ma' && b === 'fa' && c === 'fm') {
            showFeedback('fb6dreieck', true);
            enableNext(6);
        } else {
            showFeedback('fb6dreieck', false);
        }
        saveProgress();
    }

    // Step 7: Kraft berechnen (uses u6-* IDs from old HTML)
    // Navigation wird nach ERSTER richtiger Aufgabe freigeschaltet (Test-Material schonen)
    function checkStep6_1() {
        var a = document.getElementById('u6-1a').value;
        var b = parseNumber(document.getElementById('u6-1b').value);
        if (a === 'fma' && b === 10) {
            showFeedback('fb6-1', true);
            enableNext(7); // Nach erster richtiger Antwort freischalten
        } else {
            showFeedback('fb6-1', false);
        }
        saveProgress();
    }
    function checkStep6_2() {
        var val = parseNumber(document.getElementById('u6-2').value);
        if (val === 100) {
            showFeedback('fb6-2', true);
            enableNext(7);
        } else {
            showFeedback('fb6-2', false);
        }
        saveProgress();
    }
    function checkStep6_3() {
        var val = parseNumber(document.getElementById('u6-3').value);
        if (val === 4000) {
            showFeedback('fb6-3', true);
            enableNext(7);
        } else {
            showFeedback('fb6-3', false);
        }
        saveProgress();
    }

    // Step 8: Masse berechnen (uses u7-* IDs from old HTML)
    // Navigation wird nach ERSTER richtiger Aufgabe freigeschaltet (Test-Material schonen)
    function checkStep7_1() {
        var a = document.getElementById('u7-1a').value;
        var b = parseNumber(document.getElementById('u7-1b').value);
        if (a === 'mfa' && b === 10) {
            showFeedback('fb7-1', true);
            enableNext(8);
        } else {
            showFeedback('fb7-1', false);
        }
        saveProgress();
    }
    function checkStep7_2() {
        var val = parseNumber(document.getElementById('u7-2').value);
        if (val === 20) {
            showFeedback('fb7-2', true);
            enableNext(8);
        } else {
            showFeedback('fb7-2', false);
        }
        saveProgress();
    }
    function checkStep7_3() {
        var val = parseNumber(document.getElementById('u7-3').value);
        if (val === 50) {
            showFeedback('fb7-3', true);
            enableNext(8);
        } else {
            showFeedback('fb7-3', false);
        }
        saveProgress();
    }

    // Step 9: Beschleunigung berechnen (uses u8-* IDs from old HTML)
    // Navigation wird nach ERSTER richtiger Aufgabe freigeschaltet (Test-Material schonen)
    function checkStep8_1() {
        var a = document.getElementById('u8-1a').value;
        var b = parseNumber(document.getElementById('u8-1b').value);
        if (a === 'afm' && b === 5) {
            showFeedback('fb8-1', true);
            enableNext(9);
        } else {
            showFeedback('fb8-1', false);
        }
        saveProgress();
    }
    function checkStep8_2() {
        var val = parseNumber(document.getElementById('u8-2').value);
        if (val === 5) {
            showFeedback('fb8-2', true);
            enableNext(9);
        } else {
            showFeedback('fb8-2', false);
        }
        saveProgress();
    }
    function checkStep8_3() {
        var val = parseNumber(document.getElementById('u8-3').value);
        if (val === 5) {
            showFeedback('fb8-3', true);
            enableNext(9);
        } else {
            showFeedback('fb8-3', false);
        }
        saveProgress();
    }

    // Step 10: Gemischte Aufgaben (uses u9-* IDs from old HTML)
    // Navigation wird nach ERSTER richtiger Aufgabe freigeschaltet (Test-Material schonen)
    function checkStep9_1() {
        var a = document.getElementById('u9-1a').value;
        var b = parseNumber(document.getElementById('u9-1b').value);
        if (a === 'fma' && b === 50) {
            showFeedback('fb9-1', true);
            enableNext(10);
        } else {
            showFeedback('fb9-1', false);
        }
        saveProgress();
    }
    function checkStep9_2() {
        var val = parseNumber(document.getElementById('u9-2').value);
        if (val === 20) {
            showFeedback('fb9-2', true);
            enableNext(10);
        } else {
            showFeedback('fb9-2', false);
        }
        saveProgress();
    }
    function checkStep9_3() {
        var a = parseNumber(document.getElementById('u9-3a').value);
        var b = parseNumber(document.getElementById('u9-3b').value);
        if (a === 2500 && b === 5) {
            showFeedback('fb9-3', true);
            enableNext(10);
        } else {
            showFeedback('fb9-3', false);
        }
        saveProgress();
    }

    // ===== KRAFT-SIMULATION (Schritt 3) =====
    var forceCanvas, forceCtx;
    var forceAnimating = false;
    var forceAnimId = null;
    var force1X = 50, force2X = 50;
    var force1Vel = 0, force2Vel = 0;

    function initForceSim() {
        forceCanvas = document.getElementById('forceCanvas');
        if (!forceCanvas) return;
        forceCtx = forceCanvas.getContext('2d');
        drawForceBoxes();
    }

    function drawForceBoxes() {
        if (!forceCtx) return;
        forceCtx.clearRect(0, 0, 600, 200);

        // Boden obere Spur (schwache Kraft)
        forceCtx.fillStyle = '#e3f2fd';
        forceCtx.fillRect(0, 40, 600, 60);
        forceCtx.strokeStyle = '#1565c0';
        forceCtx.lineWidth = 2;
        forceCtx.beginPath();
        forceCtx.moveTo(0, 100);
        forceCtx.lineTo(600, 100);
        forceCtx.stroke();

        // Boden untere Spur (starke Kraft)
        forceCtx.fillStyle = '#ffebee';
        forceCtx.fillRect(0, 110, 600, 60);
        forceCtx.strokeStyle = '#c62828';
        forceCtx.beginPath();
        forceCtx.moveTo(0, 170);
        forceCtx.lineTo(600, 170);
        forceCtx.stroke();

        // Box oben (schwache Kraft, 10 kg, 20 N)
        forceCtx.fillStyle = '#1565c0';
        forceCtx.fillRect(force1X, 55, 45, 40);
        forceCtx.beginPath();
        forceCtx.arc(force1X + 12, 98, 6, 0, Math.PI * 2);
        forceCtx.arc(force1X + 33, 98, 6, 0, Math.PI * 2);
        forceCtx.fill();
        forceCtx.fillStyle = 'white';
        forceCtx.font = 'bold 12px sans-serif';
        forceCtx.textAlign = 'center';
        forceCtx.fillText('10 kg', force1X + 22, 80);

        // Box unten (starke Kraft, 10 kg, 50 N)
        forceCtx.fillStyle = '#c62828';
        forceCtx.fillRect(force2X, 120, 45, 40);
        forceCtx.beginPath();
        forceCtx.arc(force2X + 12, 163, 6, 0, Math.PI * 2);
        forceCtx.arc(force2X + 33, 163, 6, 0, Math.PI * 2);
        forceCtx.fill();
        forceCtx.fillStyle = 'white';
        forceCtx.font = 'bold 12px sans-serif';
        forceCtx.fillText('10 kg', force2X + 22, 145);

        // Kraftpfeil oben (kurz = 20 N)
        var arrow1Len = 30;
        forceCtx.strokeStyle = '#1565c0';
        forceCtx.lineWidth = 3;
        forceCtx.beginPath();
        forceCtx.moveTo(force1X + 50, 75);
        forceCtx.lineTo(force1X + 50 + arrow1Len, 75);
        forceCtx.stroke();
        drawForceArrowHead(forceCtx, force1X + 50 + arrow1Len, 75, '#1565c0');
        forceCtx.fillStyle = '#1565c0';
        forceCtx.font = 'bold 11px sans-serif';
        forceCtx.fillText('20 N', force1X + 50 + arrow1Len/2, 65);

        // Kraftpfeil unten (lang = 50 N)
        var arrow2Len = 75;
        forceCtx.strokeStyle = '#c62828';
        forceCtx.lineWidth = 4;
        forceCtx.beginPath();
        forceCtx.moveTo(force2X + 50, 140);
        forceCtx.lineTo(force2X + 50 + arrow2Len, 140);
        forceCtx.stroke();
        drawForceArrowHead(forceCtx, force2X + 50 + arrow2Len, 140, '#c62828');
        forceCtx.fillStyle = '#c62828';
        forceCtx.font = 'bold 11px sans-serif';
        forceCtx.fillText('50 N', force2X + 50 + arrow2Len/2, 130);
    }

    function drawForceArrowHead(ctx, x, y, color) {
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x - 8, y - 5);
        ctx.lineTo(x - 8, y + 5);
        ctx.closePath();
        ctx.fill();
    }

    function startForceSim() {
        if (forceAnimating) return;
        forceAnimating = true;
        force1X = 50;
        force2X = 50;
        force1Vel = 0;
        force2Vel = 0;
        animateForce();
    }

    function animateForce() {
        // a = F/m
        // Schwache Kraft: a = 20/10 = 2 m/s²
        // Starke Kraft: a = 50/10 = 5 m/s²
        var accel1 = 2;
        var accel2 = 5;
        var dt = 0.016;

        force1Vel += accel1 * dt;
        force2Vel += accel2 * dt;
        force1X += force1Vel * 8;
        force2X += force2Vel * 8;

        drawForceBoxes();

        if (force2X < 450 && forceAnimating) {
            forceAnimId = requestAnimationFrame(animateForce);
        } else {
            forceAnimating = false;
        }
    }

    function resetForceSim() {
        forceAnimating = false;
        if (forceAnimId) cancelAnimationFrame(forceAnimId);
        force1X = 50;
        force2X = 50;
        force1Vel = 0;
        force2Vel = 0;
        drawForceBoxes();
    }

    // ===== EINKAUFSWAGEN-SIMULATION (Schritt 4) =====
    var cartCanvas, cartCtx;
    var cartAnimating = false;
    var cartAnimId = null;
    var cart1X = 50, cart2X = 50;
    var cart1Vel = 0, cart2Vel = 0;

    function initCartSim() {
        cartCanvas = document.getElementById('cartCanvas');
        if (!cartCanvas) return;
        cartCtx = cartCanvas.getContext('2d');
        drawCarts();
    }

    function drawCarts() {
        if (!cartCtx) return;
        cartCtx.clearRect(0, 0, 600, 200);

        // Boden obere Spur (leerer Wagen)
        cartCtx.fillStyle = '#e8f5e9';
        cartCtx.fillRect(0, 40, 600, 60);
        cartCtx.strokeStyle = '#2a7a4b';
        cartCtx.lineWidth = 2;
        cartCtx.beginPath();
        cartCtx.moveTo(0, 100);
        cartCtx.lineTo(600, 100);
        cartCtx.stroke();

        // Boden untere Spur (voller Wagen)
        cartCtx.fillStyle = '#ffebee';
        cartCtx.fillRect(0, 110, 600, 60);
        cartCtx.strokeStyle = '#c62828';
        cartCtx.beginPath();
        cartCtx.moveTo(0, 170);
        cartCtx.lineTo(600, 170);
        cartCtx.stroke();

        // Leerer Wagen (oben, klein, grün)
        cartCtx.fillStyle = '#2a7a4b';
        cartCtx.fillRect(cart1X, 60, 40, 35);
        // Räder
        cartCtx.beginPath();
        cartCtx.arc(cart1X + 10, 98, 6, 0, Math.PI * 2);
        cartCtx.arc(cart1X + 30, 98, 6, 0, Math.PI * 2);
        cartCtx.fill();
        // Label
        cartCtx.fillStyle = 'white';
        cartCtx.font = 'bold 12px sans-serif';
        cartCtx.textAlign = 'center';
        cartCtx.fillText('10 kg', cart1X + 20, 82);

        // Voller Wagen (unten, groß, rot)
        cartCtx.fillStyle = '#c62828';
        cartCtx.fillRect(cart2X, 115, 60, 50);
        // Räder
        cartCtx.beginPath();
        cartCtx.arc(cart2X + 15, 168, 8, 0, Math.PI * 2);
        cartCtx.arc(cart2X + 45, 168, 8, 0, Math.PI * 2);
        cartCtx.fill();
        // Label
        cartCtx.fillStyle = 'white';
        cartCtx.font = 'bold 14px sans-serif';
        cartCtx.fillText('50 kg', cart2X + 30, 145);

        // Kraftpfeile (beide gleich groß = 50 N)
        var arrowLen = 60;
        cartCtx.strokeStyle = '#2c5aa0';
        cartCtx.lineWidth = 3;
        // Pfeil oben
        cartCtx.beginPath();
        cartCtx.moveTo(cart1X + 45, 77);
        cartCtx.lineTo(cart1X + 45 + arrowLen, 77);
        cartCtx.stroke();
        drawArrowHead(cartCtx, cart1X + 45 + arrowLen, 77, '#2c5aa0');
        // Pfeil unten
        cartCtx.beginPath();
        cartCtx.moveTo(cart2X + 65, 140);
        cartCtx.lineTo(cart2X + 65 + arrowLen, 140);
        cartCtx.stroke();
        drawArrowHead(cartCtx, cart2X + 65 + arrowLen, 140, '#2c5aa0');

        // Kraft-Labels
        cartCtx.fillStyle = '#2c5aa0';
        cartCtx.font = 'bold 11px sans-serif';
        cartCtx.fillText('50 N', cart1X + 45 + arrowLen/2, 67);
        cartCtx.fillText('50 N', cart2X + 65 + arrowLen/2, 130);
    }

    function drawArrowHead(ctx, x, y, color) {
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x - 8, y - 5);
        ctx.lineTo(x - 8, y + 5);
        ctx.closePath();
        ctx.fill();
    }

    function startCartSim() {
        if (cartAnimating) return;
        cartAnimating = true;
        cart1X = 50;
        cart2X = 50;
        cart1Vel = 0;
        cart2Vel = 0;
        animateCarts();
    }

    function animateCarts() {
        // a = F/m
        // Leerer Wagen: a = 50/10 = 5 m/s²
        // Voller Wagen: a = 50/50 = 1 m/s²
        var accel1 = 5;
        var accel2 = 1;
        var dt = 0.016;

        cart1Vel += accel1 * dt;
        cart2Vel += accel2 * dt;
        cart1X += cart1Vel * 8;
        cart2X += cart2Vel * 8;

        drawCarts();

        if (cart1X < 480 && cartAnimating) {
            cartAnimId = requestAnimationFrame(animateCarts);
        } else {
            cartAnimating = false;
        }
    }

    function resetCartSim() {
        cartAnimating = false;
        if (cartAnimId) cancelAnimationFrame(cartAnimId);
        cart1X = 50;
        cart2X = 50;
        cart1Vel = 0;
        cart2Vel = 0;
        drawCarts();
    }

    // ===== INIT =====
    window.onload = function() {
        generateStepIndicators();
        loadProgress();
        initForceSim();
        initCartSim();
    };
    </script>
</body>
</html>
