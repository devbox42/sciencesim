<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lernpfad: Das Ohmsche Gesetz</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --physik: #2c5aa0;
            --bg: #f5f5f5;
            --white: #ffffff;
            --border: #dddddd;
            --text-primary: #222222;
            --text-secondary: #555555;
            --text-muted: #888888;
            --success: #2a7a4b;
            --warning: #b35c00;
            --warning-bg: #fff3e0;
            --error: #c62828;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: var(--text-primary);
            font-size: 15px;
            line-height: 1.6;
        }

        .container { max-width: 800px; margin: 0 auto; padding: 20px; }

        header {
            background: var(--physik);
            color: white;
            padding: 15px 20px;
            margin-bottom: 20px;
        }
        header h1 { font-size: 1.3em; font-weight: 600; }
        header .subtitle { font-size: 0.85em; opacity: 0.9; }

        .progress-container {
            background: var(--white);
            border: 1px solid var(--border);
            padding: 15px;
            margin-bottom: 20px;
        }
        .progress-bar { height: 8px; background: var(--border); margin-bottom: 8px; }
        .progress-fill { height: 100%; background: var(--success); transition: width 0.3s; }
        .progress-text { font-size: 0.85em; color: var(--text-muted); }

        .step-dots { display: flex; gap: 5px; margin-top: 10px; flex-wrap: wrap; }
        .step-dot {
            width: 22px; height: 22px; border-radius: 50%;
            background: var(--border);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.65em; font-weight: 600; color: var(--text-muted);
            cursor: pointer; transition: all 0.2s;
        }
        .step-dot.completed { background: var(--success); color: white; }
        .step-dot.current { background: var(--physik); color: white; transform: scale(1.1); }
        .step-dot.locked { cursor: not-allowed; opacity: 0.5; }

        .slide {
            display: none;
            background: var(--white);
            border: 1px solid var(--border);
            padding: 25px;
            margin-bottom: 20px;
        }
        .slide.active { display: block; }
        .slide h2 {
            color: var(--physik);
            font-size: 1.15em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--physik);
        }
        .slide p { margin-bottom: 12px; }
        .slide ul, .slide ol { margin-left: 1.5em; margin-bottom: 12px; }
        .slide li { margin-bottom: 6px; }

        .merkkasten {
            background: var(--bg);
            border-top: 3px solid var(--physik);
            padding: 15px;
            margin: 15px 0;
        }
        .merkkasten h3 { color: var(--physik); font-size: 1em; margin-bottom: 10px; }

        .hefter-hinweis {
            background: var(--warning-bg);
            border: 2px solid var(--warning);
            padding: 12px 15px;
            margin: 20px 0;
            font-size: 0.9em;
        }
        .hefter-hinweis::before {
            content: "üìù Arbeitsblatt";
            display: inline-block;
            background: var(--warning);
            color: white;
            font-size: 0.75em;
            font-weight: 600;
            padding: 2px 8px;
            margin-bottom: 8px;
        }

        .simulation-frame { border: 1px solid var(--border); margin: 15px 0; position: relative; }
        .simulation-frame iframe { width: 100%; height: 520px; border: none; }
        .sim-controls { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: var(--bg); }
        .sim-link { font-size: 0.85em; }
        .sim-link a { color: var(--physik); }
        .fullscreen-btn {
            background: var(--physik);
            color: white;
            border: none;
            padding: 6px 12px;
            font-size: 0.8em;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .fullscreen-btn:hover { background: #1e4080; }
        .fullscreen-btn svg { width: 14px; height: 14px; fill: currentColor; }

        /* Vollbild-Modus: Exit-Overlay */
        .fullscreen-exit-overlay {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            z-index: 10000;
            padding: 12px;
        }
        .fullscreen-exit-overlay.visible {
            display: block;
        }
        .fullscreen-exit-btn {
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            padding: 10px 16px;
            font-size: 1em;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .fullscreen-exit-btn:hover {
            background: rgba(0,0,0,0.9);
        }

        /* Fallback: CSS-basiertes Vollbild (iOS, √§ltere Browser) */
        .simulation-frame.fullscreen-fallback {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            margin: 0;
            border: none;
            background: white;
        }
        .simulation-frame.fullscreen-fallback iframe {
            height: 100vh;
        }
        .simulation-frame.fullscreen-fallback .sim-controls {
            display: none;
        }

        .formelkasten {
            background: var(--white);
            border: 2px solid var(--physik);
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        .formelkasten .formula { font-size: 1.5em; font-weight: 600; color: var(--physik); margin: 10px 0; }

        .exercise {
            background: #e8f5e9;
            border-left: 4px solid var(--success);
            padding: 15px;
            margin: 15px 0;
        }
        .exercise h3 { color: var(--success); font-size: 1em; margin-bottom: 10px; }
        .exercise input, .exercise select {
            border: 1px solid var(--border);
            padding: 8px 12px;
            font-size: 1em;
        }
        .exercise input { width: 80px; text-align: center; }

        .check-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 0.9em;
            cursor: pointer;
            margin-top: 10px;
        }

        .feedback { margin-top: 10px; padding: 10px; font-size: 0.9em; display: none; }
        .feedback.correct { background: #c8e6c9; color: var(--success); display: block; }
        .feedback.incorrect { background: #ffcdd2; color: var(--error); display: block; }
        .feedback.hint { background: #fff3e0; color: var(--warning); display: block; }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }
        .nav-btn {
            background: var(--physik);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
        }
        .nav-btn:disabled { background: var(--text-muted); cursor: not-allowed; }
        .nav-btn.next { margin-left: auto; }
        .lock-message { color: var(--error); font-size: 0.85em; text-align: center; flex: 1; align-self: center; }

        .analogy-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .analogy-table th, .analogy-table td { border: 1px solid var(--border); padding: 10px; text-align: left; }
        .analogy-table th { background: var(--physik); color: white; }
        .analogy-table tr:nth-child(even) { background: var(--bg); }

        .formula-triangle { text-align: center; margin: 20px 0; }
        .formula-triangle svg { max-width: 180px; }

        .highlight-box {
            background: #e3f2fd;
            border: 2px solid var(--physik);
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .reset-container { text-align: right; margin-top: 20px; }
        .reset-btn {
            background: none;
            color: var(--text-muted);
            border: 1px solid var(--text-muted);
            padding: 6px 12px;
            font-size: 0.8em;
            cursor: pointer;
        }

        /* ISO 80000: Formelzeichen kursiv, Einheiten aufrecht */
        .var { font-style: italic; }
        .unit { font-style: normal; }
    </style>
</head>
<body>
    <header>
        <h1>Das Ohmsche Gesetz</h1>
        <div class="subtitle">Physik Klasse 8 | Lernpfad 02a</div>
    </header>

    <div class="container">
        <div class="progress-container">
            <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
            <div class="progress-text">Schritt <span id="current-step">1</span> von 16</div>
            <div class="step-dots" id="step-dots"></div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 1: EINSTIEG -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-1">
            <h2>1. Einstiegsfrage</h2>
            <p><strong>Stell dir vor:</strong> Du hast zwei identische Taschenlampen. In einer sind neue Batterien, in der anderen fast leere.</p>
            <p>Was passiert, wenn du beide einschaltest?</p>

            <div class="exercise">
                <h3>√úberlege:</h3>
                <p>Welche Lampe leuchtet heller ‚Äì und warum?</p>
                <select id="ex1-select">
                    <option value="">W√§hle...</option>
                    <option value="new">Die mit neuen Batterien</option>
                    <option value="old">Die mit alten Batterien</option>
                    <option value="same">Beide gleich hell</option>
                </select>
                <button class="check-btn" onclick="checkEx(1)">Pr√ºfen</button>
                <div class="feedback" id="fb1"></div>
            </div>

            <div class="nav-buttons">
                <span></span>
                <span class="lock-message" id="lock-1">Beantworte zuerst die Frage!</span>
                <button class="nav-btn next" id="next-1" onclick="nextSlide()" disabled>Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 2: WASSERMODELL -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-2">
            <h2>2. Interaktiv: Wassermodell erkunden</h2>
            <p>Erkunde selbst, wie Druck, Engstelle und Wasserfluss zusammenh√§ngen:</p>

            <div class="simulation-frame" id="sim-frame-1">
                <iframe src="SIM-02a-wassermodell.html"></iframe>
                <div class="sim-controls">
                    <span class="sim-link"><a href="SIM-02a-wassermodell.html" target="_blank">‚Üí In neuem Tab √∂ffnen</a></span>
                    <button class="fullscreen-btn" onclick="toggleSimFullscreen('sim-frame-1')">
                        <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                        Vollbild
                    </button>
                </div>
            </div>

            <div class="exercise">
                <h3>Was hast du entdeckt?</h3>
                <p>Wenn der Druck steigt und die Engstelle gleich bleibt, dann...</p>
                <select id="ex2-select">
                    <option value="">W√§hle...</option>
                    <option value="less">...flie√üt weniger Wasser</option>
                    <option value="same">...flie√üt gleich viel Wasser</option>
                    <option value="more">...flie√üt mehr Wasser</option>
                </select>
                <button class="check-btn" onclick="checkEx(2)">Pr√ºfen</button>
                <div class="feedback" id="fb2"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <span class="lock-message" id="lock-2"></span>
                <button class="nav-btn next" id="next-2" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <div class="slide" id="slide-3">
            <h2>3. Die Wasser-Analogie</h2>
            <p>Das Wassermodell hilft uns, den Stromkreis zu verstehen:</p>

            <div class="merkkasten">
                <h3>√úbertragung auf den Stromkreis:</h3>
                <table class="analogy-table">
                    <tr><th>Wasserkreislauf</th><th>Stromkreis</th></tr>
                    <tr><td>Wasserdruck (Pumpe)</td><td><strong>Spannung U</strong></td></tr>
                    <tr><td>Wassermenge pro Sekunde</td><td><strong>Stromst√§rke I</strong></td></tr>
                    <tr><td>Engstelle im Rohr</td><td><strong>Widerstand R</strong></td></tr>
                </table>
            </div>

            <div class="hefter-hinweis">
                <ul><li><strong>Kasten 1:</strong> √úbertrage die Analogie-Tabelle</li></ul>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 3: BEOBACHTEN (NUR U UND I!) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-4">
            <h2>4. Experiment: Messwerte aufnehmen</h2>
            <p>Jetzt messen wir im <strong>Stromkreis</strong>! Nimm 6 Messwerte auf:</p>

            <div class="simulation-frame" id="sim-frame-2">
                <iframe src="SIM-02a-kennlinie.html"></iframe>
                <div class="sim-controls">
                    <span class="sim-link"><a href="SIM-02a-kennlinie.html" target="_blank">‚Üí In neuem Tab √∂ffnen</a></span>
                    <button class="fullscreen-btn" onclick="toggleSimFullscreen('sim-frame-2')">
                        <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                        Vollbild
                    </button>
                </div>
            </div>

            <div class="hefter-hinweis">
                <ul>
                    <li><strong>Aufgabe 1:</strong> Trage <em>U</em> und <em>I</em> in die Tabelle ein</li>
                    <li>Die rechte Spalte (<em>R</em>) l√§sst du <strong>noch leer</strong>!</li>
                </ul>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <div class="slide" id="slide-5">
            <h2>5. Kennlinie zeichnen</h2>
            <p>Zeichne jetzt die <strong>I(U)-Kennlinie</strong>:</p>
            <ol>
                <li>Trage deine 6 Messpunkte ins Koordinatensystem ein</li>
                <li>Zeichne eine <strong>Ausgleichsgerade</strong> durch die Punkte (mit Lineal!)</li>
                <li>Verl√§ngere die Gerade bis zum Rand</li>
            </ol>

            <div class="hefter-hinweis">
                <ul><li><strong>Aufgabe 2:</strong> Zeichne die Kennlinie</li></ul>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 4: ENTDECKEN -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-6">
            <h2>6. Was f√§llt dir auf?</h2>
            <p>Schau dir deine Kennlinie genau an:</p>

            <div class="highlight-box">
                <p style="font-size: 1.2em;">Die Messpunkte liegen auf einer <strong>Geraden durch den Ursprung</strong>!</p>
            </div>

            <div class="exercise">
                <h3>Was bedeutet das?</h3>
                <p>Wenn U doppelt so gro√ü wird, dann wird I...</p>
                <select id="ex6-select">
                    <option value="">W√§hle...</option>
                    <option value="half">...halb so gro√ü</option>
                    <option value="same">...gleich gro√ü</option>
                    <option value="double">...doppelt so gro√ü</option>
                </select>
                <button class="check-btn" onclick="checkEx(6)">Pr√ºfen</button>
                <div class="feedback" id="fb6"></div>
            </div>

            <div class="merkkasten">
                <h3>Deine Entdeckung:</h3>
                <p style="font-size: 1.1em; text-align: center;">
                    Die <strong>Stromst√§rke <em>I</em></strong> ist <strong>proportional</strong> zur <strong>Spannung <em>U</em></strong>.
                </p>
                <p style="text-align: center; font-size: 1.3em; margin-top: 10px;">
                    <strong><em>I</em> ~ <em>U</em></strong>
                </p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <span class="lock-message" id="lock-6"></span>
                <button class="nav-btn next" id="next-6" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 5: BENENNEN (R EINF√úHREN) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-7">
            <h2>7. Das Ohmsche Gesetz</h2>
            <p>Der Physiker <strong>Georg Simon Ohm</strong> (1789‚Äì1854) entdeckte diesen Zusammenhang.</p>
            <p>Die Proportionalit√§tskonstante nennen wir <strong>Widerstand R</strong>:</p>

            <div class="formelkasten">
                <p><strong>Das Ohmsche Gesetz:</strong></p>
                <p class="formula"><em>R</em> = <em>U</em> / <em>I</em></p>
                <p style="font-size: 0.9em; color: var(--text-secondary);">
                    Widerstand = Spannung geteilt durch Stromst√§rke
                </p>
                <p style="font-size: 0.85em; color: var(--warning); margin-top: 10px;">
                    <strong>Wichtig:</strong> Gilt nur bei <strong>konstanter Temperatur!</strong>
                </p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <div class="slide" id="slide-8">
            <h2>8. Die Einheit Ohm</h2>
            <p>Die Einheit des Widerstands ist <strong>Ohm</strong>, abgek√ºrzt mit Œ© (Omega):</p>

            <div class="formelkasten">
                <p class="formula">[<em>R</em>] = 1 Œ© = 1 V/A</p>
                <p style="font-size: 0.9em;">1 Ohm = 1 Volt pro Ampere</p>
            </div>

            <div class="hefter-hinweis">
                <ul><li><strong>Kasten 2:</strong> √úbertrage das Ohmsche Gesetz und die Einheit</li></ul>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 6: VERIFIZIEREN (ZUR√úCK ZUR TABELLE!) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-9">
            <h2>9. Zur√ºck zur Messwert-Tabelle!</h2>
            <p>Jetzt kennst du die Formel <strong>R = U / I</strong>.</p>
            <p><strong>Berechne R f√ºr alle deine Messwerte!</strong></p>

            <div class="hefter-hinweis">
                <ul>
                    <li><strong>Aufgabe 3:</strong> Gehe zur√ºck zu Aufgabe 1</li>
                    <li>Berechne R = U/I f√ºr jede Zeile</li>
                    <li>Trage die Werte in die rechte Spalte ein</li>
                </ul>
            </div>

            <div class="exercise">
                <h3>Was f√§llt dir auf?</h3>
                <p>Alle R-Werte sind...</p>
                <select id="ex9-select">
                    <option value="">W√§hle...</option>
                    <option value="different">...verschieden</option>
                    <option value="same">...gleich (konstant)</option>
                    <option value="increasing">...immer gr√∂√üer</option>
                </select>
                <button class="check-btn" onclick="checkEx(9)">Pr√ºfen</button>
                <div class="feedback" id="fb9"></div>
            </div>

            <div class="merkkasten">
                <h3>Wichtige Erkenntnis:</h3>
                <p>Bei einem <strong>ohmschen Widerstand</strong> ist R <strong>konstant</strong> ‚Äì solange die Temperatur gleich bleibt!</p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <span class="lock-message" id="lock-9"></span>
                <button class="nav-btn next" id="next-9" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 7: ANWENDEN -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-10">
            <h2>10. Die drei Formen des Ohmschen Gesetzes</h2>
            <p>Je nachdem, was du berechnen willst, stellst du die Formel um:</p>

            <table class="analogy-table" style="text-align: center;">
                <tr>
                    <th>Widerstand</th>
                    <th>Spannung</th>
                    <th>Stromst√§rke</th>
                </tr>
                <tr style="font-size: 1.2em; font-weight: 600; color: var(--physik);">
                    <td><em>R</em> = <em>U</em> / <em>I</em></td>
                    <td><em>U</em> = <em>R</em> ¬∑ <em>I</em></td>
                    <td><em>I</em> = <em>U</em> / <em>R</em></td>
                </tr>
            </table>

            <div class="formula-triangle">
                <p><strong>Merkhilfe: Das Formeldreieck</strong></p>
                <svg viewBox="0 0 200 140">
                    <polygon points="100,10 20,120 180,120" fill="none" stroke="#2c5aa0" stroke-width="3"/>
                    <line x1="60" y1="65" x2="140" y2="65" stroke="#2c5aa0" stroke-width="2"/>
                    <text x="100" y="45" text-anchor="middle" font-size="22" font-weight="bold" fill="#2c5aa0">U</text>
                    <text x="55" y="100" text-anchor="middle" font-size="22" font-weight="bold" fill="#2c5aa0">R</text>
                    <text x="145" y="100" text-anchor="middle" font-size="22" font-weight="bold" fill="#2c5aa0">I</text>
                    <text x="100" y="95" text-anchor="middle" font-size="14" fill="#2c5aa0">¬∑</text>
                </svg>
                <p style="font-size: 0.85em; color: var(--text-secondary);">Was du suchst, deckst du ab!</p>
            </div>

            <div class="hefter-hinweis">
                <ul><li><strong>Kasten 2:</strong> Erg√§nze die drei Formeln und das Formeldreieck</li></ul>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <div class="slide" id="slide-11">
            <h2>11. √úbung: Berechnungen</h2>

            <div class="exercise">
                <h3>Aufgabe 4a: Berechne R</h3>
                <p>Gegeben: U = 12 V, I = 3 A</p>
                <p>R = <input type="number" id="ex11a-input"> Œ©</p>
                <button class="check-btn" onclick="checkEx('11a')">Pr√ºfen</button>
                <div class="feedback" id="fb11a"></div>
            </div>

            <div class="exercise">
                <h3>Aufgabe 4b: Berechne U</h3>
                <p>Gegeben: R = 5 Œ©, I = 2 A</p>
                <p>U = <input type="number" id="ex11b-input"> V</p>
                <button class="check-btn" onclick="checkEx('11b')">Pr√ºfen</button>
                <div class="feedback" id="fb11b"></div>
            </div>

            <div class="exercise">
                <h3>Aufgabe 4c: Berechne I</h3>
                <p>Gegeben: U = 24 V, R = 8 Œ©</p>
                <p>I = <input type="number" id="ex11c-input"> A</p>
                <button class="check-btn" onclick="checkEx('11c')">Pr√ºfen</button>
                <div class="feedback" id="fb11c"></div>
            </div>

            <div class="hefter-hinweis">
                <ul><li><strong>Aufgabe 4:</strong> Bearbeite alle Teilaufgaben auf dem Arbeitsblatt</li></ul>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 8: ERWEITERN (GL√úHLAMPE) -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-12">
            <h2>12. Die Gl√ºhlampe ‚Äì ein besonderer Fall</h2>
            <p>Nicht alle Widerst√§nde verhalten sich gleich!</p>
            <p><strong>Beobachte:</strong> Wenn eine Gl√ºhlampe eingeschaltet wird...</p>
            <ul>
                <li>Der Gl√ºhfaden wird <strong>hei√ü</strong></li>
                <li>Er beginnt zu <strong>gl√ºhen</strong></li>
            </ul>

            <div class="merkkasten">
                <h3>Frage:</h3>
                <p>Verh√§lt sich die Gl√ºhlampe wie ein ohmscher Widerstand? Ist <em>R</em> konstant?</p>
                <p><strong>‚Üí Das wollen wir jetzt untersuchen!</strong></p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <div class="slide" id="slide-13">
            <h2>13. Experiment: Gl√ºhlampen-Kennlinie</h2>
            <p>Nimm Messwerte f√ºr eine Gl√ºhlampe auf:</p>

            <div class="simulation-frame" id="sim-frame-3">
                <iframe src="SIM-02a-gluehlampe.html"></iframe>
                <div class="sim-controls">
                    <span class="sim-link"><a href="SIM-02a-gluehlampe.html" target="_blank">‚Üí In neuem Tab √∂ffnen</a></span>
                    <button class="fullscreen-btn" onclick="toggleSimFullscreen('sim-frame-3')">
                        <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                        Vollbild
                    </button>
                </div>
            </div>

            <div class="hefter-hinweis">
                <ul>
                    <li><strong>Aufgabe 5a:</strong> Trage <em>U</em> und <em>I</em> in die Tabelle ein</li>
                    <li>Berechne <em>R</em> = <em>U</em>/<em>I</em> f√ºr jeden Messwert!</li>
                </ul>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <div class="slide" id="slide-14">
            <h2>14. Zweite Kennlinie zeichnen</h2>
            <p><strong>Gehe zur√ºck zum Koordinatensystem auf Seite 1!</strong></p>
            <p>Zeichne die Gl√ºhlampen-Kennlinie <strong>in einer anderen Farbe</strong> ein.</p>

            <div class="hefter-hinweis">
                <ul>
                    <li><strong>Aufgabe 5b:</strong> Zeichne die 2. Kennlinie (andere Farbe!)</li>
                    <li><strong>Aufgabe 5c:</strong> Vergleiche die beiden Kennlinien schriftlich</li>
                </ul>
            </div>

            <div class="exercise">
                <h3>Vergleiche die beiden Kennlinien:</h3>
                <p>Die Kennlinie der Gl√ºhlampe ist...</p>
                <select id="ex14-select">
                    <option value="">W√§hle...</option>
                    <option value="line">...eine Gerade</option>
                    <option value="curve">...eine Kurve (gekr√ºmmt)</option>
                </select>
                <button class="check-btn" onclick="checkEx(14)">Pr√ºfen</button>
                <div class="feedback" id="fb14"></div>
            </div>

            <div class="exercise">
                <h3>Was zeigen deine <em>R</em>-Werte?</h3>
                <p>Schau auf deine berechneten <em>R</em>-Werte in AB Aufgabe 5a. Der Widerstand der Gl√ºhlampe...</p>
                <select id="ex14b-select">
                    <option value="">W√§hle...</option>
                    <option value="decreases">...wird kleiner bei h√∂herer Spannung</option>
                    <option value="same">...bleibt konstant</option>
                    <option value="increases">...wird gr√∂√üer bei h√∂herer Spannung</option>
                </select>
                <button class="check-btn" onclick="checkEx('14b')">Pr√ºfen</button>
                <div class="feedback" id="fb14b"></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <span class="lock-message" id="lock-14"></span>
                <button class="nav-btn next" id="next-14" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <div class="slide" id="slide-15">
            <h2>15. Warum ist die Kennlinie gekr√ºmmt?</h2>

            <p><strong>Schau ins Innere des Gl√ºhfadens:</strong></p>

            <div class="simulation-frame" id="sim-frame-4">
                <iframe src="SIM-02a-atomruempfe.html"></iframe>
                <div class="sim-controls">
                    <span class="sim-link"><a href="SIM-02a-atomruempfe.html" target="_blank">‚Üí In neuem Tab √∂ffnen</a></span>
                    <button class="fullscreen-btn" onclick="toggleSimFullscreen('sim-frame-4')">
                        <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
                        Vollbild
                    </button>
                </div>
            </div>

            <div class="merkkasten">
                <h3>Der Teufelskreis ‚Äì Was passiert im Draht?</h3>
                <ol>
                    <li>H√∂here <strong>Spannung</strong> ‚Üí gr√∂√üerer <strong>Strom</strong> (mehr Elektronen flie√üen)</li>
                    <li>Mehr Elektronen ‚Üí mehr <strong>Zusammenst√∂√üe</strong> mit den Atomr√ºmpfen</li>
                    <li>St√∂√üe ‚Üí Atomr√ºmpfe <strong>schwingen st√§rker</strong> (Temperatur steigt)</li>
                    <li>H√∂here Temperatur ‚Üí <strong>noch mehr Kollisionen</strong></li>
                    <li>Mehr Kollisionen ‚Üí <strong>Widerstand steigt</strong> ‚Üí Teufelskreis!</li>
                </ol>
            </div>

            <div class="hefter-hinweis">
                <ul>
                    <li><strong>Aufgabe 5d:</strong> F√ºlle den L√ºckentext zur Erkl√§rung aus!</li>
                    <li><em>W√∂rter: Strom, Atomr√ºmpfen, schwingen, hei√ü, gr√∂√üer, weniger</em></li>
                </ul>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <button class="nav-btn next" onclick="nextSlide()">Weiter ‚Üí</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PHASE 9: ZUSAMMENFASSUNG -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

        <div class="slide" id="slide-16">
            <h2>16. Zusammenfassung</h2>

            <div class="merkkasten">
                <h3>Das hast du gelernt:</h3>
                <ul>
                    <li><strong>Ohmsches Gesetz:</strong> <em>I</em> ~ <em>U</em> (bei konstanter Temperatur!)</li>
                    <li><strong>Formeln:</strong> <em>R</em> = <em>U</em>/<em>I</em>, <em>U</em> = <em>R</em>¬∑<em>I</em>, <em>I</em> = <em>U</em>/<em>R</em></li>
                    <li><strong>Einheit:</strong> [<em>R</em>] = 1 Œ© = 1 V/A</li>
                    <li><strong>Ohmsche Widerst√§nde:</strong> Gerade Kennlinie (<em>R</em> konstant bei konst. <em>T</em>)</li>
                    <li><strong>Gl√ºhlampe:</strong> Gekr√ºmmte Kennlinie (<em>R</em> steigt mit <em>T</em>)</li>
                </ul>
            </div>

            <div class="merkkasten" style="border-color: var(--warning);">
                <h3 style="color: var(--warning);">Praktische Anwendungen:</h3>
                <ul>
                    <li><strong>Einschaltmoment:</strong> Gl√ºhlampen brennen meist beim Einschalten durch ‚Äì der kalte Faden hat weniger Widerstand, es flie√üt kurz viel mehr Strom!</li>
                    <li><strong>Kaltleiter (PTC):</strong> Sch√ºtzen Schaltungen vor √úberlastung ‚Äì bei Erw√§rmung steigt R, der Strom sinkt</li>
                    <li><strong>Temperatursensoren:</strong> Messen die Temperatur √ºber die Widerstands√§nderung (z.B. im K√ºhlschrank)</li>
                    <li><strong>Hei√üleiter (NTC):</strong> Im Gegensatz: R sinkt bei Erw√§rmung ‚Äì z.B. als Einschaltstrombegrenzer</li>
                </ul>
            </div>

            <div class="hefter-hinweis">
                <ul>
                    <li><strong>Kasten 3:</strong> Vervollst√§ndige die Zusammenfassung</li>
                    <li><strong>Aufgabe 6:</strong> Transfer-Aufgaben (f√ºr Schnelle)</li>
                </ul>
            </div>

            <div class="highlight-box" style="background: #c8e6c9; border-color: var(--success);">
                <p style="font-size: 1.1em;"><strong>Geschafft!</strong> Du hast den Lernpfad abgeschlossen.</p>
                <p>Kontrolliere dein Arbeitsblatt und hefte es ab.</p>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="prevSlide()">‚Üê Zur√ºck</button>
                <span style="color: var(--success); font-weight: 600;">‚úì Lernpfad abgeschlossen</span>
            </div>
        </div>

        <div class="reset-container">
            <button class="reset-btn" onclick="resetProgress()">Fortschritt zur√ºcksetzen</button>
        </div>
    </div>

    <!-- Fullscreen Exit-Overlay (immer sichtbar im Vollbild) -->
    <div class="fullscreen-exit-overlay" id="fullscreen-exit-overlay">
        <button class="fullscreen-exit-btn" onclick="exitFullscreen()">
            ‚úï Beenden (ESC)
        </button>
    </div>

    <script>
        var LP_ID = 'lp-02a-ohm-v2';
        var TOTAL_SLIDES = 16;
        var currentSlide = 1;
        var completedEx = {};
        var unlockedSlides = { 1: true };

        // Slides mit Pflicht-√úbungen
        var requirements = { 1: 'ex1', 2: 'ex2', 6: 'ex6', 9: 'ex9', 14: 'ex14' };

        function init() {
            loadProgress();
            renderDots();
            showSlide(currentSlide);
            updateProgress();
        }

        function loadProgress() {
            var saved = localStorage.getItem(LP_ID);
            if (saved) {
                var data = JSON.parse(saved);
                currentSlide = data.currentSlide || 1;
                completedEx = data.completedEx || {};
                unlockedSlides = data.unlockedSlides || { 1: true };
            }
        }

        function saveProgress() {
            localStorage.setItem(LP_ID, JSON.stringify({
                currentSlide: currentSlide,
                completedEx: completedEx,
                unlockedSlides: unlockedSlides
            }));
        }

        function renderDots() {
            var container = document.getElementById('step-dots');
            container.innerHTML = '';
            for (var i = 1; i <= TOTAL_SLIDES; i++) {
                var dot = document.createElement('div');
                dot.className = 'step-dot';
                dot.textContent = i;
                dot.setAttribute('data-slide', i);
                dot.onclick = function() {
                    var t = parseInt(this.getAttribute('data-slide'));
                    if (unlockedSlides[t]) showSlide(t);
                };
                container.appendChild(dot);
            }
            updateDots();
        }

        function updateDots() {
            var dots = document.querySelectorAll('.step-dot');
            for (var i = 0; i < dots.length; i++) {
                var n = i + 1;
                dots[i].className = 'step-dot';
                if (n === currentSlide) dots[i].classList.add('current');
                else if (unlockedSlides[n] && n < currentSlide) dots[i].classList.add('completed');
                else if (!unlockedSlides[n]) dots[i].classList.add('locked');
            }
        }

        function showSlide(n) {
            var slides = document.querySelectorAll('.slide');
            for (var i = 0; i < slides.length; i++) slides[i].classList.remove('active');
            var active = document.getElementById('slide-' + n);
            if (active) active.classList.add('active');
            currentSlide = n;
            unlockedSlides[n] = true;
            document.getElementById('current-step').textContent = n;
            updateDots();
            updateProgress();
            updateNavBtns();
            saveProgress();
            window.scrollTo(0, 0);
        }

        function updateProgress() {
            var pct = ((currentSlide - 1) / (TOTAL_SLIDES - 1)) * 100;
            document.getElementById('progress-fill').style.width = pct + '%';
        }

        function nextSlide() {
            var req = requirements[currentSlide];
            if (req && !completedEx[req]) return;
            if (currentSlide < TOTAL_SLIDES) showSlide(currentSlide + 1);
        }

        function prevSlide() {
            if (currentSlide > 1) showSlide(currentSlide - 1);
        }

        function updateNavBtns() {
            for (var s in requirements) {
                var req = requirements[s];
                var btn = document.getElementById('next-' + s);
                var lock = document.getElementById('lock-' + s);
                if (btn) {
                    if (completedEx[req]) {
                        btn.disabled = false;
                        if (lock) lock.style.display = 'none';
                    } else {
                        btn.disabled = true;
                        if (lock) lock.style.display = 'block';
                    }
                }
            }
        }

        function unlockEx(id) {
            completedEx[id] = true;
            updateNavBtns();
            saveProgress();
        }

        function checkEx(n) {
            var id = 'ex' + n;
            var fb = document.getElementById('fb' + n);
            var correct = false;
            var msg = '';

            if (n === 1) {
                var v = document.getElementById('ex1-select').value;
                if (v === 'new') { correct = true; msg = 'Richtig! Neue Batterien = h√∂here Spannung = mehr Strom = heller.'; }
                else msg = '√úberlege: Welche Batterien liefern mehr Antrieb?';
            }
            else if (n === 2) {
                var v = document.getElementById('ex2-select').value;
                if (v === 'more') { correct = true; msg = 'Genau! Mehr Druck ‚Üí mehr Wasserfluss.'; }
                else msg = 'Probiere es in der Simulation aus!';
            }
            else if (n === 6) {
                var v = document.getElementById('ex6-select').value;
                if (v === 'double') { correct = true; msg = 'Richtig! Das ist die Proportionalit√§t: I ~ U.'; }
                else msg = 'Schau dir die Gerade an: Wenn U verdoppelt wird...';
            }
            else if (n === 9) {
                var v = document.getElementById('ex9-select').value;
                if (v === 'same') { correct = true; msg = 'Genau! R ist konstant ‚Äì das ist typisch f√ºr ohmsche Widerst√§nde!'; }
                else msg = 'Berechne R = U/I f√ºr jeden Messwert und vergleiche.';
            }
            else if (n === '11a') {
                var v = parseFloat(document.getElementById('ex11a-input').value);
                if (v === 4) { correct = true; msg = 'Richtig! R = 12V / 3A = 4Œ©'; }
                else msg = 'R = U / I = 12 / 3 = ?';
            }
            else if (n === '11b') {
                var v = parseFloat(document.getElementById('ex11b-input').value);
                if (v === 10) { correct = true; msg = 'Richtig! U = R ¬∑ I = 5Œ© ¬∑ 2A = 10V'; }
                else msg = 'U = R ¬∑ I = 5 ¬∑ 2 = ?';
            }
            else if (n === '11c') {
                var v = parseFloat(document.getElementById('ex11c-input').value);
                if (v === 3) { correct = true; msg = 'Richtig! I = U / R = 24V / 8Œ© = 3A'; }
                else msg = 'I = U / R = 24 / 8 = ?';
            }
            else if (n === 14) {
                var v = document.getElementById('ex14-select').value;
                if (v === 'curve') { correct = true; msg = 'Genau! Die Gl√ºhlampe hat eine gekr√ºmmte Kennlinie.'; }
                else msg = 'Schau genau hin: Liegen die Punkte auf einer Geraden?';
            }
            else if (n === '14b') {
                var v = document.getElementById('ex14b-select').value;
                if (v === 'increases') { correct = true; msg = 'Richtig! R steigt mit der Temperatur ‚Äì das erkl√§rt die gekr√ºmmte Kennlinie!'; }
                else msg = 'Vergleiche deine R-Werte bei U = 2 V und U = 12 V. Welcher ist gr√∂√üer?';
            }

            fb.textContent = msg;
            fb.className = 'feedback ' + (correct ? 'correct' : 'hint');
            if (correct) unlockEx(id);
        }

        function resetProgress() {
            if (!confirm('Wirklich den gesamten Fortschritt l√∂schen?')) return;
            localStorage.removeItem(LP_ID);
            location.reload();
        }

        // ============================================
        // SIMULATION VOLLBILD (Fullscreen API + Fallback)
        // ============================================

        var currentFullscreenFrame = null;
        var exitOverlay = document.getElementById('fullscreen-exit-overlay');

        function toggleSimFullscreen(frameId) {
            var frame = document.getElementById(frameId);
            var iframe = frame.querySelector('iframe');

            // Pr√ºfe ob Fullscreen API verf√ºgbar
            if (iframe.requestFullscreen || iframe.webkitRequestFullscreen) {
                // Native Fullscreen API
                if (iframe.requestFullscreen) {
                    iframe.requestFullscreen();
                } else if (iframe.webkitRequestFullscreen) {
                    iframe.webkitRequestFullscreen(); // Safari
                }
                currentFullscreenFrame = frame;
                exitOverlay.classList.add('visible');
            } else {
                // Fallback: CSS-basiert
                frame.classList.add('fullscreen-fallback');
                currentFullscreenFrame = frame;
                exitOverlay.classList.add('visible');
                document.body.style.overflow = 'hidden';
            }
        }

        function exitFullscreen() {
            // Native Fullscreen beenden
            if (document.fullscreenElement || document.webkitFullscreenElement) {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                }
            }

            // Fallback beenden
            if (currentFullscreenFrame) {
                currentFullscreenFrame.classList.remove('fullscreen-fallback');
                currentFullscreenFrame = null;
            }

            exitOverlay.classList.remove('visible');
            document.body.style.overflow = '';
        }

        // Fullscreenchange-Event (reagiert auf Browser-ESC)
        document.addEventListener('fullscreenchange', function() {
            if (!document.fullscreenElement) {
                exitOverlay.classList.remove('visible');
                currentFullscreenFrame = null;
            }
        });
        document.addEventListener('webkitfullscreenchange', function() {
            if (!document.webkitFullscreenElement) {
                exitOverlay.classList.remove('visible');
                currentFullscreenFrame = null;
            }
        });

        // ESC-Taste f√ºr Fallback-Modus
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && currentFullscreenFrame) {
                exitFullscreen();
            }
        });

        init();
    </script>
</body>
</html>
