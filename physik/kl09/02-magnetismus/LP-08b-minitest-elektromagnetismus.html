<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wiederholung: Elektromagnetismus & Lorentzkraft</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f5;
            color: #222;
            font-size: 16px;
            line-height: 1.5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: #2c5aa0;
            color: white;
            padding: 15px 20px;
            margin-bottom: 20px;
        }
        header h1 {
            font-size: 1.3em;
            font-weight: 600;
        }
        header .meta {
            font-size: 0.85em;
            opacity: 0.9;
            margin-top: 5px;
        }
        .progress-bar {
            background: #ddd;
            height: 6px;
            margin-bottom: 20px;
        }
        .progress-fill {
            background: #2c5aa0;
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }
        .section {
            background: white;
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 15px;
        }
        .section-title {
            color: #2c5aa0;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #2c5aa0;
        }
        .info-box {
            background: #f0f4f8;
            border-left: 3px solid #2c5aa0;
            padding: 12px 15px;
            margin: 12px 0;
            font-size: 0.95em;
        }
        .merksatz {
            background: #e8f5e9;
            border-left: 3px solid #2a7a4b;
            padding: 12px 15px;
            margin: 12px 0;
        }
        .exercise {
            background: #fafafa;
            border: 1px solid #e0e0e0;
            padding: 15px;
            margin: 15px 0;
        }
        .exercise-header {
            font-weight: 600;
            color: #2c5aa0;
            margin-bottom: 10px;
        }
        .options {
            margin: 10px 0;
        }
        .option {
            display: block;
            padding: 10px 15px;
            margin: 5px 0;
            background: white;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
        }
        .option:hover {
            background: #f5f5f5;
            border-color: #2c5aa0;
        }
        .option.selected {
            background: #e3f2fd;
            border-color: #2c5aa0;
        }
        .option.correct {
            background: #e8f5e9;
            border-color: #2a7a4b;
        }
        .option.incorrect {
            background: #ffebee;
            border-color: #c62828;
        }
        .feedback {
            padding: 12px 15px;
            margin-top: 10px;
            display: none;
            font-size: 0.95em;
        }
        .feedback.correct {
            background: #e8f5e9;
            border-left: 3px solid #2a7a4b;
            color: #1b5e20;
        }
        .feedback.incorrect {
            background: #ffebee;
            border-left: 3px solid #c62828;
            color: #b71c1c;
        }
        .feedback.show {
            display: block;
        }
        button {
            background: #2c5aa0;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 0.95em;
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background: #1e4080;
        }
        button:disabled {
            background: #aaa;
            cursor: not-allowed;
        }
        .btn-secondary {
            background: #666;
        }
        .btn-secondary:hover {
            background: #444;
        }
        .symbol {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border: 2px solid #333;
            border-radius: 50%;
            font-weight: bold;
            margin: 0 3px;
            vertical-align: middle;
        }
        .symbol-out {
            background: #e3f2fd;
        }
        .symbol-in {
            background: #ffebee;
            font-size: 22px;
        }
        .matching-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .matching-left, .matching-right {
            flex: 1;
            min-width: 200px;
        }
        .match-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border: 1px solid #ddd;
            cursor: pointer;
        }
        .match-item.selected {
            background: #e3f2fd;
            border-color: #2c5aa0;
        }
        .match-item.matched {
            background: #e8f5e9;
            border-color: #2a7a4b;
        }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .score-display {
            text-align: center;
            padding: 20px;
            background: #e8f5e9;
            border: 2px solid #2a7a4b;
            margin: 20px 0;
        }
        .score-display .score {
            font-size: 2em;
            color: #2a7a4b;
            font-weight: bold;
        }
        .hidden {
            display: none;
        }
        .hand-rule-diagram {
            text-align: center;
            padding: 15px;
            background: #f9f9f9;
            margin: 10px 0;
        }
        .hand-rule-diagram svg {
            max-width: 100%;
            height: auto;
        }
        table.rule-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 0.9em;
        }
        table.rule-table th, table.rule-table td {
            border: 1px solid #ddd;
            padding: 8px 10px;
            text-align: left;
        }
        table.rule-table th {
            background: #2c5aa0;
            color: white;
        }
        table.rule-table tr:nth-child(even) {
            background: #f9f9f9;
        }
        .tip {
            background: #fff3e0;
            border-left: 3px solid #b35c00;
            padding: 10px 15px;
            margin: 10px 0;
            font-size: 0.9em;
        }
        .tip:before {
            content: "Tipp: ";
            font-weight: 600;
            color: #b35c00;
        }
    </style>
</head>
<body>
    <header>
        <h1>Wiederholung: Elektromagnetismus & Lorentzkraft</h1>
        <div class="meta">Physik Klasse 9E | ca. 10 Minuten</div>
    </header>

    <div class="container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- SECTION 1: Oersted & Grundlagen -->
        <div class="section" id="section1">
            <div class="section-title">1. Oersted-Versuch & Grundlagen</div>

            <div class="info-box">
                <strong>Oersted-Versuch (1820):</strong> Hans Christian Oersted entdeckte, dass ein stromdurchflossener Leiter eine Kompassnadel ablenkt. Das war der Beweis: <strong>Elektrischer Strom erzeugt ein Magnetfeld!</strong>
            </div>

            <div class="merksatz">
                <strong>Technische Stromrichtung:</strong> Von <span style="color:#c62828">Plus (+)</span> nach <span style="color:#1565c0">Minus (-)</span> (außerhalb der Spannungsquelle)
            </div>

            <div class="exercise" id="ex1">
                <div class="exercise-header">Übung 1: Oersted-Versuch</div>
                <p>Was ist die Kernaussage des Oersted-Versuchs?</p>
                <div class="options" id="ex1-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex1" value="a" style="display:none">
                        Magnete erzeugen elektrischen Strom
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex1" value="b" style="display:none">
                        Elektrischer Strom erzeugt ein Magnetfeld
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex1" value="c" style="display:none">
                        Kompassnadeln zeigen immer nach Norden
                    </label>
                </div>
                <div class="feedback correct" id="ex1-correct">Richtig! Ein stromdurchflossener Leiter erzeugt ein Magnetfeld, das eine Kompassnadel ablenkt.</div>
                <div class="feedback incorrect" id="ex1-incorrect">Nicht ganz. Die richtige Antwort: Elektrischer Strom erzeugt ein Magnetfeld.</div>
                <button onclick="checkEx1()">Prüfen</button>
            </div>
        </div>

        <!-- SECTION 2: Rechte-Faust-Regel -->
        <div class="section" id="section2">
            <div class="section-title">2. Rechte-Faust-Regel</div>

            <div class="info-box">
                <strong>Rechte-Faust-Regel</strong> (für geraden Leiter):<br>
                Der <strong>Daumen</strong> zeigt in die <strong>technische Stromrichtung</strong>.<br>
                Die <strong>gekrümmten Finger</strong> zeigen die Richtung der <strong>magnetischen Feldlinien</strong>.
            </div>

            <div class="hand-rule-diagram">
                <svg viewBox="0 0 160 130" width="200">
                    <defs>
                        <clipPath id="topHalf">
                            <rect x="0" y="0" width="160" height="65"/>
                        </clipPath>
                        <clipPath id="bottomHalf">
                            <rect x="0" y="65" width="160" height="65"/>
                        </clipPath>
                    </defs>
                    <!-- 1. Hinterer Teil der Feldlinie (oben, HINTER dem Leiter) -->
                    <ellipse cx="80" cy="65" rx="50" ry="22" fill="none" stroke="#2e7d32" stroke-width="2.5" clip-path="url(#topHalf)"/>
                    <!-- 2. Leiter (vertikal) - verdeckt den hinteren Teil -->
                    <line x1="80" y1="5" x2="80" y2="125" stroke="#555" stroke-width="10"/>
                    <!-- 3. Vorderer Teil der Feldlinie (unten, VOR dem Leiter) -->
                    <ellipse cx="80" cy="65" rx="50" ry="22" fill="none" stroke="#2e7d32" stroke-width="2.5" clip-path="url(#bottomHalf)"/>
                    <!-- Pfeil rechts auf der Feldlinie (zeigt nach oben/hinten, mittig auf Tangente) -->
                    <polygon points="130,59 123,71 137,71" fill="#2e7d32"/>
                    <!-- Stromrichtung Pfeil (nach oben) -->
                    <polygon points="80,5 70,20 90,20" fill="#c62828"/>
                    <!-- Beschriftungen -->
                    <text x="100" y="18" font-size="11" fill="#c62828">I ↑</text>
                    <text x="135" y="80" font-size="11" fill="#2e7d32">B</text>
                </svg>
                <div style="font-size:0.85em;color:#666;margin-top:5px;">Seitenansicht: Strom nach oben → Feldlinie umschließt den Leiter</div>
            </div>

            <div class="exercise" id="ex2">
                <div class="exercise-header">Übung 2: Symbole im Leiterquerschnitt</div>
                <p>Was bedeuten die Symbole im Leiterquerschnitt?</p>
                <p style="font-size:1.2em;margin:10px 0;">
                    <span class="symbol symbol-out">&#8226;</span> = Punkt im Kreis &nbsp;&nbsp;&nbsp;
                    <span class="symbol symbol-in">&#215;</span> = Kreuz im Kreis
                </p>
                <div class="options" id="ex2-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex2" value="a" style="display:none">
                        Punkt = hinein, Kreuz = heraus
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex2" value="b" style="display:none">
                        Punkt = heraus (auf dich zu), Kreuz = hinein (von dir weg)
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex2" value="c" style="display:none">
                        Beide bedeuten "kein Strom"
                    </label>
                </div>
                <div class="feedback correct" id="ex2-correct">Richtig! Punkt = Pfeilspitze kommt auf dich zu (heraus). Kreuz = Pfeilende geht von dir weg (hinein).</div>
                <div class="feedback incorrect" id="ex2-incorrect">Denk an einen Pfeil: Die Spitze (Punkt) kommt auf dich zu, das Kreuz (Federn) geht weg.</div>
                <button onclick="checkEx2()">Prüfen</button>
            </div>
        </div>

        <!-- SECTION 3: Elektromagnet -->
        <div class="section" id="section3">
            <div class="section-title">3. Elektromagnet</div>

            <div class="info-box">
                <strong>Elektromagnet</strong> = Spule + Eisenkern<br>
                Das Magnetfeld einer Spule entspricht dem eines Stabmagneten (mit N- und S-Pol).
            </div>

            <div class="merksatz">
                <strong>Verstärkung des Elektromagneten:</strong>
                <ul style="margin-left:20px;margin-top:5px;">
                    <li>Stromstärke erhöhen</li>
                    <li>Windungszahl erhöhen</li>
                    <li>Eisenkern einführen</li>
                </ul>
            </div>

            <div class="info-box">
                <strong>Anwendungen von Elektromagneten:</strong>
                <ul style="margin-left:20px;margin-top:5px;">
                    <li><strong>Schrottplatz-Kran:</strong> Hebt Eisenschrott, lässt los beim Ausschalten</li>
                    <li><strong>Türklingel:</strong> Hammer schlägt auf Glocke durch An/Aus-Schaltung</li>
                    <li><strong>Relais:</strong> Kleiner Strom schaltet großen Strom (z.B. Anlasser im Auto)</li>
                    <li><strong>Elektromotor:</strong> Drehbewegung durch wechselnde Magnetfelder</li>
                    <li><strong>Lautsprecher:</strong> Membran wird durch wechselndes Magnetfeld bewegt</li>
                    <li><strong>MRT (Magnetresonanztomographie):</strong> Starke Elektromagnete für medizinische Bildgebung</li>
                </ul>
            </div>

            <div class="exercise" id="exVerwendung">
                <div class="exercise-header">Übung: Elektromagnet-Anwendungen</div>
                <p>Welche Aussagen über Elektromagnete sind <strong>richtig</strong>? (Mehrere Antworten möglich)</p>
                <div class="options" id="exVerwendung-options">
                    <label class="option" data-value="a">
                        <input type="checkbox" name="exVerwendung" value="a" style="display:none">
                        Ein Schrottplatz-Kran nutzt Elektromagnete, weil man sie ein- und ausschalten kann.
                    </label>
                    <label class="option" data-value="b">
                        <input type="checkbox" name="exVerwendung" value="b" style="display:none">
                        Elektromagnete sind immer stärker als Permanentmagnete.
                    </label>
                    <label class="option" data-value="c">
                        <input type="checkbox" name="exVerwendung" value="c" style="display:none">
                        Im Elektromotor sorgen Elektromagnete für die Drehbewegung.
                    </label>
                    <label class="option" data-value="d">
                        <input type="checkbox" name="exVerwendung" value="d" style="display:none">
                        Ein Relais kann mit einem kleinen Strom einen großen Strom schalten.
                    </label>
                </div>
                <div class="feedback correct" id="exVerwendung-correct">Richtig! a), c) und d) sind korrekt. Aussage b) ist falsch – es gibt sehr starke Permanentmagnete (z.B. Neodym).</div>
                <div class="feedback incorrect" id="exVerwendung-incorrect">Nicht ganz. Richtig sind: a) Schrottplatz-Kran (schaltbar), c) Elektromotor (Drehbewegung), d) Relais (kleiner Strom schaltet großen). Aussage b) ist falsch!</div>
                <button onclick="checkExVerwendung()">Prüfen</button>
            </div>

            <div class="exercise" id="ex3">
                <div class="exercise-header">Übung 3: Polung des Elektromagneten</div>
                <p>Was passiert mit der Polung (N/S), wenn man...</p>

                <p style="margin-top:10px;"><strong>a)</strong> ...die elektrischen Pole vertauscht?</p>
                <div class="options" id="ex3a-options">
                    <label class="option" data-value="gleich">
                        <input type="radio" name="ex3a" value="gleich" style="display:none">
                        Polung bleibt gleich
                    </label>
                    <label class="option" data-value="kehrt">
                        <input type="radio" name="ex3a" value="kehrt" style="display:none">
                        Polung kehrt sich um
                    </label>
                </div>

                <p style="margin-top:15px;"><strong>b)</strong> ...die Wickelrichtung umkehrt?</p>
                <div class="options" id="ex3b-options">
                    <label class="option" data-value="gleich">
                        <input type="radio" name="ex3b" value="gleich" style="display:none">
                        Polung bleibt gleich
                    </label>
                    <label class="option" data-value="kehrt">
                        <input type="radio" name="ex3b" value="kehrt" style="display:none">
                        Polung kehrt sich um
                    </label>
                </div>

                <p style="margin-top:15px;"><strong>c)</strong> ...beides gleichzeitig umkehrt?</p>
                <div class="options" id="ex3c-options">
                    <label class="option" data-value="gleich">
                        <input type="radio" name="ex3c" value="gleich" style="display:none">
                        Polung bleibt gleich
                    </label>
                    <label class="option" data-value="kehrt">
                        <input type="radio" name="ex3c" value="kehrt" style="display:none">
                        Polung kehrt sich um
                    </label>
                </div>

                <div class="feedback correct" id="ex3-correct">Richtig! a) kehrt um, b) kehrt um, c) bleibt gleich (doppelte Umkehrung hebt sich auf).</div>
                <div class="feedback incorrect" id="ex3-incorrect">Nicht ganz richtig. Merke: Jede einzelne Änderung kehrt die Polung um. Beide zusammen heben sich auf!</div>
                <button onclick="checkEx3()">Prüfen</button>
            </div>

            <div class="info-box" style="margin-top:20px;">
                <strong>Spulen-Polung aus Querschnitt bestimmen:</strong><br>
                Im Querschnitt siehst du die Stromrichtung in den Wicklungen:
                <ul style="margin-left:20px;margin-top:5px;">
                    <li><span class="symbol symbol-out">&#8226;</span> (Punkt) = Strom kommt heraus → Feldlinien verlaufen <strong>gegen den Uhrzeigersinn</strong></li>
                    <li><span class="symbol symbol-in">&#215;</span> (Kreuz) = Strom geht hinein → Feldlinien verlaufen <strong>im Uhrzeigersinn</strong></li>
                </ul>
                Die Feldlinien <strong>im Inneren</strong> der Spule zeigen zum <strong>Nordpol</strong>.
            </div>

            <div class="hand-rule-diagram" style="margin:15px 0;">
                <svg viewBox="0 0 300 100" width="340" style="max-width:100%;">
                    <!-- Spulenkörper -->
                    <rect x="60" y="25" width="180" height="50" fill="#e0e0e0" stroke="#888" stroke-width="1.5"/>

                    <!-- Querschnitte der Wicklungen (oben = Punkt, unten = Kreuz) -->
                    <!-- Oben: Punkte (Strom heraus) -->
                    <circle cx="90" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                    <circle cx="90" cy="35" r="2" fill="#333"/>
                    <circle cx="130" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                    <circle cx="130" cy="35" r="2" fill="#333"/>
                    <circle cx="170" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                    <circle cx="170" cy="35" r="2" fill="#333"/>
                    <circle cx="210" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                    <circle cx="210" cy="35" r="2" fill="#333"/>

                    <!-- Unten: Kreuze (Strom hinein) -->
                    <circle cx="90" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                    <line x1="84" y1="59" x2="96" y2="71" stroke="#333" stroke-width="2"/>
                    <line x1="96" y1="59" x2="84" y2="71" stroke="#333" stroke-width="2"/>
                    <circle cx="130" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                    <line x1="124" y1="59" x2="136" y2="71" stroke="#333" stroke-width="2"/>
                    <line x1="136" y1="59" x2="124" y2="71" stroke="#333" stroke-width="2"/>
                    <circle cx="170" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                    <line x1="164" y1="59" x2="176" y2="71" stroke="#333" stroke-width="2"/>
                    <line x1="176" y1="59" x2="164" y2="71" stroke="#333" stroke-width="2"/>
                    <circle cx="210" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                    <line x1="204" y1="59" x2="216" y2="71" stroke="#333" stroke-width="2"/>
                    <line x1="216" y1="59" x2="204" y2="71" stroke="#333" stroke-width="2"/>

                    <!-- Feldlinien im Inneren (grün, nach rechts) -->
                    <line x1="70" y1="50" x2="230" y2="50" stroke="#2e7d32" stroke-width="2"/>
                    <polygon points="230,50 220,45 220,55" fill="#2e7d32"/>
                    <text x="150" y="48" text-anchor="middle" font-size="10" fill="#2e7d32">B</text>

                    <!-- Beschriftungen -->
                    <text x="30" y="55" text-anchor="middle" font-size="11" fill="#1565c0" font-weight="bold">S</text>
                    <text x="270" y="55" text-anchor="middle" font-size="11" fill="#c62828" font-weight="bold">N</text>
                </svg>
                <div style="font-size:0.85em;color:#666;margin-top:5px;">Oben ⊙ + unten ⊗ → Magnetfeld zeigt nach rechts → Nordpol rechts</div>
            </div>

            <div class="exercise" id="exSpule">
                <div class="exercise-header">Übung: Spulen-Polung bestimmen</div>
                <p>Bestimme die magnetische Polung der Spule aus dem Querschnitt:</p>

                <div class="hand-rule-diagram" style="background:#fff; margin:10px 0;">
                    <svg viewBox="0 0 300 100" width="300" style="max-width:100%;">
                        <!-- Spulenkörper -->
                        <rect x="60" y="25" width="180" height="50" fill="#e0e0e0" stroke="#888" stroke-width="1.5"/>

                        <!-- Oben: Kreuze (Strom hinein) -->
                        <circle cx="100" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <line x1="94" y1="29" x2="106" y2="41" stroke="#333" stroke-width="2"/>
                        <line x1="106" y1="29" x2="94" y2="41" stroke="#333" stroke-width="2"/>
                        <circle cx="150" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <line x1="144" y1="29" x2="156" y2="41" stroke="#333" stroke-width="2"/>
                        <line x1="156" y1="29" x2="144" y2="41" stroke="#333" stroke-width="2"/>
                        <circle cx="200" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <line x1="194" y1="29" x2="206" y2="41" stroke="#333" stroke-width="2"/>
                        <line x1="206" y1="29" x2="194" y2="41" stroke="#333" stroke-width="2"/>

                        <!-- Unten: Punkte (Strom heraus) -->
                        <circle cx="100" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <circle cx="100" cy="65" r="2" fill="#333"/>
                        <circle cx="150" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <circle cx="150" cy="65" r="2" fill="#333"/>
                        <circle cx="200" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <circle cx="200" cy="65" r="2" fill="#333"/>

                        <!-- Fragezeichen für Pole -->
                        <text x="30" y="55" text-anchor="middle" font-size="14" fill="#666" font-weight="bold">?</text>
                        <text x="270" y="55" text-anchor="middle" font-size="14" fill="#666" font-weight="bold">?</text>
                    </svg>
                </div>

                <p style="margin-top:10px;">Wo liegt der <strong>Nordpol</strong>?</p>
                <div class="options" id="exSpule-options">
                    <label class="option" data-value="links">
                        <input type="radio" name="exSpule" value="links" style="display:none">
                        Links (Nordpol links, Südpol rechts)
                    </label>
                    <label class="option" data-value="rechts">
                        <input type="radio" name="exSpule" value="rechts" style="display:none">
                        Rechts (Nordpol rechts, Südpol links)
                    </label>
                </div>
                <div class="feedback correct" id="exSpule-correct">Richtig! Oben ⊗ (Strom hinein) → Feldlinien im Uhrzeigersinn. Unten ⊙ (Strom heraus) → Feldlinien gegen Uhrzeigersinn. Im Inneren zeigt B nach <strong>links</strong> → Nordpol ist <strong>links</strong>.</div>
                <div class="feedback incorrect" id="exSpule-incorrect">Nicht ganz. Denke an die Feldlinien: Oben ⊗ → im Uhrzeigersinn, unten ⊙ → gegen Uhrzeigersinn. Im Inneren zeigen beide nach links → Nordpol links!</div>
                <button onclick="checkExSpule()">Prüfen</button>
            </div>
        </div>

        <!-- SECTION 4: Lorentzkraft & Rechte-Hand-Regel -->
        <div class="section" id="section4">
            <div class="section-title">4. Lorentzkraft & Rechte-Hand-Regel</div>

            <div class="info-box">
                <strong>Elektromotorisches Prinzip:</strong><br>
                Auf einen stromdurchflossenen Leiter im Magnetfeld wirkt eine Kraft – die <strong>Lorentzkraft</strong>.
            </div>

            <div class="merksatz">
                <strong>Rechte-Hand-Regel (UVW-Regel):</strong>
                <table class="rule-table">
                    <tr>
                        <th>Finger</th>
                        <th>Bedeutung</th>
                    </tr>
                    <tr>
                        <td><strong>Daumen</strong></td>
                        <td><strong>U</strong>rsache: Technische Stromrichtung (oder Bewegung positiver Ladung)</td>
                    </tr>
                    <tr>
                        <td><strong>Zeigefinger</strong></td>
                        <td><strong>V</strong>ermittler: Magnetfeldrichtung (von N nach S)</td>
                    </tr>
                    <tr>
                        <td><strong>Mittelfinger</strong></td>
                        <td><strong>W</strong>irkung: Lorentzkraft (Kraftrichtung)</td>
                    </tr>
                </table>
            </div>

            <div class="tip">
                Bei <strong>negativen Ladungen</strong> (Elektronen): Daumen zeigt <strong>entgegen</strong> der Bewegungsrichtung!
            </div>

            <div class="exercise" id="ex4">
                <div class="exercise-header">Übung 4: Rechte-Hand-Regel anwenden</div>
                <p>Ein Leiter wird von Strom durchflossen (Richtung: nach rechts →).<br>
                Das Magnetfeld zeigt nach oben (↑).<br>
                In welche Richtung wirkt die Lorentzkraft?</p>

                <div class="hand-rule-diagram" style="background:#fff;">
                    <svg viewBox="0 0 200 150" width="250">
                        <!-- Magnet N -->
                        <rect x="20" y="120" width="160" height="25" fill="#c62828" stroke="#333"/>
                        <text x="100" y="137" text-anchor="middle" fill="white" font-weight="bold">N</text>
                        <!-- Magnet S -->
                        <rect x="20" y="5" width="160" height="25" fill="#1565c0" stroke="#333"/>
                        <text x="100" y="22" text-anchor="middle" fill="white" font-weight="bold">S</text>
                        <!-- Magnetfeld Pfeile (grün) -->
                        <line x1="60" y1="110" x2="60" y2="40" stroke="#2e7d32" stroke-width="2"/>
                        <polygon points="60,40 55,50 65,50" fill="#2e7d32"/>
                        <line x1="140" y1="110" x2="140" y2="40" stroke="#2e7d32" stroke-width="2"/>
                        <polygon points="140,40 135,50 145,50" fill="#2e7d32"/>
                        <text x="155" y="75" font-size="12" fill="#2e7d32">B</text>
                        <!-- Leiter -->
                        <rect x="70" y="70" width="60" height="12" fill="#888" stroke="#333"/>
                        <!-- Strom Pfeil -->
                        <line x1="50" y1="76" x2="90" y2="76" stroke="#c62828" stroke-width="3"/>
                        <polygon points="90,76 80,71 80,81" fill="#c62828"/>
                        <text x="55" y="68" font-size="11" fill="#c62828">I</text>
                    </svg>
                </div>

                <div class="options" id="ex4-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex4" value="a" style="display:none">
                        Nach oben (↑)
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex4" value="b" style="display:none">
                        Nach unten (↓)
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex4" value="c" style="display:none">
                        Aus der Zeichenebene heraus (auf dich zu)
                    </label>
                    <label class="option" data-value="d">
                        <input type="radio" name="ex4" value="d" style="display:none">
                        In die Zeichenebene hinein (von dir weg)
                    </label>
                </div>
                <div class="feedback correct" id="ex4-correct">Richtig! Daumen → (Strom), Zeigefinger ↑ (Magnetfeld), Mittelfinger zeigt aus der Ebene heraus.</div>
                <div class="feedback incorrect" id="ex4-incorrect">Nutze die Rechte-Hand-Regel: Daumen = Strom (→), Zeigefinger = Magnetfeld (↑). Der Mittelfinger zeigt dann aus der Ebene heraus.</div>
                <button onclick="checkEx4()">Prüfen</button>
            </div>

            <div class="exercise" id="ex5">
                <div class="exercise-header">Übung 5: Elektron im Magnetfeld</div>
                <p>Ein <strong>Elektron (e⁻)</strong> bewegt sich nach rechts (→).<br>
                Das Magnetfeld zeigt aus der Zeichenebene heraus (auf dich zu).<br>
                In welche Richtung wird das Elektron abgelenkt?</p>

                <div class="hand-rule-diagram" style="background:#fff;">
                    <svg viewBox="0 0 200 120" width="250">
                        <!-- Magnetfeld Symbole (Punkte = heraus, grün) -->
                        <circle cx="40" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="40" cy="30" r="2" fill="#2e7d32"/>
                        <circle cx="100" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="100" cy="30" r="2" fill="#2e7d32"/>
                        <circle cx="160" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="160" cy="30" r="2" fill="#2e7d32"/>
                        <circle cx="40" cy="90" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="40" cy="90" r="2" fill="#2e7d32"/>
                        <circle cx="100" cy="90" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="100" cy="90" r="2" fill="#2e7d32"/>
                        <circle cx="160" cy="90" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="160" cy="90" r="2" fill="#2e7d32"/>
                        <text x="180" y="60" font-size="12" fill="#2e7d32">B (heraus)</text>
                        <!-- Elektron -->
                        <circle cx="60" cy="60" r="12" fill="#1565c0" stroke="#333"/>
                        <text x="60" y="65" text-anchor="middle" fill="white" font-size="12" font-weight="bold">e⁻</text>
                        <!-- Bewegung Pfeil -->
                        <line x1="80" y1="60" x2="130" y2="60" stroke="#1565c0" stroke-width="3"/>
                        <polygon points="130,60 120,55 120,65" fill="#1565c0"/>
                        <text x="105" y="52" font-size="11" fill="#1565c0">v</text>
                    </svg>
                </div>

                <div class="tip" style="margin-bottom:10px;">
                    Bei Elektronen: Daumen zeigt <strong>entgegen</strong> der Bewegungsrichtung (also nach links ←)!
                </div>

                <div class="options" id="ex5-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex5" value="a" style="display:none">
                        Nach oben (↑)
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex5" value="b" style="display:none">
                        Nach unten (↓)
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex5" value="c" style="display:none">
                        Nach links (←)
                    </label>
                    <label class="option" data-value="d">
                        <input type="radio" name="ex5" value="d" style="display:none">
                        Nach rechts (→)
                    </label>
                </div>
                <div class="feedback correct" id="ex5-correct">Richtig! Daumen ← (entgegen Elektronenbewegung), Zeigefinger heraus (⊙), Mittelfinger zeigt nach oben (↑).</div>
                <div class="feedback incorrect" id="ex5-incorrect">Denk daran: Bei Elektronen zeigt der Daumen ENTGEGEN der Bewegung! Also Daumen ←, Zeigefinger heraus → Mittelfinger zeigt nach oben (↑).</div>
                <button onclick="checkEx5()">Prüfen</button>
            </div>
        </div>

        <!-- SECTION 5: Zusammenfassung -->
        <div class="section" id="section5">
            <div class="section-title">5. Zusammenfassung</div>

            <div class="score-display" id="scoreDisplay">
                <div>Dein Ergebnis:</div>
                <div class="score" id="finalScore">0 / 7</div>
                <div style="margin-top:10px;font-size:0.9em;" id="scoreMessage"></div>
            </div>

            <div class="merksatz">
                <strong>Die wichtigsten Regeln:</strong>
                <ul style="margin-left:20px;margin-top:8px;">
                    <li><strong>Oersted:</strong> Strom erzeugt Magnetfeld</li>
                    <li><strong>Rechte-Faust:</strong> Daumen = Strom, Finger = Feldlinien</li>
                    <li><strong>Rechte-Hand:</strong> Daumen = Strom/Bewegung, Zeigefinger = Magnetfeld, Mittelfinger = Kraft</li>
                    <li><strong>Elektron:</strong> Daumen entgegen der Bewegungsrichtung!</li>
                </ul>
            </div>

        </div>
    </div>

    <script>
        // ES5 JavaScript - no let/const/arrow functions
        var STORAGE_KEY = 'lp-9e-elektromagnetismus';
        var score = 0;
        var totalExercises = 7;
        var answeredExercises = {};

        function saveProgress() {
            var data = {
                score: score,
                answered: answeredExercises,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        function loadProgress() {
            var saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                var data = JSON.parse(saved);
                score = data.score || 0;
                answeredExercises = data.answered || {};
                updateProgress();
                updateScore();
            }
        }

        function updateProgress() {
            var answered = Object.keys(answeredExercises).length;
            var percent = (answered / totalExercises) * 100;
            document.getElementById('progressFill').style.width = percent + '%';
        }

        function updateScore() {
            document.getElementById('finalScore').textContent = score + ' / ' + totalExercises;
            var message = '';
            if (score === totalExercises) {
                message = 'Perfekt! Du hast alle Regeln verstanden.';
            } else if (score >= totalExercises - 1) {
                message = 'Sehr gut! Schau dir die Fehler nochmal an.';
            } else {
                message = 'Wiederhole die Regeln und versuche es erneut.';
            }
            document.getElementById('scoreMessage').textContent = message;
        }

        function setupOptions(containerId) {
            var container = document.getElementById(containerId);
            if (!container) {
                console.error('Container not found: ' + containerId);
                return;
            }
            var options = container.querySelectorAll('.option');
            for (var i = 0; i < options.length; i++) {
                (function(opt) {
                    var input = opt.querySelector('input');
                    var isCheckbox = input && input.type === 'checkbox';

                    opt.addEventListener('click', function(e) {
                        e.preventDefault();

                        if (isCheckbox) {
                            // Multi-Select: Toggle
                            opt.classList.toggle('selected');
                            if (input) input.checked = opt.classList.contains('selected');
                        } else {
                            // Single-Select: Deselect siblings
                            var siblings = opt.parentNode.querySelectorAll('.option');
                            for (var j = 0; j < siblings.length; j++) {
                                siblings[j].classList.remove('selected');
                                var sib = siblings[j].querySelector('input');
                                if (sib) sib.checked = false;
                            }
                            opt.classList.add('selected');
                            if (input) input.checked = true;
                        }
                    });
                })(options[i]);
            }
        }

        function checkEx1() {
            if (answeredExercises['ex1']) return;
            var selected = document.querySelector('input[name="ex1"]:checked');
            if (!selected) return;

            var options = document.querySelectorAll('#ex1-options .option');
            var isCorrect = selected.value === 'b';

            for (var i = 0; i < options.length; i++) {
                var opt = options[i];
                if (opt.dataset.value === 'b') {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
            }

            if (isCorrect) {
                document.getElementById('ex1-correct').classList.add('show');
                score++;
            } else {
                document.getElementById('ex1-incorrect').classList.add('show');
            }

            answeredExercises['ex1'] = true;
            updateProgress();
            updateScore();
            saveProgress();
        }

        function checkEx2() {
            if (answeredExercises['ex2']) return;
            var selected = document.querySelector('input[name="ex2"]:checked');
            if (!selected) return;

            var options = document.querySelectorAll('#ex2-options .option');
            var isCorrect = selected.value === 'b';

            for (var i = 0; i < options.length; i++) {
                var opt = options[i];
                if (opt.dataset.value === 'b') {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
            }

            if (isCorrect) {
                document.getElementById('ex2-correct').classList.add('show');
                score++;
            } else {
                document.getElementById('ex2-incorrect').classList.add('show');
            }

            answeredExercises['ex2'] = true;
            updateProgress();
            updateScore();
            saveProgress();
        }

        function checkEx3() {
            if (answeredExercises['ex3']) return;
            var a = document.querySelector('input[name="ex3a"]:checked');
            var b = document.querySelector('input[name="ex3b"]:checked');
            var c = document.querySelector('input[name="ex3c"]:checked');
            if (!a || !b || !c) return;

            var correctA = a.value === 'kehrt';
            var correctB = b.value === 'kehrt';
            var correctC = c.value === 'gleich';
            var allCorrect = correctA && correctB && correctC;

            // Mark options
            var containers = ['ex3a-options', 'ex3b-options', 'ex3c-options'];
            var correctVals = ['kehrt', 'kehrt', 'gleich'];

            for (var i = 0; i < containers.length; i++) {
                var opts = document.querySelectorAll('#' + containers[i] + ' .option');
                for (var j = 0; j < opts.length; j++) {
                    if (opts[j].dataset.value === correctVals[i]) {
                        opts[j].classList.add('correct');
                    } else if (opts[j].classList.contains('selected')) {
                        opts[j].classList.add('incorrect');
                    }
                }
            }

            if (allCorrect) {
                document.getElementById('ex3-correct').classList.add('show');
                score++;
            } else {
                document.getElementById('ex3-incorrect').classList.add('show');
            }

            answeredExercises['ex3'] = true;
            updateProgress();
            updateScore();
            saveProgress();
        }

        function checkExVerwendung() {
            if (answeredExercises['exVerwendung']) return;

            var options = document.querySelectorAll('#exVerwendung-options .option');
            var selected = [];
            for (var i = 0; i < options.length; i++) {
                if (options[i].classList.contains('selected')) {
                    selected.push(options[i].dataset.value);
                }
            }
            if (selected.length === 0) return;

            // Richtig: a, c, d; Falsch: b
            var correct = ['a', 'c', 'd'];
            var allCorrect = true;

            for (var i = 0; i < options.length; i++) {
                var val = options[i].dataset.value;
                var isCorrectAnswer = correct.indexOf(val) !== -1;
                var wasSelected = selected.indexOf(val) !== -1;

                if (isCorrectAnswer) {
                    options[i].classList.add('correct');
                    if (!wasSelected) allCorrect = false;
                } else if (wasSelected) {
                    options[i].classList.add('incorrect');
                    allCorrect = false;
                }
            }

            if (allCorrect) {
                document.getElementById('exVerwendung-correct').classList.add('show');
                score++;
            } else {
                document.getElementById('exVerwendung-incorrect').classList.add('show');
            }

            answeredExercises['exVerwendung'] = true;
            updateProgress();
            updateScore();
            saveProgress();
        }

        function checkExSpule() {
            if (answeredExercises['exSpule']) return;
            var selected = document.querySelector('input[name="exSpule"]:checked');
            if (!selected) return;

            var options = document.querySelectorAll('#exSpule-options .option');
            var isCorrect = selected.value === 'links';

            for (var i = 0; i < options.length; i++) {
                var opt = options[i];
                if (opt.dataset.value === 'links') {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
            }

            if (isCorrect) {
                document.getElementById('exSpule-correct').classList.add('show');
                score++;
            } else {
                document.getElementById('exSpule-incorrect').classList.add('show');
            }

            answeredExercises['exSpule'] = true;
            updateProgress();
            updateScore();
            saveProgress();
        }

        function checkEx4() {
            if (answeredExercises['ex4']) return;
            var selected = document.querySelector('input[name="ex4"]:checked');
            if (!selected) return;

            var options = document.querySelectorAll('#ex4-options .option');
            var isCorrect = selected.value === 'c';

            for (var i = 0; i < options.length; i++) {
                var opt = options[i];
                if (opt.dataset.value === 'c') {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
            }

            if (isCorrect) {
                document.getElementById('ex4-correct').classList.add('show');
                score++;
            } else {
                document.getElementById('ex4-incorrect').classList.add('show');
            }

            answeredExercises['ex4'] = true;
            updateProgress();
            updateScore();
            saveProgress();
        }

        function checkEx5() {
            if (answeredExercises['ex5']) return;
            var selected = document.querySelector('input[name="ex5"]:checked');
            if (!selected) return;

            var options = document.querySelectorAll('#ex5-options .option');
            var isCorrect = selected.value === 'a';

            for (var i = 0; i < options.length; i++) {
                var opt = options[i];
                if (opt.dataset.value === 'a') {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
            }

            if (isCorrect) {
                document.getElementById('ex5-correct').classList.add('show');
                score++;
            } else {
                document.getElementById('ex5-incorrect').classList.add('show');
            }

            answeredExercises['ex5'] = true;
            updateProgress();
            updateScore();
            saveProgress();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupOptions('ex1-options');
            setupOptions('ex2-options');
            setupOptions('exVerwendung-options');
            setupOptions('ex3a-options');
            setupOptions('ex3b-options');
            setupOptions('ex3c-options');
            setupOptions('exSpule-options');
            setupOptions('ex4-options');
            setupOptions('ex5-options');
            loadProgress();
        });
    </script>
</body>
</html>
