<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Übung: Elektromagnetismus & Lorentzkraft</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f5;
            color: #222;
            font-size: 16px;
            line-height: 1.5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: #2c5aa0;
            color: white;
            padding: 15px 20px;
            margin-bottom: 20px;
        }
        header h1 {
            font-size: 1.3em;
            font-weight: 600;
        }
        header .meta {
            font-size: 0.85em;
            opacity: 0.9;
            margin-top: 5px;
        }
        .progress-bar {
            background: #ddd;
            height: 6px;
            margin-bottom: 20px;
        }
        .progress-fill {
            background: #2c5aa0;
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }
        .section {
            background: white;
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 15px;
        }
        .section-title {
            color: #2c5aa0;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #2c5aa0;
        }
        .info-box {
            background: #f0f4f8;
            border-left: 3px solid #2c5aa0;
            padding: 12px 15px;
            margin: 12px 0;
            font-size: 0.95em;
        }
        .merksatz {
            background: #e8f5e9;
            border-left: 3px solid #2a7a4b;
            padding: 12px 15px;
            margin: 12px 0;
        }
        .exercise {
            background: #fafafa;
            border: 1px solid #e0e0e0;
            padding: 15px;
            margin: 15px 0;
        }
        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .exercise-title {
            font-weight: 600;
            color: #2c5aa0;
        }
        .niveau-badge {
            padding: 2px 8px;
            font-size: 0.8em;
            font-weight: 600;
        }
        .niveau-1 { background: #e8f5e9; color: #2a7a4b; }
        .niveau-2 { background: #e3f2fd; color: #2c5aa0; }
        .niveau-3 { background: #f3e5f5; color: #7b1fa2; }
        .options {
            margin: 10px 0;
        }
        .option {
            display: block;
            padding: 10px 15px;
            margin: 5px 0;
            background: white;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
        }
        .option:hover {
            background: #f5f5f5;
            border-color: #2c5aa0;
        }
        .option.selected {
            background: #e3f2fd;
            border-color: #2c5aa0;
        }
        .option.correct {
            background: #e8f5e9;
            border-color: #2a7a4b;
        }
        .option.incorrect {
            background: #ffebee;
            border-color: #c62828;
        }
        .option.disabled {
            pointer-events: none;
            opacity: 0.8;
        }
        .feedback {
            padding: 12px 15px;
            margin-top: 10px;
            display: none;
            font-size: 0.95em;
        }
        .feedback.correct {
            background: #e8f5e9;
            border-left: 3px solid #2a7a4b;
            color: #1b5e20;
        }
        .feedback.incorrect {
            background: #ffebee;
            border-left: 3px solid #c62828;
            color: #b71c1c;
        }
        .feedback.show {
            display: block;
        }
        button {
            background: #2c5aa0;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 0.95em;
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background: #1e4080;
        }
        button:disabled {
            background: #aaa;
            cursor: not-allowed;
        }
        .symbol {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border: 2px solid #333;
            border-radius: 50%;
            font-weight: bold;
            margin: 0 3px;
            vertical-align: middle;
        }
        .symbol-out {
            background: #e3f2fd;
        }
        .symbol-in {
            background: #ffebee;
            font-size: 20px;
        }
        .diagram {
            text-align: center;
            padding: 15px;
            background: #f9f9f9;
            margin: 10px 0;
        }
        .diagram svg {
            max-width: 100%;
        }
        .score-display {
            text-align: center;
            padding: 20px;
            background: #e8f5e9;
            border: 2px solid #2a7a4b;
            margin: 20px 0;
        }
        .score-display .score {
            font-size: 2em;
            color: #2a7a4b;
            font-weight: bold;
        }
        .tip {
            background: #fff3e0;
            border-left: 3px solid #b35c00;
            padding: 10px 15px;
            margin: 10px 0;
            font-size: 0.9em;
        }
        .tip:before {
            content: "Tipp: ";
            font-weight: 600;
            color: #b35c00;
        }
        table.rule-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 0.9em;
        }
        table.rule-table th, table.rule-table td {
            border: 1px solid #ddd;
            padding: 8px 10px;
            text-align: left;
        }
        table.rule-table th {
            background: #2c5aa0;
            color: white;
        }
    </style>
</head>
<body>
    <header>
        <h1>Übung: Elektromagnetismus & Lorentzkraft</h1>
        <div class="meta">Physik Klasse 9 | Selbstständiges Üben | ca. 20 Minuten</div>
    </header>

    <div class="container">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- SECTION 1: Oersted & Grundlagen -->
        <div class="section" id="section1">
            <div class="section-title">1. Oersted-Versuch & Grundlagen</div>

            <div class="info-box">
                <strong>Wiederholung:</strong> Hans Christian Oersted entdeckte 1820 den Zusammenhang zwischen Elektrizität und Magnetismus.
            </div>

            <div class="exercise" id="ex1-1">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 1.1</span>
                    <span class="niveau-badge niveau-1">★</span>
                </div>
                <p>Welche Aussage beschreibt die Entdeckung von Oersted am besten?</p>
                <div class="options" id="ex1-1-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex1-1" value="a" style="display:none">
                        Magnete können Strom erzeugen
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex1-1" value="b" style="display:none">
                        Ein stromdurchflossener Leiter ist von einem Magnetfeld umgeben
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex1-1" value="c" style="display:none">
                        Elektronen sind magnetisch
                    </label>
                </div>
                <div class="feedback correct" id="ex1-1-correct">Richtig! Oersted zeigte, dass ein stromdurchflossener Leiter ein Magnetfeld erzeugt, das eine Kompassnadel ablenkt.</div>
                <div class="feedback incorrect" id="ex1-1-incorrect">Nicht ganz. Oersted entdeckte: Ein stromdurchflossener Leiter ist von einem Magnetfeld umgeben. Das war der erste Nachweis des Zusammenhangs zwischen Elektrizität und Magnetismus.</div>
                <button onclick="checkExercise('ex1-1', 'b')">Prüfen</button>
            </div>

            <div class="exercise" id="ex1-2">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 1.2</span>
                    <span class="niveau-badge niveau-2">★★</span>
                </div>
                <p>Die Feldlinien um einen geraden, stromdurchflossenen Leiter...</p>
                <div class="options" id="ex1-2-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex1-2" value="a" style="display:none">
                        verlaufen parallel zum Leiter
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex1-2" value="b" style="display:none">
                        bilden konzentrische Kreise um den Leiter
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex1-2" value="c" style="display:none">
                        zeigen vom Leiter weg
                    </label>
                </div>
                <div class="feedback correct" id="ex1-2-correct">Richtig! Die magnetischen Feldlinien bilden geschlossene Kreise um den Leiter herum.</div>
                <div class="feedback incorrect" id="ex1-2-incorrect">Die Feldlinien bilden konzentrische Kreise um den Leiter. Du kannst dir das mit der Rechte-Faust-Regel merken: Daumen = Stromrichtung, gekrümmte Finger = Feldlinien.</div>
                <button onclick="checkExercise('ex1-2', 'b')">Prüfen</button>
            </div>
        </div>

        <!-- SECTION 2: Symbole & Rechte-Faust-Regel -->
        <div class="section" id="section2">
            <div class="section-title">2. Symbole & Rechte-Faust-Regel</div>

            <div class="info-box">
                <strong>Symbole im Querschnitt:</strong><br>
                <span class="symbol symbol-out">&#8226;</span> Punkt = Pfeilspitze kommt auf dich zu (Strom/Feld heraus)<br>
                <span class="symbol symbol-in">&#215;</span> Kreuz = Pfeilende geht von dir weg (Strom/Feld hinein)
            </div>

            <div class="exercise" id="ex2-1">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 2.1</span>
                    <span class="niveau-badge niveau-1">★</span>
                </div>
                <p>Ein Leiter wird senkrecht zur Zeichenebene von Strom durchflossen. Du siehst das Symbol <span class="symbol symbol-in">&#215;</span>. In welche Richtung fließt der Strom?</p>
                <div class="options" id="ex2-1-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex2-1" value="a" style="display:none">
                        Auf mich zu (aus der Zeichenebene heraus)
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex2-1" value="b" style="display:none">
                        Von mir weg (in die Zeichenebene hinein)
                    </label>
                </div>
                <div class="feedback correct" id="ex2-1-correct">Richtig! Das Kreuz ⊗ zeigt das Pfeilende – der Strom fließt von dir weg, also in die Zeichenebene hinein.</div>
                <div class="feedback incorrect" id="ex2-1-incorrect">Denk an einen Pfeil: Das Kreuz ⊗ zeigt die Federn am Ende des Pfeils – der Pfeil (Strom) geht von dir weg.</div>
                <button onclick="checkExercise('ex2-1', 'b')">Prüfen</button>
            </div>

            <div class="exercise" id="ex2-2">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 2.2</span>
                    <span class="niveau-badge niveau-2">★★</span>
                </div>
                <p>Bei der <strong>Rechte-Faust-Regel</strong> für einen geraden Leiter gilt:</p>
                <div class="options" id="ex2-2-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex2-2" value="a" style="display:none">
                        Daumen = Feldlinien, Finger = Stromrichtung
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex2-2" value="b" style="display:none">
                        Daumen = Stromrichtung, gekrümmte Finger = Feldlinien
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex2-2" value="c" style="display:none">
                        Daumen = Kraft, Finger = Magnetfeld
                    </label>
                </div>
                <div class="feedback correct" id="ex2-2-correct">Richtig! Bei der Rechte-Faust-Regel zeigt der Daumen in die technische Stromrichtung, die gekrümmten Finger zeigen die Richtung der Feldlinien.</div>
                <div class="feedback incorrect" id="ex2-2-incorrect">Bei der Rechte-Faust-Regel: Daumen = Stromrichtung (technisch), gekrümmte Finger = Feldlinien. Nicht verwechseln mit der Rechte-Hand-Regel (UVW) für die Lorentzkraft!</div>
                <button onclick="checkExercise('ex2-2', 'b')">Prüfen</button>
            </div>

            <div class="exercise" id="ex2-3">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 2.3</span>
                    <span class="niveau-badge niveau-3">★★★</span>
                </div>
                <p>Ein Leiter verläuft senkrecht zur Zeichenebene. Der Strom fließt <strong>auf dich zu</strong> (⊙).</p>
                <div class="diagram">
                    <svg viewBox="0 0 200 200" width="200">
                        <!-- Leiter mit Punkt -->
                        <circle cx="100" cy="100" r="15" fill="white" stroke="#333" stroke-width="2"/>
                        <circle cx="100" cy="100" r="4" fill="#333"/>
                        <!-- Fragezeichen für Feldlinien -->
                        <text x="100" y="50" text-anchor="middle" font-size="16" fill="#2c5aa0">Feldlinien?</text>
                        <!-- Optionen andeuten -->
                        <path d="M 60 100 A 40 40 0 0 1 100 60" fill="none" stroke="#ccc" stroke-width="2" stroke-dasharray="5,5"/>
                    </svg>
                </div>
                <p>In welche Richtung verlaufen die Feldlinien (von oben gesehen)?</p>
                <div class="options" id="ex2-3-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex2-3" value="a" style="display:none">
                        Im Uhrzeigersinn
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex2-3" value="b" style="display:none">
                        Gegen den Uhrzeigersinn
                    </label>
                </div>
                <div class="tip">Stell dir vor, du umfasst den Leiter mit der rechten Faust, sodass der Daumen auf dich zeigt (= Stromrichtung).</div>
                <div class="feedback correct" id="ex2-3-correct">Richtig! Daumen auf dich zu → gekrümmte Finger zeigen gegen den Uhrzeigersinn. Die Feldlinien verlaufen gegen den Uhrzeigersinn um den Leiter.</div>
                <div class="feedback incorrect" id="ex2-3-incorrect">Wende die Rechte-Faust-Regel an: Daumen zeigt auf dich (Strom ⊙). Deine gekrümmten Finger zeigen dann gegen den Uhrzeigersinn.</div>
                <button onclick="checkExercise('ex2-3', 'b')">Prüfen</button>
            </div>
        </div>

        <!-- SECTION 3: Elektromagnet -->
        <div class="section" id="section3">
            <div class="section-title">3. Elektromagnet</div>

            <div class="info-box">
                <strong>Elektromagnet</strong> = Spule (+ oft Eisenkern)<br>
                Das Magnetfeld einer Spule entspricht dem eines Stabmagneten.
            </div>

            <div class="exercise" id="ex3-1">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 3.1</span>
                    <span class="niveau-badge niveau-1">★</span>
                </div>
                <p>Welche Maßnahme verstärkt das Magnetfeld eines Elektromagneten <strong>nicht</strong>?</p>
                <div class="options" id="ex3-1-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex3-1" value="a" style="display:none">
                        Stromstärke erhöhen
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex3-1" value="b" style="display:none">
                        Windungszahl erhöhen
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex3-1" value="c" style="display:none">
                        Spannung der Batterie messen
                    </label>
                    <label class="option" data-value="d">
                        <input type="radio" name="ex3-1" value="d" style="display:none">
                        Eisenkern einführen
                    </label>
                </div>
                <div class="feedback correct" id="ex3-1-correct">Richtig! Das bloße Messen der Spannung ändert nichts am Magnetfeld. Verstärkung durch: mehr Strom, mehr Windungen, Eisenkern.</div>
                <div class="feedback incorrect" id="ex3-1-incorrect">Die Frage war: Was verstärkt das Feld NICHT? Das Messen der Spannung ist keine Maßnahme zur Verstärkung. Strom erhöhen, Windungen erhöhen und Eisenkern einführen verstärken das Feld.</div>
                <button onclick="checkExercise('ex3-1', 'c')">Prüfen</button>
            </div>

            <div class="exercise" id="ex3-2">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 3.2</span>
                    <span class="niveau-badge niveau-2">★★</span>
                </div>
                <p>Bei einem Elektromagneten wird <strong>sowohl</strong> die Polung der Spannungsquelle vertauscht <strong>als auch</strong> die Wickelrichtung umgekehrt. Was passiert mit der magnetischen Polung?</p>
                <div class="options" id="ex3-2-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex3-2" value="a" style="display:none">
                        Die Polung kehrt sich um
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex3-2" value="b" style="display:none">
                        Die Polung bleibt gleich
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex3-2" value="c" style="display:none">
                        Das Magnetfeld verschwindet
                    </label>
                </div>
                <div class="feedback correct" id="ex3-2-correct">Richtig! Jede einzelne Änderung würde die Polung umkehren. Aber zwei Umkehrungen heben sich auf → die Polung bleibt gleich.</div>
                <div class="feedback incorrect" id="ex3-2-incorrect">Denk daran: Pole vertauschen = Umkehrung. Wickelrichtung umkehren = Umkehrung. Zwei Umkehrungen heben sich auf! Die Polung bleibt gleich.</div>
                <button onclick="checkExercise('ex3-2', 'b')">Prüfen</button>
            </div>

            <div class="exercise" id="ex3-3">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 3.3</span>
                    <span class="niveau-badge niveau-2">★★</span>
                </div>
                <p>Bestimme die Polung der Spule aus dem Querschnitt:</p>
                <div class="diagram">
                    <svg viewBox="0 0 300 100" width="320">
                        <!-- Spulenkörper -->
                        <rect x="60" y="25" width="180" height="50" fill="#e0e0e0" stroke="#888" stroke-width="1.5"/>
                        <!-- Oben: Kreuze (Strom hinein) -->
                        <circle cx="100" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <line x1="94" y1="29" x2="106" y2="41" stroke="#333" stroke-width="2"/>
                        <line x1="106" y1="29" x2="94" y2="41" stroke="#333" stroke-width="2"/>
                        <circle cx="150" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <line x1="144" y1="29" x2="156" y2="41" stroke="#333" stroke-width="2"/>
                        <line x1="156" y1="29" x2="144" y2="41" stroke="#333" stroke-width="2"/>
                        <circle cx="200" cy="35" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <line x1="194" y1="29" x2="206" y2="41" stroke="#333" stroke-width="2"/>
                        <line x1="206" y1="29" x2="194" y2="41" stroke="#333" stroke-width="2"/>
                        <!-- Unten: Punkte (Strom heraus) -->
                        <circle cx="100" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <circle cx="100" cy="65" r="2" fill="#333"/>
                        <circle cx="150" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <circle cx="150" cy="65" r="2" fill="#333"/>
                        <circle cx="200" cy="65" r="8" fill="white" stroke="#333" stroke-width="1.5"/>
                        <circle cx="200" cy="65" r="2" fill="#333"/>
                        <!-- Fragezeichen -->
                        <text x="30" y="55" text-anchor="middle" font-size="16" fill="#666">?</text>
                        <text x="270" y="55" text-anchor="middle" font-size="16" fill="#666">?</text>
                    </svg>
                </div>
                <p>Wo liegt der <strong>Nordpol</strong>?</p>
                <div class="options" id="ex3-3-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex3-3" value="a" style="display:none">
                        Links
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex3-3" value="b" style="display:none">
                        Rechts
                    </label>
                </div>
                <div class="tip">Wende die Rechte-Faust-Regel auf die einzelnen Leiter an. Die Feldlinien im Inneren der Spule zeigen zum Nordpol.</div>
                <div class="feedback correct" id="ex3-3-correct">Richtig! Oben ⊗ (hinein) → Feldlinien im Uhrzeigersinn. Unten ⊙ (heraus) → Feldlinien gegen Uhrzeigersinn. Im Inneren zeigen beide nach links → Nordpol links.</div>
                <div class="feedback incorrect" id="ex3-3-incorrect">Wende die Rechte-Faust-Regel an: Bei ⊗ (oben) kreisen die Feldlinien im Uhrzeigersinn, bei ⊙ (unten) gegen den Uhrzeigersinn. Im Spuleninneren addieren sie sich und zeigen nach links → Nordpol links.</div>
                <button onclick="checkExercise('ex3-3', 'a')">Prüfen</button>
            </div>
        </div>

        <!-- SECTION 4: Lorentzkraft -->
        <div class="section" id="section4">
            <div class="section-title">4. Lorentzkraft & Rechte-Hand-Regel</div>

            <div class="merksatz">
                <strong>Rechte-Hand-Regel (UVW):</strong>
                <table class="rule-table">
                    <tr><th>Finger</th><th>Bedeutung</th></tr>
                    <tr><td>Daumen</td><td><strong>U</strong>rsache: Stromrichtung (oder Bewegung pos. Ladung)</td></tr>
                    <tr><td>Zeigefinger</td><td><strong>V</strong>ermittler: Magnetfeldrichtung (N→S)</td></tr>
                    <tr><td>Mittelfinger</td><td><strong>W</strong>irkung: Lorentzkraft</td></tr>
                </table>
            </div>

            <div class="exercise" id="ex4-1">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 4.1</span>
                    <span class="niveau-badge niveau-2">★★</span>
                </div>
                <p>Ein Leiter wird von Strom durchflossen (Richtung: nach oben ↑).<br>
                Das Magnetfeld zeigt nach links (←).<br>
                In welche Richtung wirkt die Lorentzkraft?</p>
                <div class="diagram">
                    <svg viewBox="0 0 220 160" width="260">
                        <!-- Magnet links (N) -->
                        <rect x="10" y="40" width="30" height="80" fill="#c62828" stroke="#333"/>
                        <text x="25" y="85" text-anchor="middle" fill="white" font-weight="bold" font-size="14">N</text>
                        <!-- Magnet rechts (S) -->
                        <rect x="180" y="40" width="30" height="80" fill="#1565c0" stroke="#333"/>
                        <text x="195" y="85" text-anchor="middle" fill="white" font-weight="bold" font-size="14">S</text>
                        <!-- Magnetfeld Pfeile (grün, nach links) -->
                        <line x1="170" y1="60" x2="50" y2="60" stroke="#2e7d32" stroke-width="2"/>
                        <polygon points="50,60 60,55 60,65" fill="#2e7d32"/>
                        <line x1="170" y1="100" x2="50" y2="100" stroke="#2e7d32" stroke-width="2"/>
                        <polygon points="50,100 60,95 60,105" fill="#2e7d32"/>
                        <text x="110" y="50" text-anchor="middle" font-size="11" fill="#2e7d32">B</text>
                        <!-- Leiter (vertikal) -->
                        <rect x="105" y="55" width="10" height="50" fill="#888" stroke="#333"/>
                        <!-- Strom Pfeil (nach oben) -->
                        <line x1="110" y1="120" x2="110" y2="70" stroke="#c62828" stroke-width="3"/>
                        <polygon points="110,70 105,80 115,80" fill="#c62828"/>
                        <text x="125" y="95" font-size="11" fill="#c62828">I</text>
                    </svg>
                </div>
                <div class="options" id="ex4-1-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex4-1" value="a" style="display:none">
                        Auf mich zu (aus der Zeichenebene heraus)
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex4-1" value="b" style="display:none">
                        Von mir weg (in die Zeichenebene hinein)
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex4-1" value="c" style="display:none">
                        Nach oben (↑)
                    </label>
                    <label class="option" data-value="d">
                        <input type="radio" name="ex4-1" value="d" style="display:none">
                        Nach unten (↓)
                    </label>
                </div>
                <div class="feedback correct" id="ex4-1-correct">Richtig! Daumen ↑ (Strom), Zeigefinger ← (Magnetfeld) → Mittelfinger zeigt auf dich zu (aus der Zeichenebene heraus).</div>
                <div class="feedback incorrect" id="ex4-1-incorrect">Nutze die Rechte-Hand-Regel: Daumen = Strom (↑), Zeigefinger = Magnetfeld (←). Spreize die drei Finger ab – der Mittelfinger zeigt auf dich zu.</div>
                <button onclick="checkExercise('ex4-1', 'a')">Prüfen</button>
            </div>

            <div class="exercise" id="ex4-2">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 4.2</span>
                    <span class="niveau-badge niveau-2">★★</span>
                </div>
                <p>Ein <strong>Proton (p⁺)</strong> bewegt sich nach unten (↓).<br>
                Das Magnetfeld zeigt aus der Zeichenebene heraus (auf dich zu, ⊙).<br>
                In welche Richtung wird das Proton abgelenkt?</p>
                <div class="diagram">
                    <svg viewBox="0 0 200 140" width="240">
                        <!-- Magnetfeld Symbole (Punkte = heraus, grün) -->
                        <circle cx="40" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="40" cy="30" r="2" fill="#2e7d32"/>
                        <circle cx="100" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="100" cy="30" r="2" fill="#2e7d32"/>
                        <circle cx="160" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="160" cy="30" r="2" fill="#2e7d32"/>
                        <circle cx="40" cy="110" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="40" cy="110" r="2" fill="#2e7d32"/>
                        <circle cx="100" cy="110" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="100" cy="110" r="2" fill="#2e7d32"/>
                        <circle cx="160" cy="110" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="160" cy="110" r="2" fill="#2e7d32"/>
                        <text x="185" y="70" font-size="11" fill="#2e7d32">B ⊙</text>
                        <!-- Proton -->
                        <circle cx="100" cy="70" r="12" fill="#c62828" stroke="#333"/>
                        <text x="100" y="74" text-anchor="middle" fill="white" font-size="10" font-weight="bold">p⁺</text>
                        <!-- Bewegung Pfeil (nach unten) -->
                        <line x1="100" y1="55" x2="100" y2="40" stroke="#c62828" stroke-width="2"/>
                        <line x1="100" y1="85" x2="100" y2="100" stroke="#c62828" stroke-width="3"/>
                        <polygon points="100,100 95,90 105,90" fill="#c62828"/>
                        <text x="115" y="95" font-size="11" fill="#c62828">v</text>
                    </svg>
                </div>
                <div class="options" id="ex4-2-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex4-2" value="a" style="display:none">
                        Nach links (←)
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex4-2" value="b" style="display:none">
                        Nach rechts (→)
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex4-2" value="c" style="display:none">
                        Nach oben (↑)
                    </label>
                    <label class="option" data-value="d">
                        <input type="radio" name="ex4-2" value="d" style="display:none">
                        In die Zeichenebene hinein
                    </label>
                </div>
                <div class="tip">Bei positiven Ladungen zeigt der Daumen in Bewegungsrichtung!</div>
                <div class="feedback correct" id="ex4-2-correct">Richtig! Daumen ↓ (Bewegung des Protons), Zeigefinger heraus (⊙) → Mittelfinger zeigt nach links (←).</div>
                <div class="feedback incorrect" id="ex4-2-incorrect">Rechte-Hand-Regel für positive Ladung: Daumen = Bewegungsrichtung (↓), Zeigefinger = Magnetfeld (heraus). Mittelfinger zeigt nach links.</div>
                <button onclick="checkExercise('ex4-2', 'a')">Prüfen</button>
            </div>

            <div class="exercise" id="ex4-3">
                <div class="exercise-header">
                    <span class="exercise-title">Übung 4.3</span>
                    <span class="niveau-badge niveau-3">★★★</span>
                </div>
                <p>Ein <strong>Elektron (e⁻)</strong> bewegt sich nach rechts (→).<br>
                Das Magnetfeld zeigt in die Zeichenebene hinein (von dir weg, ⊗).<br>
                In welche Richtung wird das Elektron abgelenkt?</p>
                <div class="diagram">
                    <svg viewBox="0 0 200 140" width="240">
                        <!-- Magnetfeld Symbole (Kreuze = hinein, grün) -->
                        <circle cx="40" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="34" y1="24" x2="46" y2="36" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="46" y1="24" x2="34" y2="36" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="100" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="94" y1="24" x2="106" y2="36" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="106" y1="24" x2="94" y2="36" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="160" cy="30" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="154" y1="24" x2="166" y2="36" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="166" y1="24" x2="154" y2="36" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="40" cy="110" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="34" y1="104" x2="46" y2="116" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="46" y1="104" x2="34" y2="116" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="100" cy="110" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="94" y1="104" x2="106" y2="116" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="106" y1="104" x2="94" y2="116" stroke="#2e7d32" stroke-width="2"/>
                        <circle cx="160" cy="110" r="8" fill="none" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="154" y1="104" x2="166" y2="116" stroke="#2e7d32" stroke-width="2"/>
                        <line x1="166" y1="104" x2="154" y2="116" stroke="#2e7d32" stroke-width="2"/>
                        <text x="185" y="70" font-size="11" fill="#2e7d32">B ⊗</text>
                        <!-- Elektron -->
                        <circle cx="70" cy="70" r="12" fill="#1565c0" stroke="#333"/>
                        <text x="70" y="74" text-anchor="middle" fill="white" font-size="10" font-weight="bold">e⁻</text>
                        <!-- Bewegung Pfeil (nach rechts) -->
                        <line x1="90" y1="70" x2="130" y2="70" stroke="#1565c0" stroke-width="3"/>
                        <polygon points="130,70 120,65 120,75" fill="#1565c0"/>
                        <text x="110" y="62" font-size="11" fill="#1565c0">v</text>
                    </svg>
                </div>
                <div class="tip">Bei Elektronen: Daumen zeigt ENTGEGEN der Bewegungsrichtung!</div>
                <div class="options" id="ex4-3-options">
                    <label class="option" data-value="a">
                        <input type="radio" name="ex4-3" value="a" style="display:none">
                        Nach oben (↑)
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="ex4-3" value="b" style="display:none">
                        Nach unten (↓)
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="ex4-3" value="c" style="display:none">
                        Nach links (←)
                    </label>
                    <label class="option" data-value="d">
                        <input type="radio" name="ex4-3" value="d" style="display:none">
                        Aus der Zeichenebene heraus
                    </label>
                </div>
                <div class="feedback correct" id="ex4-3-correct">Richtig! Daumen ← (entgegen Elektronenbewegung), Zeigefinger ⊗ (hinein) → Mittelfinger zeigt nach unten (↓).</div>
                <div class="feedback incorrect" id="ex4-3-incorrect">Bei Elektronen: Daumen ENTGEGEN der Bewegung (←), Zeigefinger = Magnetfeld (⊗). Der Mittelfinger zeigt dann nach unten (↓).</div>
                <button onclick="checkExercise('ex4-3', 'b')">Prüfen</button>
            </div>
        </div>

        <!-- SECTION 5: Zusammenfassung -->
        <div class="section" id="section5">
            <div class="section-title">5. Zusammenfassung</div>

            <div class="score-display" id="scoreDisplay">
                <div>Dein Ergebnis:</div>
                <div class="score" id="finalScore">0 / 11</div>
                <div style="margin-top:10px;font-size:0.9em;" id="scoreMessage"></div>
            </div>

            <div class="merksatz">
                <strong>Die wichtigsten Regeln:</strong>
                <ul style="margin-left:20px;margin-top:8px;">
                    <li><strong>Oersted:</strong> Strom erzeugt Magnetfeld (Feldlinien = Kreise um Leiter)</li>
                    <li><strong>Rechte-Faust:</strong> Daumen = Strom, Finger = Feldlinien</li>
                    <li><strong>Rechte-Hand (UVW):</strong> Daumen = Ursache (Strom/Bewegung), Zeigefinger = Vermittler (B), Mittelfinger = Wirkung (Kraft)</li>
                    <li><strong>Elektron:</strong> Daumen zeigt ENTGEGEN der Bewegung!</li>
                    <li><strong>Symbole:</strong> ⊙ = heraus (Spitze), ⊗ = hinein (Federn)</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ES5 JavaScript
        var STORAGE_KEY = 'lp-9-elektromag-08c-zuhause';
        var score = 0;
        var totalExercises = 11;
        var answeredExercises = {};

        function saveProgress() {
            var data = {
                score: score,
                answered: answeredExercises,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        function loadProgress() {
            var saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                try {
                    var data = JSON.parse(saved);
                    score = data.score || 0;
                    answeredExercises = data.answered || {};

                    // Restore visual state
                    for (var exId in answeredExercises) {
                        if (answeredExercises.hasOwnProperty(exId)) {
                            var info = answeredExercises[exId];
                            restoreExerciseState(exId, info.selected, info.correct, info.correctAnswer);
                        }
                    }

                    updateProgress();
                    updateScore();
                } catch (e) {
                    console.error('Error loading progress:', e);
                }
            }
        }

        function restoreExerciseState(exId, selectedValue, wasCorrect, correctAnswer) {
            var options = document.querySelectorAll('#' + exId + '-options .option');
            for (var i = 0; i < options.length; i++) {
                var opt = options[i];
                opt.classList.add('disabled');
                if (opt.dataset.value === correctAnswer) {
                    opt.classList.add('correct');
                }
                if (opt.dataset.value === selectedValue && !wasCorrect) {
                    opt.classList.add('incorrect');
                }
                if (opt.dataset.value === selectedValue) {
                    opt.classList.add('selected');
                }
            }

            if (wasCorrect) {
                var correctFeedback = document.getElementById(exId + '-correct');
                if (correctFeedback) correctFeedback.classList.add('show');
            } else {
                var incorrectFeedback = document.getElementById(exId + '-incorrect');
                if (incorrectFeedback) incorrectFeedback.classList.add('show');
            }

            var btn = document.querySelector('#' + exId + ' button');
            if (btn) btn.disabled = true;
        }

        function updateProgress() {
            var answered = Object.keys(answeredExercises).length;
            var percent = (answered / totalExercises) * 100;
            document.getElementById('progressFill').style.width = percent + '%';
        }

        function updateScore() {
            document.getElementById('finalScore').textContent = score + ' / ' + totalExercises;
            var message = '';
            var percent = (score / totalExercises) * 100;
            if (percent === 100) {
                message = 'Ausgezeichnet! Du beherrschst alle Regeln perfekt.';
            } else if (percent >= 80) {
                message = 'Sehr gut! Nur kleine Unsicherheiten.';
            } else if (percent >= 60) {
                message = 'Gut! Wiederhole die markierten Themen nochmal.';
            } else {
                message = 'Übe die Regeln nochmal und versuche es erneut.';
            }
            document.getElementById('scoreMessage').textContent = message;
        }

        function setupOptions(containerId) {
            var container = document.getElementById(containerId);
            if (!container) return;

            var options = container.querySelectorAll('.option');
            for (var i = 0; i < options.length; i++) {
                (function(opt) {
                    opt.addEventListener('click', function(e) {
                        if (opt.classList.contains('disabled')) return;
                        e.preventDefault();

                        var siblings = opt.parentNode.querySelectorAll('.option');
                        for (var j = 0; j < siblings.length; j++) {
                            siblings[j].classList.remove('selected');
                            var inp = siblings[j].querySelector('input');
                            if (inp) inp.checked = false;
                        }
                        opt.classList.add('selected');
                        var input = opt.querySelector('input');
                        if (input) input.checked = true;
                    });
                })(options[i]);
            }
        }

        function checkExercise(exId, correctAnswer) {
            if (answeredExercises[exId]) return;

            var selected = document.querySelector('input[name="' + exId + '"]:checked');
            if (!selected) return;

            var selectedValue = selected.value;
            var isCorrect = selectedValue === correctAnswer;

            var options = document.querySelectorAll('#' + exId + '-options .option');
            for (var i = 0; i < options.length; i++) {
                var opt = options[i];
                opt.classList.add('disabled');
                if (opt.dataset.value === correctAnswer) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
            }

            if (isCorrect) {
                document.getElementById(exId + '-correct').classList.add('show');
                score++;
            } else {
                document.getElementById(exId + '-incorrect').classList.add('show');
            }

            answeredExercises[exId] = {
                selected: selectedValue,
                correct: isCorrect,
                correctAnswer: correctAnswer
            };

            var btn = document.querySelector('#' + exId + ' button');
            if (btn) btn.disabled = true;

            updateProgress();
            updateScore();
            saveProgress();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            var exerciseIds = [
                'ex1-1', 'ex1-2',
                'ex2-1', 'ex2-2', 'ex2-3',
                'ex3-1', 'ex3-2', 'ex3-3',
                'ex4-1', 'ex4-2', 'ex4-3'
            ];

            for (var i = 0; i < exerciseIds.length; i++) {
                setupOptions(exerciseIds[i] + '-options');
            }

            loadProgress();
        });
    </script>
</body>
</html>
