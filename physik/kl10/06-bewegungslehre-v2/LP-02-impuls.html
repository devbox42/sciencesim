<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lernpfad: Impuls & Impulserhaltung | Physik Klasse 10E</title>
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GRUNDLAYOUT
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #222;
            background: #f5f5f5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FARBEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --physik: #2c5aa0;
            --physik-light: #e8f0fa;
            --success: #2a7a4b;
            --success-light: #e8f5e9;
            --warning: #b35c00;
            --warning-light: #fff3e0;
            --error: #c62828;
            --error-light: #ffebee;
            --gray: #666;
            --border: #ddd;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HEADER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        header {
            background: var(--physik);
            color: white;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 5px;
        }

        header .meta {
            font-size: 0.85em;
            opacity: 0.9;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORTSCHRITT
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .progress-bar {
            background: #ddd;
            height: 8px;
            width: 100%;
        }

        .progress-fill {
            background: var(--physik);
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 15px;
            background: white;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
        }

        .step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
        }

        .step-dot.active { background: var(--physik); }
        .step-dot.completed { background: var(--success); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCHRITTE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .step {
            display: none;
            background: white;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid var(--border);
        }

        .step.active { display: block; }

        .step h2 {
            color: var(--physik);
            font-size: 1.3em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--physik-light);
        }

        .step h3 {
            font-size: 1.1em;
            margin: 20px 0 10px 0;
            color: #333;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONTENT BOXEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .info-box {
            background: var(--physik-light);
            border-left: 4px solid var(--physik);
            padding: 15px;
            margin: 15px 0;
        }

        .formel-box {
            background: #f9f9f9;
            border: 2px solid var(--physik);
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.3em;
        }

        .formel-box .fz {
            font-family: "Times New Roman", Times, serif;
            font-style: italic;
        }

        .formel-box .einheit {
            font-family: sans-serif;
            font-style: normal;
            color: var(--gray);
            font-size: 0.85em;
        }

        .merksatz {
            background: var(--success-light);
            border-left: 4px solid var(--success);
            padding: 15px;
            margin: 15px 0;
            font-weight: 500;
        }

        .hefter-hinweis {
            background: var(--warning-light);
            border: 2px solid var(--warning);
            padding: 12px 15px;
            margin: 20px 0;
            font-size: 0.9em;
        }

        .hefter-hinweis::before {
            content: "ğŸ““ Arbeitsblatt";
            display: inline-block;
            background: var(--warning);
            color: white;
            font-size: 0.75em;
            font-weight: 600;
            padding: 2px 8px;
            margin-bottom: 8px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SIMULATION CONTAINER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .sim-container {
            background: #f9f9f9;
            border: 1px solid var(--border);
            padding: 15px;
            margin: 20px 0;
        }

        .sim-container h4 {
            color: var(--physik);
            margin-bottom: 10px;
            font-size: 1em;
        }

        canvas {
            display: block;
            margin: 10px auto;
            background: white;
            border: 1px solid var(--border);
        }

        .sim-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            align-items: center;
            justify-content: center;
        }

        .sim-controls label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .sim-controls input[type="range"] {
            width: 120px;
        }

        .sim-result {
            text-align: center;
            font-size: 1.2em;
            margin-top: 15px;
            padding: 10px;
            background: var(--physik-light);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ÃœBUNGEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .exercise {
            background: #fafafa;
            border: 1px solid var(--border);
            padding: 20px;
            margin: 20px 0;
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .exercise-title {
            font-weight: 600;
            color: var(--physik);
        }

        .niveau-badge {
            font-size: 0.8em;
            padding: 2px 8px;
            border-radius: 3px;
            background: var(--physik-light);
            color: var(--physik);
        }

        .exercise input[type="text"],
        .exercise input[type="number"] {
            padding: 8px 12px;
            border: 1px solid var(--border);
            font-size: 1em;
            width: 120px;
            text-align: center;
        }

        .exercise input:focus {
            outline: 2px solid var(--physik);
            border-color: var(--physik);
        }

        .feedback {
            margin-top: 15px;
            padding: 12px;
            display: none;
        }

        .feedback.correct {
            display: block;
            background: var(--success-light);
            border-left: 4px solid var(--success);
            color: var(--success);
        }

        .feedback.incorrect {
            display: block;
            background: var(--error-light);
            border-left: 4px solid var(--error);
            color: #333;
        }

        .feedback.hint {
            display: block;
            background: var(--warning-light);
            border-left: 4px solid var(--warning);
            color: #333;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HILFE-SYSTEM
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .help-system {
            margin-top: 15px;
        }

        .help-toggle {
            background: none;
            border: 1px solid var(--gray);
            color: var(--gray);
            padding: 5px 12px;
            font-size: 0.85em;
            cursor: pointer;
            margin-right: 5px;
        }

        .help-toggle:hover {
            background: #f5f5f5;
        }

        .help-content {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: #fffde7;
            border: 1px solid #ffd54f;
            font-size: 0.9em;
        }

        .help-content.visible { display: block; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BUTTONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        button {
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            border: none;
            background: var(--physik);
            color: white;
        }

        button:hover { opacity: 0.9; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-secondary {
            background: white;
            color: var(--physik);
            border: 2px solid var(--physik);
        }

        .btn-success {
            background: var(--success);
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AUDIO BUTTON
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .audio-btn {
            background: none;
            border: 1px solid var(--physik);
            color: var(--physik);
            padding: 3px 8px;
            font-size: 0.8em;
            cursor: pointer;
            margin-left: 8px;
            vertical-align: middle;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DIFFERENZIERUNG
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .diff-choice {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .diff-btn {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            text-align: center;
            border: 2px solid var(--border);
            background: white;
            cursor: pointer;
        }

        .diff-btn:hover { border-color: var(--physik); }
        .diff-btn.selected { border-color: var(--physik); background: var(--physik-light); }

        .diff-btn .stars { font-size: 1.2em; margin-bottom: 5px; }
        .diff-btn .label { font-size: 0.9em; color: var(--gray); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           VERGLEICHS-KARTEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .compare-cards {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .compare-card {
            flex: 1;
            min-width: 200px;
            padding: 20px;
            background: white;
            border: 2px solid var(--border);
            text-align: center;
        }

        .compare-card .icon { font-size: 3em; margin-bottom: 10px; }
        .compare-card .name { font-weight: 600; margin-bottom: 10px; }
        .compare-card .data { font-size: 0.9em; color: var(--gray); }
        .compare-card .result {
            margin-top: 15px;
            font-size: 1.3em;
            font-weight: 600;
            color: var(--physik);
        }

        .vs-badge {
            background: var(--physik);
            color: white;
            padding: 10px 15px;
            font-weight: bold;
            align-self: center;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 600px) {
            .container { padding: 10px; }
            .step { padding: 15px; }
            .compare-cards { flex-direction: column; }
            .diff-choice { flex-direction: column; }
            canvas { max-width: 100%; height: auto; }
        }
    </style>
</head>
<body>

<header>
    <h1>Impuls & Impulserhaltung</h1>
    <div class="meta">Physik 10E | DS2 | 90 Minuten</div>
</header>

<div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
</div>

<div class="step-indicator" id="stepIndicator"></div>

<div class="container">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 1: EINSTIEG
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step active" id="step1">
        <h2>1. Was tut mehr weh?</h2>

        <p style="font-size: 1.1em; margin-bottom: 20px;">
            Stell dir vor: Ein Ball fliegt auf dich zu. Beide haben die <strong>gleiche Geschwindigkeit</strong> (20 m/s).
        </p>

        <div class="compare-cards">
            <div class="compare-card">
                <div class="icon">ğŸ¾</div>
                <div class="name">Tennisball</div>
                <div class="data">Masse: 0,06 kg<br>Geschwindigkeit: 20 m/s</div>
            </div>
            <div class="vs-badge">VS</div>
            <div class="compare-card">
                <div class="icon">ğŸ</div>
                <div class="name">Medizinball</div>
                <div class="data">Masse: 5 kg<br>Geschwindigkeit: 20 m/s</div>
            </div>
        </div>

        <div class="exercise">
            <p><strong>Deine Vorhersage:</strong> Welcher Ball tut mehr weh, wenn er dich trifft?</p>
            <div style="margin-top: 15px;">
                <label style="display: block; margin: 10px 0; cursor: pointer;">
                    <input type="radio" name="vorhersage" value="tennis"> Tennisball
                </label>
                <label style="display: block; margin: 10px 0; cursor: pointer;">
                    <input type="radio" name="vorhersage" value="gleich"> Beide gleich (gleiche Geschwindigkeit!)
                </label>
                <label style="display: block; margin: 10px 0; cursor: pointer;">
                    <input type="radio" name="vorhersage" value="medizin"> Medizinball
                </label>
            </div>
            <div class="feedback" id="feedback1"></div>
        </div>

        <button onclick="checkVorhersage()" style="margin-top: 15px;">Antwort prÃ¼fen</button>

        <div class="info-box" id="erklaerung1" style="display: none; margin-top: 20px;">
            <strong>NatÃ¼rlich der Medizinball!</strong><br>
            Obwohl beide gleich schnell sind, hat der schwerere Ball mehr "Wucht".<br><br>
            Diese "Wucht" nennen Physiker <strong>Impuls</strong>. Lass uns herausfinden, wie man Impuls berechnet!
        </div>

        <div class="nav-buttons">
            <span></span>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 2: SIMULATION WUCHT-O-METER
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step2">
        <h2>2. Das Wucht-O-Meter</h2>

        <p>Experimentiere: Wie verÃ¤ndert sich die "Wucht" (der Impuls), wenn du Masse oder Geschwindigkeit Ã¤nderst?</p>

        <div class="sim-container">
            <h4>ğŸ® Simulation: Impuls-Rechner</h4>

            <div class="sim-controls">
                <label>
                    Masse: <span id="massDisplay">10</span> kg
                    <input type="range" id="massSlider" min="1" max="100" value="10" oninput="updateSim1()">
                </label>
                <label>
                    Geschwindigkeit: <span id="velDisplay">5</span> m/s
                    <input type="range" id="velSlider" min="1" max="50" value="5" oninput="updateSim1()">
                </label>
            </div>

            <canvas id="wuchtCanvas" width="400" height="200"></canvas>

            <div class="sim-result">
                Impuls: <strong><span id="impulsResult">50</span> kgÂ·m/s</strong>
            </div>

            <div style="margin-top: 15px; text-align: center;">
                <button class="btn-secondary" onclick="setPreset('fussball')">âš½ FuÃŸball</button>
                <button class="btn-secondary" onclick="setPreset('sprinter')">ğŸƒ Sprinter</button>
                <button class="btn-secondary" onclick="setPreset('auto')">ğŸš— Auto</button>
                <button class="btn-secondary" onclick="setPreset('du')">ğŸ‘¤ DU</button>
            </div>
        </div>

        <div class="merksatz" style="margin-top: 20px;">
            <strong>Erkenntnis:</strong> Die "Wucht" (Impuls) hÃ¤ngt von ZWEI Dingen ab:
            <ul style="margin: 10px 0 0 20px;">
                <li>Je <strong>schwerer</strong> â†’ mehr Impuls</li>
                <li>Je <strong>schneller</strong> â†’ mehr Impuls</li>
            </ul>
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 3: DEFINITION
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step3">
        <h2>3. Was ist Impuls?</h2>

        <div class="info-box">
            <strong>Definition:</strong>
            <button class="audio-btn" onclick="speak('Der Impuls beschreibt, wie schwer es ist, einen bewegten KÃ¶rper zu stoppen. Je grÃ¶ÃŸer der Impuls, desto mehr Wucht hat der KÃ¶rper.')">ğŸ”Š</button>
            <p style="margin-top: 10px; font-size: 1.1em;">
                Der <strong>Impuls</strong> beschreibt, wie schwer es ist, einen bewegten KÃ¶rper zu stoppen.<br>
                Je grÃ¶ÃŸer der Impuls, desto mehr "Wucht" hat der KÃ¶rper.
            </p>
        </div>

        <h3>Beispiele aus dem Alltag:</h3>
        <ul style="margin: 15px 0 15px 25px;">
            <li>ğŸš‚ Ein langsamer GÃ¼terzug ist schwerer zu stoppen als ein schnelles Fahrrad</li>
            <li>ğŸ¥Š Ein Boxschlag: Masse der Faust Â· Geschwindigkeit = Wucht des Schlags</li>
            <li>âš½ Torschuss: Schneller Schuss = mehr Impuls = schwerer zu halten</li>
        </ul>

        <div class="hefter-hinweis">
            <strong>Kasten K1:</strong> FÃ¼lle den LÃ¼ckentext auf deinem Arbeitsblatt aus. Nutze die Informationen aus der Definition oben.
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 4: FORMEL
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step4">
        <h2>4. Die Formel fÃ¼r Impuls</h2>

        <div class="formel-box">
            <span class="fz">p</span> = <span class="fz">m</span> Â· <span class="fz">v</span>
            <br><br>
            <span class="einheit">Impuls = Masse Â· Geschwindigkeit</span>
            <br>
            <span class="einheit">[p] = kg Â· m/s</span>
        </div>

        <div class="info-box">
            <strong>Die Formelzeichen:</strong>
            <ul style="margin: 10px 0 0 15px;">
                <li><em>p</em> = Impuls (vom lateinischen "pulsus" = StoÃŸ)</li>
                <li><em>m</em> = Masse in kg</li>
                <li><em>v</em> = Geschwindigkeit in m/s</li>
            </ul>
        </div>

        <h3>Beispielrechnung:</h3>
        <div style="background: #f9f9f9; padding: 15px; margin: 15px 0; font-family: monospace;">
            FuÃŸball: m = 0,4 kg, v = 25 m/s<br><br>
            p = m Â· v<br>
            p = 0,4 kg Â· 25 m/s<br>
            <strong>p = 10 kgÂ·m/s</strong>
        </div>

        <div class="hefter-hinweis">
            <strong>Kasten K2:</strong> ErgÃ¤nze die Formel und die Einheit auf deinem Arbeitsblatt. Welche GrÃ¶ÃŸen werden multipliziert?
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 5: ÃœBUNG DIFFERENZIERT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step5">
        <h2>5. Impuls berechnen</h2>

        <p>Berechne den Impuls fÃ¼r die folgenden Objekte:</p>

        <!-- Aufgabe a) FuÃŸball -->
        <div class="exercise" id="ex-level1">
            <div class="exercise-header">
                <span class="exercise-title">a) FuÃŸball</span>
            </div>
            <p>Ein FuÃŸball (m = 0,4 kg) wird mit v = 25 m/s geschossen.</p>
            <p style="margin-top: 10px;"><strong>Berechne den Impuls:</strong></p>
            <p style="margin: 15px 0;">
                p = m Â· v =
                <input type="text" id="ex1-input" style="width: 80px;" placeholder="?"> kgÂ·m/s
            </p>

            <div class="help-system">
                <button class="help-toggle" onclick="toggleHelp('help1-1')">ğŸ’¡ Hilfe 1</button>
                <button class="help-toggle" onclick="toggleHelp('help1-2')">ğŸ’¡ Hilfe 2</button>
                <button class="help-toggle" onclick="toggleHelp('help1-3')">ğŸ’¡ Hilfe 3</button>

                <div class="help-content" id="help1-1">
                    <strong>Strategie:</strong> Welche Werte brauchst du? Suche m und v im Text.
                </div>
                <div class="help-content" id="help1-2">
                    <strong>Formel:</strong> p = m Â· v. Setze m = 0,4 kg und v = 25 m/s ein.
                </div>
                <div class="help-content" id="help1-3">
                    <strong>Rechenweg:</strong> p = 0,4 kg Â· 25 m/s = ?<br>
                    Tipp: 0,4 Â· 25 = 4 Â· 2,5 = 10
                </div>
            </div>

            <button onclick="checkEx1()" style="margin-top: 15px;">PrÃ¼fen</button>
            <div class="feedback" id="fb-ex1"></div>
        </div>

        <!-- Aufgaben b) + c) -->
        <div class="exercise" id="ex-level2">
            <div class="exercise-header">
                <span class="exercise-title">b) + c) Sprinter & Auto</span>
            </div>

            <p><strong>b)</strong> Ein Sprinter (m = 80 kg) rennt mit v = 10 m/s.</p>
            <p style="margin: 10px 0;">
                p = <input type="text" id="ex2a-input" style="width: 80px;" placeholder="?"> kgÂ·m/s
            </p>

            <p style="margin-top: 15px;"><strong>c)</strong> Ein Auto (m = 1200 kg) fÃ¤hrt mit v = 30 m/s (â‰ˆ 108 km/h).</p>
            <p style="margin: 10px 0;">
                p = <input type="text" id="ex2b-input" style="width: 100px;" placeholder="?"> kgÂ·m/s
            </p>

            <button onclick="checkEx2()" style="margin-top: 15px;">PrÃ¼fen</button>
            <div class="feedback" id="fb-ex2"></div>
        </div>

        <!-- Aufgabe d) ICE -->
        <div class="exercise" id="ex-level3">
            <div class="exercise-header">
                <span class="exercise-title">d) ICE</span>
            </div>

            <p>Ein ICE (m = 400.000 kg) fÃ¤hrt mit v = 80 m/s (â‰ˆ 288 km/h).</p>
            <p style="margin: 10px 0;">
                p = <input type="text" id="ex3a-input" style="width: 140px;" placeholder="?"> kgÂ·m/s
            </p>

            <p style="margin-top: 20px;"><strong>Zusatzfrage:</strong> Warum ist ein Zug gefÃ¤hrlicher als ein Auto, obwohl er oft langsamer fÃ¤hrt?</p>
            <div style="margin-top: 10px;">
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="ex3b" value="masse"> Der Zug hat eine viel grÃ¶ÃŸere Masse â†’ grÃ¶ÃŸerer Impuls
                </label>
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="ex3b" value="geschwindigkeit"> Der Zug ist in Wirklichkeit doch schneller
                </label>
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="ex3b" value="energie"> Der Zug hat mehr Energie wegen der Schienen
                </label>
            </div>

            <button onclick="checkEx3()" style="margin-top: 15px;">PrÃ¼fen</button>
            <div class="feedback" id="fb-ex3"></div>
        </div>

        <div class="hefter-hinweis">
            <strong>Ãœbung Ãœ1:</strong> Bearbeite die Aufgaben aâ€“d auf dem Arbeitsblatt.
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 6: CHALLENGE
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step6">
        <h2>6. Challenge: Wer hat mehr Wucht?</h2>

        <div class="sim-container">
            <h4>ğŸ† Duell 1: Sprinter vs. Sumo-Ringer</h4>

            <div class="compare-cards">
                <div class="compare-card">
                    <div class="icon">ğŸƒ</div>
                    <div class="name">Usain Bolt</div>
                    <div class="data">m = 94 kg<br>v = 12 m/s</div>
                    <div class="result" id="bolt-result">? kgÂ·m/s</div>
                </div>
                <div class="vs-badge">VS</div>
                <div class="compare-card">
                    <div class="icon">ğŸ¤¼</div>
                    <div class="name">Sumo-Ringer</div>
                    <div class="data">m = 180 kg<br>v = 4 m/s</div>
                    <div class="result" id="sumo-result">? kgÂ·m/s</div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <p>Wer hat mehr Impuls?</p>
                <button onclick="revealDuell1('bolt')" style="margin: 10px;">Bolt gewinnt</button>
                <button onclick="revealDuell1('sumo')" style="margin: 10px;">Sumo gewinnt</button>
            </div>
            <div class="feedback" id="fb-duell1"></div>
        </div>

        <div class="sim-container">
            <h4>ğŸ† Duell 2: Du vs. Schnecke</h4>

            <div class="compare-cards">
                <div class="compare-card">
                    <div class="icon">ğŸ‘¤</div>
                    <div class="name">DU (gehend)</div>
                    <div class="data">m â‰ˆ 60 kg<br>v = 1,5 m/s</div>
                    <div class="result" id="du-result">? kgÂ·m/s</div>
                </div>
                <div class="vs-badge">VS</div>
                <div class="compare-card">
                    <div class="icon">ğŸŒ</div>
                    <div class="name">Schnecke</div>
                    <div class="data">m = 0,01 kg<br>v = 0,001 m/s</div>
                    <div class="result" id="schnecke-result">? kgÂ·m/s</div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button onclick="revealDuell2()">AuflÃ¶sen</button>
            </div>
            <div class="feedback" id="fb-duell2"></div>
        </div>

        <div class="exercise" style="margin-top: 20px;">
            <div class="exercise-header">
                <span class="exercise-title">â˜…â˜…â˜… Transfer: Airbag</span>
                <span class="niveau-badge">2 BE</span>
            </div>
            <p><strong>ErklÃ¤re:</strong> Warum helfen Airbags bei einem Unfall, obwohl sie den Impuls nicht Ã¤ndern kÃ¶nnen?</p>
            <p style="color: var(--gray); font-size: 0.9em; margin-top: 5px;">(Tipp: Denke an ZEIT)</p>
            <div style="margin-top: 15px;">
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="airbag" value="zeit"> Die Aufprallzeit wird verlÃ¤ngert â†’ kleinere Kraft auf den KÃ¶rper
                </label>
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="airbag" value="impuls"> Der Airbag verringert den Impuls des Fahrers
                </label>
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="airbag" value="weich"> Der Airbag ist einfach weicher als das Lenkrad
                </label>
            </div>
            <button onclick="checkAirbag()" style="margin-top: 10px;">PrÃ¼fen</button>
            <div class="feedback" id="fb-airbag"></div>
        </div>

        <div class="hefter-hinweis">
            <strong>Ãœbung Ãœ2:</strong> Bearbeite die Vergleiche und die Airbag-Frage auf dem Arbeitsblatt.
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 7: ZWISCHENSICHERUNG TEIL A
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step7">
        <h2>7. Zwischenstopp: Impuls verstanden!</h2>

        <div class="merksatz">
            <strong>Teil A geschafft!</strong><br>
            Der <strong>Impuls</strong> p = m Â· v beschreibt die "Wucht" eines bewegten KÃ¶rpers.
        </div>

        <div class="hefter-hinweis">
            <strong>Kasten K3:</strong> VervollstÃ¤ndige den Merksatz auf dem Arbeitsblatt.
        </div>

        <div class="info-box" style="background: var(--physik-light); border-color: var(--physik); margin-top: 25px;">
            <strong>ğŸ± Jetzt wird's spannend:</strong><br><br>
            Was passiert, wenn zwei KÃ¶rper <strong>zusammenstoÃŸen</strong>?<br>
            Zum Beispiel beim Billard, wenn eine Kugel die andere trifft?
            <div style="text-align: center; margin-top: 15px; font-size: 3em;">
                ğŸ± â†’ ğŸ±ğŸ±
            </div>
            <p style="margin-top: 15px; text-align: center;">
                <em>Der Impuls hat dabei eine "magische" Eigenschaft...</em>
            </p>
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter zu Teil B â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         TEIL B: IMPULSERHALTUNG
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 8: ABGESCHLOSSENES SYSTEM
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step8">
        <h2>8. Was ist ein abgeschlossenes System?</h2>

        <div class="info-box">
            <strong>Definition:</strong>
            <button class="audio-btn" onclick="speak('Ein abgeschlossenes System ist ein Bereich, in dem keine Ã¤uÃŸeren KrÃ¤fte wirken. Der Gesamtimpuls bleibt darin konstant.')">ğŸ”Š</button>
            <p style="margin-top: 10px; font-size: 1.1em;">
                Ein <strong>abgeschlossenes System</strong> ist ein Bereich, in dem <strong>keine Ã¤uÃŸeren KrÃ¤fte</strong> wirken.
            </p>
        </div>

        <h3>Beispiele:</h3>
        <div class="compare-cards">
            <div class="compare-card">
                <div class="icon">ğŸ±</div>
                <div class="name">Billardtisch</div>
                <div class="data">Kugeln stoÃŸen sich<br>Keine Ã¤uÃŸere Kraft<br>(Reibung vernachlÃ¤ssigt)</div>
            </div>
            <div class="compare-card">
                <div class="icon">ğŸ›·</div>
                <div class="name">Luftkissenbahn</div>
                <div class="data">Wagen gleiten reibungsfrei<br>Keine Ã¤uÃŸere Kraft</div>
            </div>
            <div class="compare-card">
                <div class="icon">ğŸš€</div>
                <div class="name">Weltraum</div>
                <div class="data">Rakete + Gas<br>Keine Ã¤uÃŸere Kraft</div>
            </div>
        </div>

        <div class="merksatz" style="margin-top: 20px;">
            <strong>Der Impulserhaltungssatz:</strong><br><br>
            In einem abgeschlossenen System bleibt der <strong>Gesamtimpuls konstant</strong>:
            <div style="text-align: center; margin: 15px 0; font-size: 1.3em;">
                <span class="fz">p</span><sub>vorher</sub> = <span class="fz">p</span><sub>nachher</sub>
            </div>
            Der Impuls kann zwischen KÃ¶rpern <em>Ã¼bertragen</em> werden, aber er verschwindet nie!
        </div>

        <div class="hefter-hinweis">
            <strong>Kasten K4:</strong> Formuliere in eigenen Worten: Was ist ein abgeschlossenes System?<br>
            <strong>Kasten K5:</strong> ErgÃ¤nze den Impulserhaltungssatz auf deinem Arbeitsblatt.
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 9: STOSS-SIMULATOR
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step9">
        <h2>9. Simulation: Der StoÃŸ auf der Luftkissenbahn</h2>

        <p>Experimentiere: Beobachte, wie der Impuls beim StoÃŸ Ã¼bertragen wird!</p>

        <div class="sim-container">
            <h4>ğŸ§ª StoÃŸ-Simulator</h4>

            <div class="sim-controls">
                <label>
                    StoÃŸart:
                    <select id="stossTyp" onchange="updateStossSim()">
                        <option value="elastisch">Elastisch (prallen ab)</option>
                        <option value="unelastisch">Unelastisch (kleben zusammen)</option>
                    </select>
                </label>
            </div>

            <div class="sim-controls">
                <label>
                    Wagen 1: mâ‚ = <span id="m1Display">2</span> kg
                    <input type="range" id="m1Slider" min="1" max="5" value="2" oninput="updateStossSim()">
                </label>
                <label>
                    vâ‚ = <span id="v1Display">4</span> m/s
                    <input type="range" id="v1Slider" min="0" max="8" value="4" oninput="updateStossSim()">
                </label>
            </div>

            <div class="sim-controls">
                <label>
                    Wagen 2: mâ‚‚ = <span id="m2Display">2</span> kg
                    <input type="range" id="m2Slider" min="1" max="5" value="2" oninput="updateStossSim()">
                </label>
                <label>
                    vâ‚‚ = <span id="v2Display">0</span> m/s
                    <input type="range" id="v2Slider" min="-4" max="4" value="0" oninput="updateStossSim()">
                </label>
            </div>

            <canvas id="stossCanvas" width="600" height="200"></canvas>

            <div style="text-align: center; margin: 15px 0;">
                <button onclick="startStossAnimation()" id="stossStartBtn">â–¶ StoÃŸ starten</button>
                <button class="btn-secondary" onclick="resetStossSim()">â†º ZurÃ¼cksetzen</button>
            </div>

            <div class="sim-result" id="stossResult">
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
                    <div>
                        <strong>Vorher:</strong><br>
                        pâ‚ = <span id="p1vor">8</span> kgÂ·m/s<br>
                        pâ‚‚ = <span id="p2vor">0</span> kgÂ·m/s<br>
                        <strong>Î£p = <span id="pGesVor">8</span> kgÂ·m/s</strong>
                    </div>
                    <div style="font-size: 2em; align-self: center;">â†’</div>
                    <div>
                        <strong>Nachher:</strong><br>
                        pâ‚' = <span id="p1nach">?</span> kgÂ·m/s<br>
                        pâ‚‚' = <span id="p2nach">?</span> kgÂ·m/s<br>
                        <strong>Î£p = <span id="pGesNach">?</span> kgÂ·m/s</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="merksatz">
            <strong>Beobachtung:</strong> Der Gesamtimpuls <em>vor</em> dem StoÃŸ ist gleich dem Gesamtimpuls <em>nach</em> dem StoÃŸ!
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 10: ELASTISCH VS. UNELASTISCH
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step10">
        <h2>10. Elastischer vs. Unelastischer StoÃŸ</h2>

        <div class="compare-cards">
            <div class="compare-card" style="border-color: var(--physik);">
                <div class="icon">ğŸ’¥â†”ï¸</div>
                <div class="name" style="color: var(--physik);">Elastischer StoÃŸ</div>
                <div class="data" style="text-align: left; padding: 10px;">
                    <ul style="margin-left: 15px;">
                        <li>KÃ¶rper <strong>prallen ab</strong></li>
                        <li>Energie bleibt erhalten</li>
                        <li>Beispiel: Billardkugeln</li>
                    </ul>
                </div>
            </div>
            <div class="compare-card" style="border-color: var(--warning);">
                <div class="icon">ğŸ’¥â†’</div>
                <div class="name" style="color: var(--warning);">Unelastischer StoÃŸ</div>
                <div class="data" style="text-align: left; padding: 10px;">
                    <ul style="margin-left: 15px;">
                        <li>KÃ¶rper <strong>kleben zusammen</strong></li>
                        <li>Energie geht verloren (WÃ¤rme)</li>
                        <li>Beispiel: GÃ¼terwagen-Kupplung</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="formel-box">
            <div style="margin-bottom: 15px;">
                <strong>Impulserhaltung gilt bei BEIDEN:</strong>
            </div>
            <span class="fz">m</span><sub>1</sub> Â· <span class="fz">v</span><sub>1</sub> + <span class="fz">m</span><sub>2</sub> Â· <span class="fz">v</span><sub>2</sub> = <span class="fz">m</span><sub>1</sub> Â· <span class="fz">v</span><sub>1</sub>' + <span class="fz">m</span><sub>2</sub> Â· <span class="fz">v</span><sub>2</sub>'
            <br><br>
            <span class="einheit">Unelastisch (zusammen): (mâ‚ + mâ‚‚) Â· v' = mâ‚Â·vâ‚ + mâ‚‚Â·vâ‚‚</span>
        </div>

        <div class="hefter-hinweis">
            <strong>Kasten K6:</strong> FÃ¼lle die Vergleichstabelle aus (elastisch vs. unelastisch).
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 11: ÃœBUNGEN IMPULSERHALTUNG
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step11">
        <h2>11. Ãœbungen: Impulserhaltung anwenden</h2>

        <div class="exercise">
            <div class="exercise-header">
                <span class="exercise-title">Ãœ3: Elastischer StoÃŸ</span>
                <span class="niveau-badge">3 BE</span>
            </div>
            <p>Zwei Wagen auf der Luftkissenbahn:</p>
            <ul style="margin: 10px 0 10px 20px;">
                <li>Wagen 1: mâ‚ = 2 kg, vâ‚ = 3 m/s (fÃ¤hrt nach rechts)</li>
                <li>Wagen 2: mâ‚‚ = 2 kg, vâ‚‚ = 0 m/s (steht still)</li>
            </ul>
            <p>Nach dem <strong>elastischen</strong> StoÃŸ steht Wagen 1 still. Berechne vâ‚‚':</p>

            <p style="margin: 15px 0;">
                Gesamtimpuls vorher: p<sub>ges</sub> = mâ‚Â·vâ‚ + mâ‚‚Â·vâ‚‚ =
                <input type="text" id="u3-pges" style="width: 60px;" placeholder="?"> kgÂ·m/s
            </p>
            <p style="margin: 15px 0;">
                Nach dem StoÃŸ: p<sub>ges</sub> = mâ‚‚Â·vâ‚‚' â†’ vâ‚‚' = p<sub>ges</sub> / mâ‚‚ =
                <input type="text" id="u3-v2" style="width: 60px;" placeholder="?"> m/s
            </p>

            <div class="help-system">
                <button class="help-toggle" onclick="toggleHelp('help-u3-1')">ğŸ’¡ Hilfe 1</button>
                <button class="help-toggle" onclick="toggleHelp('help-u3-2')">ğŸ’¡ Hilfe 2</button>
                <div class="help-content" id="help-u3-1">
                    <strong>Strategie:</strong> Berechne zuerst p<sub>ges</sub> = 2 kg Â· 3 m/s + 2 kg Â· 0 m/s
                </div>
                <div class="help-content" id="help-u3-2">
                    <strong>Rechenweg:</strong> p<sub>ges</sub> = 6 kgÂ·m/s. Nach dem StoÃŸ: vâ‚‚' = 6 / 2 = ?
                </div>
            </div>

            <button onclick="checkU3()" style="margin-top: 15px;">PrÃ¼fen</button>
            <div class="feedback" id="fb-u3"></div>
        </div>

        <div class="exercise">
            <div class="exercise-header">
                <span class="exercise-title">Ãœ4: Unelastischer StoÃŸ</span>
                <span class="niveau-badge">3 BE</span>
            </div>
            <p>Ein Auto (mâ‚ = 1000 kg, vâ‚ = 20 m/s) fÃ¤hrt auf ein stehendes Auto (mâ‚‚ = 1500 kg, vâ‚‚ = 0).</p>
            <p>Nach dem Aufprall sind beide <strong>verkeilt</strong>. Berechne die gemeinsame Geschwindigkeit v':</p>

            <p style="margin: 15px 0;">
                p<sub>ges,vorher</sub> = mâ‚Â·vâ‚ = <input type="text" id="u4-pges" style="width: 80px;" placeholder="?"> kgÂ·m/s
            </p>
            <p style="margin: 15px 0;">
                v' = p<sub>ges</sub> / (mâ‚ + mâ‚‚) = <input type="text" id="u4-v" style="width: 60px;" placeholder="?"> m/s
            </p>

            <div class="help-system">
                <button class="help-toggle" onclick="toggleHelp('help-u4-1')">ğŸ’¡ Hilfe</button>
                <div class="help-content" id="help-u4-1">
                    <strong>Formel:</strong> (mâ‚ + mâ‚‚) Â· v' = mâ‚Â·vâ‚ â†’ v' = (1000 Â· 20) / (1000 + 1500)
                </div>
            </div>

            <button onclick="checkU4()" style="margin-top: 15px;">PrÃ¼fen</button>
            <div class="feedback" id="fb-u4"></div>
        </div>

        <div class="exercise">
            <div class="exercise-header">
                <span class="exercise-title">Ãœ5: Transfer â€“ Sicherheitstechnik</span>
                <span class="niveau-badge">2 BE</span>
            </div>
            <p><strong>ErklÃ¤re mit dem Impulserhaltungssatz:</strong></p>
            <p>Warum ist ein Aufprall gegen eine <strong>Knautschzone</strong> weniger gefÃ¤hrlich als gegen eine starre Wand?</p>
            <p style="color: var(--gray); font-size: 0.9em;">(Tipp: Denke an ImpulsÃ¼bertragung und ZEIT)</p>

            <div style="margin-top: 15px;">
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="u5" value="zeit"> Die Knautschzone verlÃ¤ngert die StoÃŸzeit â†’ die Kraft wird kleiner (F = Î”p/Î”t)
                </label>
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="u5" value="impuls"> Die Knautschzone verringert den Impuls des Autos
                </label>
                <label style="display: block; margin: 8px 0; cursor: pointer;">
                    <input type="radio" name="u5" value="energie"> Die Knautschzone speichert die Energie und gibt sie spÃ¤ter ab
                </label>
            </div>

            <button onclick="checkU5()" style="margin-top: 10px;">PrÃ¼fen</button>
            <div class="feedback" id="fb-u5"></div>
        </div>

        <div class="hefter-hinweis">
            <strong>Ãœbungen Ãœ3, Ãœ4, Ãœ5:</strong> Bearbeite diese Aufgaben auf dem Arbeitsblatt.
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button onclick="nextStep()">Weiter â†’</button>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SCHRITT 12: ZUSAMMENFASSUNG
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="step" id="step12">
        <h2>12. Zusammenfassung</h2>

        <div class="merksatz">
            <strong>Teil A â€“ Impuls:</strong><br>
            p = m Â· v beschreibt die "Wucht" eines bewegten KÃ¶rpers.
        </div>

        <div class="merksatz" style="margin-top: 15px;">
            <strong>Teil B â€“ Impulserhaltung:</strong><br>
            In einem abgeschlossenen System gilt: p<sub>vorher</sub> = p<sub>nachher</sub>
        </div>

        <div class="formel-box">
            <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
                <div>
                    <strong>Impuls:</strong><br>
                    <span class="fz">p</span> = <span class="fz">m</span> Â· <span class="fz">v</span>
                </div>
                <div>
                    <strong>Impulserhaltung:</strong><br>
                    Î£<span class="fz">p</span><sub>vor</sub> = Î£<span class="fz">p</span><sub>nach</sub>
                </div>
            </div>
        </div>

        <h3>Das hast du gelernt:</h3>
        <ul style="margin: 15px 0 15px 25px;">
            <li>âœ“ Impuls p = m Â· v (Einheit: kgÂ·m/s)</li>
            <li>âœ“ Abgeschlossenes System: keine Ã¤uÃŸeren KrÃ¤fte</li>
            <li>âœ“ Impulserhaltungssatz: Gesamtimpuls bleibt konstant</li>
            <li>âœ“ Elastischer StoÃŸ: KÃ¶rper prallen ab</li>
            <li>âœ“ Unelastischer StoÃŸ: KÃ¶rper kleben zusammen</li>
        </ul>

        <div class="hefter-hinweis">
            <strong>Kasten K7:</strong> VervollstÃ¤ndige die Zusammenfassung auf dem Arbeitsblatt.
        </div>

        <div style="text-align: center; margin-top: 30px; padding: 20px; background: var(--success-light); border: 2px solid var(--success);">
            <p style="font-size: 1.2em; color: var(--success);">ğŸ‰ <strong>Geschafft!</strong></p>
            <p style="margin-top: 10px;">Du hast den Lernpfad "Impuls & Impulserhaltung" abgeschlossen.</p>
        </div>

        <div class="nav-buttons">
            <button class="btn-secondary" onclick="prevStep()">â† ZurÃ¼ck</button>
            <button class="btn-success" onclick="finish()">âœ“ AbschlieÃŸen</button>
        </div>
    </div>

</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// KONFIGURATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var LP_ID = 'lp-physik-10e-02-impuls-v2';
var TOTAL_STEPS = 12;
var currentStep = 1;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function init() {
    // Schritt-Indikatoren erstellen
    var indicator = document.getElementById('stepIndicator');
    for (var i = 1; i <= TOTAL_STEPS; i++) {
        var dot = document.createElement('div');
        dot.className = 'step-dot' + (i === 1 ? ' active' : '');
        dot.setAttribute('data-step', i);
        dot.onclick = (function(step) {
            return function() { goToStep(step); };
        })(i);
        indicator.appendChild(dot);
    }

    // Gespeicherten Fortschritt laden
    var saved = localStorage.getItem(LP_ID + '-step');
    if (saved) {
        currentStep = parseInt(saved);
        goToStep(currentStep);
    }

    // Gespeicherte Eingaben laden
    loadInputs();

    // Simulation initialisieren
    updateSim1();
}

function goToStep(step) {
    if (step < 1 || step > TOTAL_STEPS) return;

    // Alle Schritte ausblenden
    var steps = document.querySelectorAll('.step');
    for (var i = 0; i < steps.length; i++) {
        steps[i].classList.remove('active');
    }

    // Zielschritt anzeigen
    document.getElementById('step' + step).classList.add('active');

    // Indikatoren aktualisieren
    var dots = document.querySelectorAll('.step-dot');
    for (var i = 0; i < dots.length; i++) {
        dots[i].classList.remove('active');
        if (i + 1 < step) {
            dots[i].classList.add('completed');
        } else {
            dots[i].classList.remove('completed');
        }
        if (i + 1 === step) {
            dots[i].classList.add('active');
        }
    }

    // Fortschrittsbalken
    var progress = ((step - 1) / (TOTAL_STEPS - 1)) * 100;
    document.getElementById('progressFill').style.width = progress + '%';

    currentStep = step;
    localStorage.setItem(LP_ID + '-step', step);

    window.scrollTo(0, 0);
}

function nextStep() {
    goToStep(currentStep + 1);
}

function prevStep() {
    goToStep(currentStep - 1);
}

function finish() {
    alert('Lernpfad abgeschlossen! Vergiss nicht, dein Arbeitsblatt zu kontrollieren.');
    localStorage.setItem(LP_ID + '-completed', 'true');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EINGABEN SPEICHERN/LADEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function saveInput(id, value) {
    localStorage.setItem(LP_ID + '-' + id, value);
}

function loadInputs() {
    var inputs = document.querySelectorAll('input[type="text"], input[type="number"], textarea');
    for (var i = 0; i < inputs.length; i++) {
        var id = inputs[i].id;
        if (id) {
            var saved = localStorage.getItem(LP_ID + '-' + id);
            if (saved) {
                inputs[i].value = saved;
            }
            inputs[i].addEventListener('change', function() {
                saveInput(this.id, this.value);
            });
        }
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HILFSFUNKTIONEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function parseNumber(value) {
    if (value === '' || value === null) return NaN;
    var normalized = String(value).replace(',', '.').replace(/\s/g, '');
    return parseFloat(normalized);
}

function formatNumber(num) {
    return String(num).replace('.', ',');
}

function speak(text) {
    if ('speechSynthesis' in window) {
        var utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'de-DE';
        utterance.rate = 0.9;
        speechSynthesis.speak(utterance);
    } else {
        alert(text);
    }
}

function toggleHelp(id) {
    var el = document.getElementById(id);
    el.classList.toggle('visible');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCHRITT 1: VORHERSAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function checkVorhersage() {
    var radios = document.getElementsByName('vorhersage');
    var selected = '';
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            selected = radios[i].value;
            break;
        }
    }

    var fb = document.getElementById('feedback1');

    if (selected === 'medizin') {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Richtig! Der Medizinball hat mehr "Wucht" â€“ obwohl beide gleich schnell sind.';
    } else if (selected === 'gleich') {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— Nicht ganz. Gleiche Geschwindigkeit bedeutet nicht gleiche Wucht! Denk an das Gewicht.';
    } else if (selected === 'tennis') {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— Ãœberlege nochmal: Welcher Ball ist schwerer?';
    } else {
        fb.className = 'feedback hint';
        fb.innerHTML = 'Bitte wÃ¤hle eine Antwort.';
    }

    document.getElementById('erklaerung1').style.display = 'block';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCHRITT 2: SIMULATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function updateSim1() {
    var mass = parseFloat(document.getElementById('massSlider').value);
    var vel = parseFloat(document.getElementById('velSlider').value);
    var impuls = mass * vel;

    document.getElementById('massDisplay').textContent = mass;
    document.getElementById('velDisplay').textContent = vel;
    document.getElementById('impulsResult').textContent = formatNumber(impuls);

    drawWuchtMeter(impuls);
}

function drawWuchtMeter(impuls) {
    var canvas = document.getElementById('wuchtCanvas');
    var ctx = canvas.getContext('2d');
    var w = canvas.width;
    var h = canvas.height;

    ctx.clearRect(0, 0, w, h);

    // Skala zeichnen
    var maxImpuls = 5000;
    var barWidth = (w - 60) * Math.min(impuls / maxImpuls, 1);

    // Hintergrund-Balken
    ctx.fillStyle = '#eee';
    ctx.fillRect(30, h/2 - 25, w - 60, 50);

    // Impuls-Balken (Farbverlauf grÃ¼n â†’ rot)
    var ratio = Math.min(impuls / maxImpuls, 1);
    var r = Math.round(ratio * 198);
    var g = Math.round((1 - ratio) * 122 + ratio * 40);
    var b = Math.round((1 - ratio) * 75 + ratio * 40);
    ctx.fillStyle = 'rgb(' + r + ',' + g + ',' + b + ')';
    ctx.fillRect(30, h/2 - 25, barWidth, 50);

    // Rahmen
    ctx.strokeStyle = '#333';
    ctx.lineWidth = 2;
    ctx.strokeRect(30, h/2 - 25, w - 60, 50);

    // Skalen-Beschriftung
    ctx.fillStyle = '#666';
    ctx.font = '12px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('0', 30, h/2 + 45);
    ctx.fillText(formatNumber(maxImpuls) + ' kgÂ·m/s', w - 30, h/2 + 45);

    // Titel
    ctx.fillStyle = '#2c5aa0';
    ctx.font = 'bold 14px sans-serif';
    ctx.fillText('Wucht-O-Meter', w/2, 25);
}

function setPreset(type) {
    var presets = {
        fussball: { m: 0.4, v: 25, label: 'FuÃŸball' },
        sprinter: { m: 80, v: 10, label: 'Sprinter' },
        auto: { m: 100, v: 30, label: 'Auto (skaliert)' },
        du: { m: 60, v: 5, label: 'DU (rennend)' }
    };

    var p = presets[type];
    if (p) {
        // Slider anpassen (mit Skalierung fÃ¼r groÃŸe Massen)
        var massVal = Math.min(p.m, 100);
        var velVal = Math.min(p.v, 50);

        document.getElementById('massSlider').value = massVal;
        document.getElementById('velSlider').value = velVal;
        updateSim1();
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCHRITT 5: ÃœBUNGEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function checkEx1() {
    var input = parseNumber(document.getElementById('ex1-input').value);
    var fb = document.getElementById('fb-ex1');

    if (Math.abs(input - 10) < 0.5) {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Perfekt! p = 0,4 kg Â· 25 m/s = 10 kgÂ·m/s';
    } else if (input === 25) {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âš ï¸ Du hast nur die Geschwindigkeit genommen. Impuls braucht BEIDE: Masse Â· Geschwindigkeit!';
    } else if (Math.abs(input - 0.4) < 0.1) {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âš ï¸ Das ist nur die Masse. Multipliziere noch mit v!';
    } else if (input === 100) {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âš ï¸ Fast! Aber 0,4 Â· 25 = 10, nicht 100. Tipp: 0,4 = 4/10';
    } else {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— Nicht ganz. Formel: p = m Â· v = 0,4 kg Â· 25 m/s = ?';
    }

    saveInput('ex1-input', document.getElementById('ex1-input').value);
}

function checkEx2() {
    var input2a = parseNumber(document.getElementById('ex2a-input').value);
    var input2b = parseNumber(document.getElementById('ex2b-input').value);
    var fb = document.getElementById('fb-ex2');

    var correct2a = Math.abs(input2a - 800) < 10;
    var correct2b = Math.abs(input2b - 36000) < 500;

    if (correct2a && correct2b) {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Beide richtig!<br>a) p = 80 Â· 10 = 800 kgÂ·m/s<br>b) p = 1200 Â· 30 = 36.000 kgÂ·m/s';
    } else if (correct2a) {
        fb.className = 'feedback hint';
        fb.innerHTML = 'âš ï¸ a) ist richtig! Bei b) fehlt noch etwas. p = 1200 Â· 30 = ?';
    } else if (correct2b) {
        fb.className = 'feedback hint';
        fb.innerHTML = 'âš ï¸ b) ist richtig! Bei a) prÃ¼fe nochmal: p = 80 Â· 10 = ?';
    } else {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— PrÃ¼fe beide Rechnungen:<br>a) p = 80 kg Â· 10 m/s = ?<br>b) p = 1200 kg Â· 30 m/s = ?';
    }

    saveInput('ex2a-input', document.getElementById('ex2a-input').value);
    saveInput('ex2b-input', document.getElementById('ex2b-input').value);
}

function checkEx3() {
    var input3a = parseNumber(document.getElementById('ex3a-input').value);
    var radios = document.getElementsByName('ex3b');
    var selected3b = '';
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            selected3b = radios[i].value;
            break;
        }
    }
    var fb = document.getElementById('fb-ex3');

    var correct3a = Math.abs(input3a - 32000000) < 500000;
    var correct3b = selected3b === 'masse';

    if (correct3a && correct3b) {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Ausgezeichnet!<br>a) p = 400.000 Â· 80 = 32.000.000 kgÂ·m/s<br>b) Richtig: Die enorme Masse des Zuges fÃ¼hrt zu einem viel grÃ¶ÃŸeren Impuls!';
    } else if (correct3a && !correct3b) {
        fb.className = 'feedback hint';
        fb.innerHTML = 'âš ï¸ a) ist richtig! Bei b): Der Impuls hÃ¤ngt von Masse UND Geschwindigkeit ab. Was ist beim Zug besonders groÃŸ?';
    } else if (!correct3a && correct3b) {
        fb.className = 'feedback hint';
        fb.innerHTML = 'âš ï¸ b) ist richtig! PrÃ¼fe a): p = 400.000 kg Â· 80 m/s = ?';
    } else {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— PrÃ¼fe a): p = 400.000 kg Â· 80 m/s = ?<br>Tipp: 4 Â· 8 = 32, dann Nullen zÃ¤hlen!';
    }

    saveInput('ex3a-input', document.getElementById('ex3a-input').value);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCHRITT 6: CHALLENGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function revealDuell1(choice) {
    var boltP = 94 * 12;  // 1128
    var sumoP = 180 * 4;  // 720

    document.getElementById('bolt-result').textContent = formatNumber(boltP) + ' kgÂ·m/s';
    document.getElementById('sumo-result').textContent = formatNumber(sumoP) + ' kgÂ·m/s';

    var fb = document.getElementById('fb-duell1');

    if (choice === 'bolt') {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Richtig! Bolt gewinnt: ' + formatNumber(boltP) + ' > ' + formatNumber(sumoP) + ' kgÂ·m/s<br><strong>Ãœberraschung:</strong> Der leichtere, aber schnellere Bolt hat mehr Wucht!';
    } else {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— Knapp daneben! Bolt: ' + formatNumber(boltP) + ' kgÂ·m/s, Sumo: ' + formatNumber(sumoP) + ' kgÂ·m/s<br>Bolts Geschwindigkeit macht den Unterschied!';
    }
}

function revealDuell2() {
    var duP = 60 * 1.5;       // 90
    var schneckeP = 0.01 * 0.001;  // 0.00001

    document.getElementById('du-result').textContent = formatNumber(duP) + ' kgÂ·m/s';
    document.getElementById('schnecke-result').textContent = schneckeP.toExponential(0) + ' kgÂ·m/s';

    var fb = document.getElementById('fb-duell2');
    fb.className = 'feedback correct';
    fb.innerHTML = 'âœ“ DU gewinnst haushoch!<br>Dein Impuls: ' + formatNumber(duP) + ' kgÂ·m/s<br>Schnecke: 0,00001 kgÂ·m/s<br><strong>Du hast 9 MILLIONEN mal mehr Wucht als eine Schnecke!</strong>';
}

function checkAirbag() {
    var radios = document.getElementsByName('airbag');
    var selected = '';
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            selected = radios[i].value;
            break;
        }
    }
    var fb = document.getElementById('fb-airbag');

    if (selected === 'zeit') {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Richtig! Der Airbag verlÃ¤ngert die Aufprallzeit Î”t. Bei gleichem Impuls Î”p wird die Kraft F = Î”p/Î”t kleiner.<br><em>Das lernst du genauer in der nÃ¤chsten Stunde!</em>';
    } else if (selected === 'impuls') {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— Nicht ganz. Der Impuls (Î”p) ist gleich â€“ egal ob mit oder ohne Airbag. Aber was Ã¤ndert sich?';
    } else if (selected === 'weich') {
        fb.className = 'feedback hint';
        fb.innerHTML = 'âš ï¸ Das stimmt, aber erklÃ¤rt nicht die Physik. WARUM ist "weicher" besser? Denke an die ZEIT des Aufpralls!';
    } else {
        fb.className = 'feedback hint';
        fb.innerHTML = 'Bitte wÃ¤hle eine Antwort.';
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCHRITT 9: STOSS-SIMULATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var stossAnimating = false;
var stossAnimationId = null;
var stossState = {
    x1: 0, x2: 0,
    vx1: 0, vx2: 0,
    m1: 2, m2: 2,
    size1: 46, size2: 46,
    phase: 'idle',
    collided: false
};

function updateStossSim() {
    var m1 = parseFloat(document.getElementById('m1Slider').value);
    var v1 = parseFloat(document.getElementById('v1Slider').value);
    var m2 = parseFloat(document.getElementById('m2Slider').value);
    var v2 = parseFloat(document.getElementById('v2Slider').value);

    document.getElementById('m1Display').textContent = m1;
    document.getElementById('v1Display').textContent = v1;
    document.getElementById('m2Display').textContent = m2;
    document.getElementById('v2Display').textContent = v2;

    var p1 = m1 * v1;
    var p2 = m2 * v2;
    var pGes = p1 + p2;

    document.getElementById('p1vor').textContent = formatNumber(p1);
    document.getElementById('p2vor').textContent = formatNumber(p2);
    document.getElementById('pGesVor').textContent = formatNumber(pGes);
    document.getElementById('p1nach').textContent = '?';
    document.getElementById('p2nach').textContent = '?';
    document.getElementById('pGesNach').textContent = '?';

    // Initialpositionen setzen
    var canvas = document.getElementById('stossCanvas');
    if (!canvas) return;
    var w = canvas.width;

    stossState.m1 = m1;
    stossState.m2 = m2;
    stossState.size1 = 30 + m1 * 8;
    stossState.size2 = 30 + m2 * 8;
    stossState.x1 = 80 + stossState.size1/2;
    stossState.x2 = w - 80 - stossState.size2/2;
    stossState.vx1 = 0;
    stossState.vx2 = 0;
    stossState.phase = 'idle';
    stossState.collided = false;

    drawStossFrame(v1, v2, true);
}

function drawStossFrame(v1Display, v2Display, showArrows) {
    var canvas = document.getElementById('stossCanvas');
    if (!canvas) return;
    var ctx = canvas.getContext('2d');
    var w = canvas.width;
    var h = canvas.height;

    ctx.clearRect(0, 0, w, h);

    // Bahn zeichnen
    ctx.fillStyle = '#eee';
    ctx.fillRect(20, h/2 - 5, w - 40, 10);

    var x1 = stossState.x1;
    var x2 = stossState.x2;
    var size1 = stossState.size1;
    var size2 = stossState.size2;

    // Wagen 1 (blau)
    ctx.fillStyle = '#2c5aa0';
    ctx.fillRect(x1 - size1/2, h/2 - 25, size1, 40);
    ctx.fillStyle = 'white';
    ctx.font = 'bold 14px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('1', x1, h/2 + 5);

    // Wagen 2 (orange)
    ctx.fillStyle = '#b35c00';
    ctx.fillRect(x2 - size2/2, h/2 - 25, size2, 40);
    ctx.fillStyle = 'white';
    ctx.fillText('2', x2, h/2 + 5);

    // Geschwindigkeitspfeile (nur im Stillstand)
    if (showArrows) {
        if (v1Display > 0) drawArrow(ctx, x1 + size1/2 + 5, h/2, x1 + size1/2 + 5 + v1Display*5, h/2, '#2c5aa0');
        if (v1Display < 0) drawArrow(ctx, x1 - size1/2 - 5, h/2, x1 - size1/2 - 5 + v1Display*5, h/2, '#2c5aa0');
        if (v2Display > 0) drawArrow(ctx, x2 + size2/2 + 5, h/2, x2 + size2/2 + 5 + v2Display*5, h/2, '#b35c00');
        if (v2Display < 0) drawArrow(ctx, x2 - size2/2 - 5, h/2, x2 - size2/2 - 5 + v2Display*5, h/2, '#b35c00');
    }

    // Labels
    ctx.fillStyle = '#333';
    ctx.font = '12px sans-serif';
    ctx.fillText('mâ‚=' + stossState.m1 + 'kg', x1, h/2 + 50);
    ctx.fillText('mâ‚‚=' + stossState.m2 + 'kg', x2, h/2 + 50);
}

function drawArrow(ctx, x1, y1, x2, y2, color) {
    ctx.strokeStyle = color;
    ctx.fillStyle = color;
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();

    // Pfeilspitze
    var angle = Math.atan2(y2 - y1, x2 - x1);
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - 10 * Math.cos(angle - 0.4), y2 - 10 * Math.sin(angle - 0.4));
    ctx.lineTo(x2 - 10 * Math.cos(angle + 0.4), y2 - 10 * Math.sin(angle + 0.4));
    ctx.closePath();
    ctx.fill();
}

function startStossAnimation() {
    if (stossAnimating) return;
    stossAnimating = true;

    var m1 = parseFloat(document.getElementById('m1Slider').value);
    var v1 = parseFloat(document.getElementById('v1Slider').value);
    var m2 = parseFloat(document.getElementById('m2Slider').value);
    var v2 = parseFloat(document.getElementById('v2Slider').value);
    var typ = document.getElementById('stossTyp').value;

    var canvas = document.getElementById('stossCanvas');
    var w = canvas.width;

    // Berechne Endgeschwindigkeiten
    var v1nach, v2nach;
    if (typ === 'elastisch') {
        v1nach = ((m1 - m2) * v1 + 2 * m2 * v2) / (m1 + m2);
        v2nach = ((m2 - m1) * v2 + 2 * m1 * v1) / (m1 + m2);
    } else {
        var vGemeinsam = (m1 * v1 + m2 * v2) / (m1 + m2);
        v1nach = vGemeinsam;
        v2nach = vGemeinsam;
    }

    // Animationsgeschwindigkeiten (skaliert fÃ¼r sichtbare Bewegung)
    var speed = 2.5;
    stossState.vx1 = v1 * speed;
    stossState.vx2 = v2 * speed;
    stossState.phase = 'before';
    stossState.collided = false;

    // Speichere Nachher-Werte fÃ¼r spÃ¤ter
    stossState.v1nach = v1nach;
    stossState.v2nach = v2nach;
    stossState.v1nachScaled = v1nach * speed;
    stossState.v2nachScaled = v2nach * speed;

    function animate() {
        var size1 = stossState.size1;
        var size2 = stossState.size2;

        // Positionen aktualisieren
        stossState.x1 += stossState.vx1;
        stossState.x2 += stossState.vx2;

        // Kollisionserkennung
        var edge1 = stossState.x1 + size1/2;
        var edge2 = stossState.x2 - size2/2;

        if (!stossState.collided && edge1 >= edge2) {
            stossState.collided = true;
            stossState.phase = 'after';

            // Auf Nachher-Geschwindigkeiten umschalten
            stossState.vx1 = stossState.v1nachScaled;
            stossState.vx2 = stossState.v2nachScaled;

            // Ergebnisse anzeigen
            var p1nach = m1 * stossState.v1nach;
            var p2nach = m2 * stossState.v2nach;
            var pGesNach = p1nach + p2nach;

            document.getElementById('p1nach').textContent = formatNumber(Math.round(p1nach * 10) / 10);
            document.getElementById('p2nach').textContent = formatNumber(Math.round(p2nach * 10) / 10);
            document.getElementById('pGesNach').textContent = formatNumber(Math.round(pGesNach * 10) / 10);
        }

        // Grenzen prÃ¼fen (Animation beenden)
        var done = false;
        if (stossState.collided) {
            if (stossState.x1 < 30 || stossState.x1 > w - 30 ||
                stossState.x2 < 30 || stossState.x2 > w - 30) {
                done = true;
            }
            // Bei unelastischem StoÃŸ: beide bewegen sich gleich
            if (typ === 'unelastisch') {
                if (stossState.x1 > w - 100 || stossState.x2 > w - 50) {
                    done = true;
                }
            }
        }

        drawStossFrame(0, 0, false);

        if (!done && stossAnimating) {
            stossAnimationId = requestAnimationFrame(animate);
        } else {
            stossAnimating = false;
        }
    }

    stossAnimationId = requestAnimationFrame(animate);
}

function resetStossSim() {
    stossAnimating = false;
    if (stossAnimationId) {
        cancelAnimationFrame(stossAnimationId);
        stossAnimationId = null;
    }
    updateStossSim();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCHRITT 11: ÃœBUNGEN IMPULSERHALTUNG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function checkU3() {
    var pges = parseNumber(document.getElementById('u3-pges').value);
    var v2 = parseNumber(document.getElementById('u3-v2').value);
    var fb = document.getElementById('fb-u3');

    var correctPges = Math.abs(pges - 6) < 0.5;
    var correctV2 = Math.abs(v2 - 3) < 0.5;

    if (correctPges && correctV2) {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Perfekt! p<sub>ges</sub> = 2Â·3 + 2Â·0 = 6 kgÂ·m/s. Nach dem StoÃŸ: vâ‚‚\' = 6/2 = 3 m/s.<br>Der Impuls wurde vollstÃ¤ndig von Wagen 1 auf Wagen 2 Ã¼bertragen!';
    } else if (correctPges) {
        fb.className = 'feedback hint';
        fb.innerHTML = 'âš ï¸ p<sub>ges</sub> stimmt! FÃ¼r vâ‚‚\' teile durch mâ‚‚: vâ‚‚\' = 6 / 2 = ?';
    } else {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— Berechne zuerst p<sub>ges</sub> = mâ‚Â·vâ‚ + mâ‚‚Â·vâ‚‚ = 2Â·3 + 2Â·0 = ?';
    }

    saveInput('u3-pges', document.getElementById('u3-pges').value);
    saveInput('u3-v2', document.getElementById('u3-v2').value);
}

function checkU4() {
    var pges = parseNumber(document.getElementById('u4-pges').value);
    var v = parseNumber(document.getElementById('u4-v').value);
    var fb = document.getElementById('fb-u4');

    var correctPges = Math.abs(pges - 20000) < 500;
    var correctV = Math.abs(v - 8) < 0.5;

    if (correctPges && correctV) {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Richtig! p<sub>ges</sub> = 1000Â·20 = 20.000 kgÂ·m/s.<br>v\' = 20.000 / 2500 = 8 m/s.<br>Nach dem Crash fahren beide mit 8 m/s weiter (â‰ˆ 29 km/h).';
    } else if (correctPges) {
        fb.className = 'feedback hint';
        fb.innerHTML = 'âš ï¸ p<sub>ges</sub> stimmt! FÃ¼r v\' rechne: 20.000 / (1000 + 1500) = ?';
    } else {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— p<sub>ges</sub> = mâ‚ Â· vâ‚ = 1000 kg Â· 20 m/s = ?';
    }

    saveInput('u4-pges', document.getElementById('u4-pges').value);
    saveInput('u4-v', document.getElementById('u4-v').value);
}

function checkU5() {
    var radios = document.getElementsByName('u5');
    var selected = '';
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            selected = radios[i].value;
            break;
        }
    }
    var fb = document.getElementById('fb-u5');

    if (selected === 'zeit') {
        fb.className = 'feedback correct';
        fb.innerHTML = 'âœ“ Richtig! Die Knautschzone verlÃ¤ngert die StoÃŸzeit Î”t. Bei gleichem Impuls Î”p wird die Kraft F = Î”p/Î”t kleiner â†’ weniger Verletzungen.';
    } else if (selected === 'impuls') {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— Nicht ganz. Der Impuls Î”p ist gleich â€“ ob mit oder ohne Knautschzone. Der Impulserhaltungssatz gilt immer!';
    } else if (selected === 'energie') {
        fb.className = 'feedback incorrect';
        fb.innerHTML = 'âœ— Die Knautschzone wandelt Energie in Verformungsarbeit um, speichert sie aber nicht. Der SchlÃ¼ssel ist die ZEIT!';
    } else {
        fb.className = 'feedback hint';
        fb.innerHTML = 'Bitte wÃ¤hle eine Antwort.';
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INITIALISIERUNG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

window.onload = function() {
    init();
    // StoÃŸ-Simulator initialisieren (falls sichtbar)
    if (document.getElementById('stossCanvas')) {
        updateStossSim();
    }
};
</script>

</body>
</html>
