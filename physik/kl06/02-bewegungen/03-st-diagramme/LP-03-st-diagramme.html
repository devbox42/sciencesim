<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weg-Zeit-Diagramme | Physik Klasse 6</title>
    <style>
/* ═══════════════════════════════════════════════════════════════
   LP-003 Weg-Zeit-Diagramme - Step-Navigation
   sciencesim Design System
═══════════════════════════════════════════════════════════════ */

* { box-sizing: border-box; margin: 0; padding: 0; }

:root {
    --bg: #f5f5f5;
    --white: #ffffff;
    --border: #dddddd;
    --text-primary: #222222;
    --text-secondary: #555555;
    --text-muted: #888888;
    --accent: #2c5aa0;
    --accent-light: #e8f0fa;
    --success: #2a7a4b;
    --success-bg: #e8f5e9;
    --warning: #b35c00;
    --warning-bg: #fff3e0;
    --error: #c62828;
    --error-bg: #ffebee;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg);
    font-size: 16px;
    color: var(--text-primary);
    line-height: 1.6;
}

.container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
}

/* ═══════════════════════════════════════════════════════════════
   HEADER
═══════════════════════════════════════════════════════════════ */

header {
    background: var(--white);
    border: 1px solid var(--border);
    padding: 15px 20px;
    margin-bottom: 20px;
}

header h1 {
    color: var(--accent);
    font-size: 1.4em;
    font-weight: 600;
}

header .meta {
    color: var(--text-muted);
    font-size: 0.9em;
    margin-top: 5px;
}

.progress-bar {
    background: #e0e0e0;
    height: 8px;
    margin-top: 10px;
}

.progress-fill {
    background: var(--accent);
    height: 100%;
    width: 0%;
    transition: width 0.3s;
}

/* Step-Indicators */
.step-indicators {
    display: flex;
    gap: 4px;
    margin-top: 10px;
    flex-wrap: wrap;
}

.step-dot {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75em;
    font-weight: 600;
    border: 2px solid var(--border);
    background: var(--white);
    cursor: pointer;
    transition: all 0.15s;
    color: var(--text-secondary);
}

.step-dot:hover { border-color: var(--accent); }
.step-dot.completed { background: var(--success); border-color: var(--success); color: var(--white); }
.step-dot.current { border-color: var(--accent); border-width: 3px; color: var(--accent); }

/* ═══════════════════════════════════════════════════════════════
   STEP CONTENT
═══════════════════════════════════════════════════════════════ */

.step {
    background: var(--white);
    border: 1px solid var(--border);
    margin-bottom: 15px;
    display: none;
}

.step.active { display: block; }

.step-header {
    background: var(--accent);
    color: var(--white);
    padding: 12px 15px;
    font-weight: 600;
    font-size: 1.1em;
}

.step-content {
    padding: 20px;
}

.step-content p { margin-bottom: 12px; }
.step-content h3 { font-size: 1em; font-weight: 600; margin: 15px 0 10px 0; }
.step-content ul, .step-content ol { margin-left: 20px; margin-top: 10px; }
.step-content li { margin: 5px 0; }

/* ═══════════════════════════════════════════════════════════════
   CONTENT BOXES
═══════════════════════════════════════════════════════════════ */

.info-box {
    background: var(--accent-light);
    border: 1px solid var(--accent);
    padding: 12px 15px;
    margin: 15px 0;
}

.info-box strong { color: var(--accent); }

.merksatz {
    background: var(--success-bg);
    border-left: 4px solid var(--success);
    padding: 12px 15px;
    margin: 15px 0;
}

.merksatz::before {
    content: "Merksatz";
    display: block;
    font-weight: 600;
    color: var(--success);
    font-size: 0.85em;
    margin-bottom: 5px;
}

.hefter-hinweis {
    background: var(--warning-bg);
    border: 2px solid var(--warning);
    padding: 12px 15px;
    margin: 20px 0;
}

.hefter-hinweis::before {
    content: "Arbeitsblatt";
    display: inline-block;
    background: var(--warning);
    color: white;
    font-size: 0.75em;
    font-weight: 600;
    padding: 2px 8px;
    margin-bottom: 8px;
}

.hefter-hinweis ul { margin: 0; padding-left: 20px; }
.hefter-hinweis li { margin: 5px 0; }

/* Diagramm-Container */
.diagram-container {
    background: var(--white);
    border: 1px solid var(--border);
    padding: 15px;
    margin: 15px 0;
    text-align: center;
}

.diagram-container svg { max-width: 100%; height: auto; }

/* Tabellen */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
}

th, td {
    border: 1px solid var(--border);
    padding: 8px 12px;
    text-align: center;
}

th { background: var(--bg); font-weight: 600; }

/* ═══════════════════════════════════════════════════════════════
   EXERCISES
═══════════════════════════════════════════════════════════════ */

.exercise {
    background: var(--bg);
    border: 1px solid var(--border);
    padding: 15px;
    margin: 15px 0;
}

.exercise-title {
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 10px;
}

.niveau-badge {
    font-size: 0.8em;
    padding: 2px 8px;
    background: var(--accent);
    color: white;
    margin-left: 10px;
}

select, input[type="text"], input[type="number"] {
    padding: 8px;
    font-size: 1em;
    border: 1px solid var(--border);
    margin: 5px 0;
}

.fill-blank {
    border: none;
    border-bottom: 2px solid var(--accent);
    padding: 2px 5px;
    width: 60px;
    text-align: center;
    background: transparent;
}

.inline-select { padding: 4px 8px; }

.feedback {
    padding: 10px 15px;
    margin: 10px 0;
    display: none;
}

.feedback.correct {
    background: var(--success-bg);
    border: 1px solid var(--success);
    color: #1b5e20;
    display: block;
}

.feedback.incorrect {
    background: var(--error-bg);
    border: 1px solid var(--error);
    color: #b71c1c;
    display: block;
}

.feedback.hint {
    background: var(--warning-bg);
    border: 1px solid var(--warning);
    color: #e65100;
    display: block;
}

/* ═══════════════════════════════════════════════════════════════
   BUTTONS & NAVIGATION
═══════════════════════════════════════════════════════════════ */

.btn {
    display: inline-block;
    padding: 10px 20px;
    background: var(--accent);
    color: var(--white);
    border: none;
    cursor: pointer;
    font-size: 1em;
    margin: 5px 5px 5px 0;
}

.btn:hover { background: #1e3d6b; }
.btn-success { background: var(--success); }
.btn-success:hover { background: #1e5a35; }
.btn-secondary { background: #666; }
.btn-secondary:hover { background: #444; }

.nav-buttons {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid var(--border);
}

/* Interactive Canvas */
.interactive-diagram {
    background: var(--white);
    border: 1px solid var(--border);
    padding: 15px;
    margin: 15px 0;
}

#diagram-canvas {
    border: 1px solid var(--border);
    cursor: crosshair;
}

.canvas-controls {
    margin-top: 10px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.canvas-controls button {
    padding: 6px 12px;
    border: 1px solid var(--border);
    background: var(--white);
    cursor: pointer;
}

.canvas-controls button:hover { background: var(--bg); }

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Weg-Zeit-Diagramme verstehen und zeichnen</h1>
            <div class="meta">Physik Klasse 6 | Bewegungen</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="step-indicators" id="stepIndicators"></div>
        </header>

        <!-- ========== SCHRITT 1: Einführung ========== -->
        <div class="step active" id="step1">
            <div class="step-header">Schritt 1: Bewegungen sichtbar machen</div>
            <div class="step-content">
                <p>In der letzten Stunde habt ihr gemessen, wie schnell ihr lauft. Die Ergebnisse standen in einer <strong>Wertetabelle</strong>:</p>

                <table>
                    <tr>
                        <th>Zeit <em>t</em> in s</th>
                        <td>0</td><td>2</td><td>4</td><td>6</td><td>8</td>
                    </tr>
                    <tr>
                        <th>Weg <em>s</em> in m</th>
                        <td>0</td><td>10</td><td>20</td><td>30</td><td>40</td>
                    </tr>
                </table>

                <p>Solche Tabellen sind nützlich, aber nicht sehr <strong>übersichtlich</strong>. Wenn wir Bewegungen vergleichen wollen, brauchen wir eine bessere Darstellung.</p>

                <div class="info-box">
                    <strong>Idee:</strong> Wir zeichnen die Werte aus der Tabelle in ein <strong>Koordinatensystem</strong> – so wie ihr es aus dem Matheunterricht kennt!
                </div>

                <p>Das Ergebnis nennt man ein <strong>Weg-Zeit-Diagramm</strong> (oder kurz: s(t)-Diagramm).</p>

                <div class="nav-buttons">
                    <button class="btn btn-success" onclick="nextStep(2)">Weiter →</button>
                </div>
            </div>
        </div>

        <!-- ========== SCHRITT 2: Aufbau des Diagramms ========== -->
        <div class="step" id="step2">
            <div class="step-header">Schritt 2: Aufbau eines Weg-Zeit-Diagramms</div>
            <div class="step-content">
                <p>Ein Weg-Zeit-Diagramm hat immer den gleichen Aufbau:</p>

                <div class="diagram-container">
                    <svg viewBox="0 0 400 280" width="400" height="280">
                        <line x1="50" y1="230" x2="380" y2="230" stroke="#222" stroke-width="2"/>
                        <line x1="50" y1="230" x2="50" y2="30" stroke="#222" stroke-width="2"/>
                        <polygon points="380,230 370,225 370,235" fill="#222"/>
                        <polygon points="50,30 45,40 55,40" fill="#222"/>
                        <text x="360" y="255" font-size="14" fill="#222"><tspan font-style="italic">t</tspan> in s</text>
                        <text x="60" y="45" font-size="14" fill="#222"><tspan font-style="italic">s</tspan> in m</text>
                        <line x1="50" y1="230" x2="50" y2="235" stroke="#222"/>
                        <text x="47" y="250" font-size="12">0</text>
                        <line x1="110" y1="230" x2="110" y2="235" stroke="#222"/>
                        <text x="107" y="250" font-size="12">2</text>
                        <line x1="170" y1="230" x2="170" y2="235" stroke="#222"/>
                        <text x="167" y="250" font-size="12">4</text>
                        <line x1="230" y1="230" x2="230" y2="235" stroke="#222"/>
                        <text x="227" y="250" font-size="12">6</text>
                        <line x1="290" y1="230" x2="290" y2="235" stroke="#222"/>
                        <text x="287" y="250" font-size="12">8</text>
                        <line x1="45" y1="190" x2="50" y2="190" stroke="#222"/>
                        <text x="30" y="194" font-size="12">10</text>
                        <line x1="45" y1="150" x2="50" y2="150" stroke="#222"/>
                        <text x="30" y="154" font-size="12">20</text>
                        <line x1="45" y1="110" x2="50" y2="110" stroke="#222"/>
                        <text x="30" y="114" font-size="12">30</text>
                        <line x1="45" y1="70" x2="50" y2="70" stroke="#222"/>
                        <text x="30" y="74" font-size="12">40</text>
                        <rect x="55" y="55" width="130" height="25" fill="#e3f2fd" stroke="#2c5aa0"/>
                        <text x="60" y="72" font-size="11" fill="#2c5aa0">Weg (senkrecht, y-Achse)</text>
                        <rect x="200" y="200" width="140" height="25" fill="#e3f2fd" stroke="#2c5aa0"/>
                        <text x="205" y="217" font-size="11" fill="#2c5aa0">Zeit (waagerecht, x-Achse)</text>
                    </svg>
                </div>

                <div class="merksatz">
                    <strong>Achsenbeschriftung:</strong><br>
                    • Die <strong>Zeitachse</strong> (<em>t</em>) ist immer <strong>waagerecht</strong> (x-Achse).<br>
                    • Die <strong>Wegachse</strong> (<em>s</em>) ist immer <strong>senkrecht</strong> (y-Achse).<br>
                    • Beide Achsen brauchen eine <strong>Einheit</strong> (z.B. Sekunden, Meter).
                </div>

                <div class="exercise">
                    <div class="exercise-title">Übung 1: Achsen zuordnen <span class="niveau-badge">★</span></div>
                    <p>Welche Größe gehört auf welche Achse?</p>
                    <p>Waagerechte Achse (x):
                        <select id="ex1-x" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="t">Zeit t</option>
                            <option value="s">Weg s</option>
                            <option value="v">Geschwindigkeit v</option>
                        </select>
                    </p>
                    <p>Senkrechte Achse (y):
                        <select id="ex1-y" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="t">Zeit t</option>
                            <option value="s">Weg s</option>
                            <option value="v">Geschwindigkeit v</option>
                        </select>
                    </p>
                    <button class="btn" onclick="checkExercise1()">Prüfen</button>
                    <div class="feedback" id="feedback-1"></div>
                </div>

                <div class="hefter-hinweis">
                    <ul>
                        <li><strong>Kasten 1:</strong> Ergänze die Achsenbeschriftung (Zeit, Weg, Einheiten)</li>
                    </ul>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="prevStep(1)">← Zurück</button>
                    <button class="btn btn-success" onclick="nextStep(3)">Weiter →</button>
                </div>
            </div>
        </div>

        <!-- ========== SCHRITT 3: Punkte einzeichnen ========== -->
        <div class="step" id="step3">
            <div class="step-header">Schritt 3: Punkte einzeichnen und verbinden</div>
            <div class="step-content">
                <p>Jetzt zeichnen wir die Werte aus unserer Tabelle ins Diagramm:</p>

                <table>
                    <tr>
                        <th>Zeit <em>t</em> in s</th>
                        <td>0</td><td>2</td><td>4</td><td>6</td><td>8</td>
                    </tr>
                    <tr>
                        <th>Weg <em>s</em> in m</th>
                        <td>0</td><td>10</td><td>20</td><td>30</td><td>40</td>
                    </tr>
                </table>

                <h3>Schritt für Schritt:</h3>
                <ol>
                    <li>Nimm den ersten Wert: Bei <em>t</em> = 0 s ist <em>s</em> = 0 m → Punkt bei (0|0)</li>
                    <li>Nimm den zweiten Wert: Bei <em>t</em> = 2 s ist <em>s</em> = 10 m → Punkt bei (2|10)</li>
                    <li>Zeichne alle weiteren Punkte ein</li>
                    <li>Verbinde die Punkte mit dem Lineal zu einer Geraden</li>
                </ol>

                <div class="diagram-container">
                    <svg viewBox="0 0 400 280" width="400" height="280">
                        <line x1="50" y1="230" x2="380" y2="230" stroke="#222" stroke-width="2"/>
                        <line x1="50" y1="230" x2="50" y2="30" stroke="#222" stroke-width="2"/>
                        <polygon points="380,230 370,225 370,235" fill="#222"/>
                        <polygon points="50,30 45,40 55,40" fill="#222"/>
                        <text x="360" y="255" font-size="14" fill="#222"><tspan font-style="italic">t</tspan> in s</text>
                        <text x="60" y="45" font-size="14" fill="#222"><tspan font-style="italic">s</tspan> in m</text>
                        <text x="47" y="250" font-size="12">0</text>
                        <text x="107" y="250" font-size="12">2</text>
                        <text x="167" y="250" font-size="12">4</text>
                        <text x="227" y="250" font-size="12">6</text>
                        <text x="287" y="250" font-size="12">8</text>
                        <text x="30" y="194" font-size="12">10</text>
                        <text x="30" y="154" font-size="12">20</text>
                        <text x="30" y="114" font-size="12">30</text>
                        <text x="30" y="74" font-size="12">40</text>
                        <circle cx="50" cy="230" r="5" fill="#2c5aa0"/>
                        <circle cx="110" cy="190" r="5" fill="#2c5aa0"/>
                        <circle cx="170" cy="150" r="5" fill="#2c5aa0"/>
                        <circle cx="230" cy="110" r="5" fill="#2c5aa0"/>
                        <circle cx="290" cy="70" r="5" fill="#2c5aa0"/>
                        <line x1="50" y1="230" x2="290" y2="70" stroke="#2c5aa0" stroke-width="2"/>
                        <text x="300" y="60" font-size="12" fill="#2c5aa0">Fußgänger</text>
                    </svg>
                </div>

                <div class="info-box">
                    <strong>Ergebnis:</strong> Bei einer <strong>gleichförmigen Bewegung</strong> (gleiche Geschwindigkeit) ergibt sich immer eine <strong>Gerade</strong>, die durch den Ursprung geht.
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="prevStep(2)">← Zurück</button>
                    <button class="btn btn-success" onclick="nextStep(4)">Weiter →</button>
                </div>
            </div>
        </div>

        <!-- ========== SCHRITT 4: Interpretation ========== -->
        <div class="step" id="step4">
            <div class="step-header">Schritt 4: Was verrät uns das Diagramm?</div>
            <div class="step-content">
                <p>Schauen wir uns zwei verschiedene Bewegungen im gleichen Diagramm an:</p>

                <div class="diagram-container">
                    <svg viewBox="0 0 400 280" width="400" height="280">
                        <line x1="50" y1="230" x2="380" y2="230" stroke="#222" stroke-width="2"/>
                        <line x1="50" y1="230" x2="50" y2="30" stroke="#222" stroke-width="2"/>
                        <polygon points="380,230 370,225 370,235" fill="#222"/>
                        <polygon points="50,30 45,40 55,40" fill="#222"/>
                        <text x="360" y="255" font-size="14" fill="#222"><tspan font-style="italic">t</tspan> in s</text>
                        <text x="60" y="45" font-size="14" fill="#222"><tspan font-style="italic">s</tspan> in m</text>
                        <text x="47" y="250" font-size="12">0</text>
                        <text x="107" y="250" font-size="12">2</text>
                        <text x="167" y="250" font-size="12">4</text>
                        <text x="227" y="250" font-size="12">6</text>
                        <text x="287" y="250" font-size="12">8</text>
                        <text x="30" y="194" font-size="12">10</text>
                        <text x="30" y="154" font-size="12">20</text>
                        <text x="30" y="114" font-size="12">30</text>
                        <text x="30" y="74" font-size="12">40</text>
                        <line x1="50" y1="230" x2="230" y2="70" stroke="#c62828" stroke-width="2"/>
                        <text x="170" y="55" font-size="12" fill="#c62828">Radfahrer (schnell)</text>
                        <line x1="50" y1="230" x2="290" y2="150" stroke="#2c5aa0" stroke-width="2"/>
                        <text x="240" y="135" font-size="12" fill="#2c5aa0">Fußgänger (langsam)</text>
                    </svg>
                </div>

                <div class="merksatz">
                    <strong>Interpretation:</strong><br>
                    • Eine <strong>steile Gerade</strong> bedeutet: Der Körper ist <strong>schnell</strong> (viel Weg in kurzer Zeit).<br>
                    • Eine <strong>flache Gerade</strong> bedeutet: Der Körper ist <strong>langsam</strong> (wenig Weg in gleicher Zeit).<br>
                    • Eine <strong>waagerechte Linie</strong> bedeutet: Der Körper steht <strong>still</strong> (der Weg ändert sich nicht).
                </div>

                <div class="exercise">
                    <div class="exercise-title">Übung 2: Steil oder flach? <span class="niveau-badge">★★</span></div>
                    <p>Schau dir das Diagramm oben an:</p>
                    <p>a) Wer ist schneller?
                        <select id="ex2-a" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="rad">Radfahrer</option>
                            <option value="fuss">Fußgänger</option>
                            <option value="gleich">Beide gleich schnell</option>
                        </select>
                    </p>
                    <p>b) Wie erkennst du das im Diagramm?
                        <select id="ex2-b" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="steil">Die Gerade ist steiler</option>
                            <option value="farbe">Die Linie ist rot</option>
                            <option value="lang">Die Linie ist länger</option>
                        </select>
                    </p>
                    <p>c) Welchen Weg hat der Radfahrer nach 4 Sekunden?
                        <input type="number" id="ex2-c" class="fill-blank" style="width:60px"> m
                    </p>
                    <button class="btn" onclick="checkExercise2()">Prüfen</button>
                    <div class="feedback" id="feedback-2"></div>
                </div>

                <div class="hefter-hinweis">
                    <ul>
                        <li><strong>Kasten 2:</strong> Übertrage den Merksatz (steil = schnell, flach = langsam)</li>
                        <li><strong>Aufgabe 1:</strong> Lies die Werte aus dem Diagramm ab</li>
                    </ul>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="prevStep(3)">← Zurück</button>
                    <button class="btn btn-success" onclick="nextStep(5)">Weiter →</button>
                </div>
            </div>
        </div>

        <!-- ========== SCHRITT 5: Stillstand und ungleichförmige Bewegung ========== -->
        <div class="step" id="step5">
            <div class="step-header">Schritt 5: Stillstand und ungleichförmige Bewegung</div>
            <div class="step-content">
                <p>Nicht jede Bewegung sieht gleich aus. Schauen wir uns zwei besondere Fälle an:</p>

                <h3>Stillstand (waagerechte Linie)</h3>
                <p>Wenn ein Körper <strong>steht</strong>, ändert sich sein Weg nicht. Die Zeit vergeht trotzdem!</p>

                <div class="diagram-container">
                    <svg viewBox="0 0 300 180" width="300" height="180">
                        <line x1="40" y1="150" x2="280" y2="150" stroke="#222" stroke-width="2"/>
                        <line x1="40" y1="150" x2="40" y2="20" stroke="#222" stroke-width="2"/>
                        <polygon points="280,150 270,145 270,155" fill="#222"/>
                        <polygon points="40,20 35,30 45,30" fill="#222"/>
                        <text x="260" y="170" font-size="12">t in s</text>
                        <text x="50" y="32" font-size="12">s in m</text>
                        <text x="35" y="165" font-size="10">0</text>
                        <text x="95" y="165" font-size="10">2</text>
                        <text x="155" y="165" font-size="10">4</text>
                        <text x="215" y="165" font-size="10">6</text>
                        <text x="25" y="110" font-size="10">20</text>
                        <text x="25" y="70" font-size="10">40</text>
                        <!-- Waagerechte Linie bei s = 20 m -->
                        <line x1="40" y1="110" x2="240" y2="110" stroke="#2c5aa0" stroke-width="3"/>
                        <text x="245" y="105" font-size="11" fill="#2c5aa0">Auto (steht)</text>
                    </svg>
                </div>

                <div class="info-box">
                    <strong>Erkenntnis:</strong> Eine <strong>waagerechte Linie</strong> bedeutet <strong>Stillstand</strong>. Der Körper bewegt sich nicht, obwohl die Zeit weiterläuft.
                </div>

                <h3>Ungleichförmige Bewegung (Kurve)</h3>
                <p>Manchmal ändert sich die Geschwindigkeit: Ein Auto <strong>beschleunigt</strong> oder <strong>bremst</strong>.</p>

                <div class="diagram-container">
                    <svg viewBox="0 0 300 180" width="300" height="180">
                        <line x1="40" y1="150" x2="280" y2="150" stroke="#222" stroke-width="2"/>
                        <line x1="40" y1="150" x2="40" y2="20" stroke="#222" stroke-width="2"/>
                        <polygon points="280,150 270,145 270,155" fill="#222"/>
                        <polygon points="40,20 35,30 45,30" fill="#222"/>
                        <text x="260" y="170" font-size="12">t in s</text>
                        <text x="50" y="32" font-size="12">s in m</text>
                        <text x="35" y="165" font-size="10">0</text>
                        <text x="95" y="165" font-size="10">2</text>
                        <text x="155" y="165" font-size="10">4</text>
                        <text x="215" y="165" font-size="10">6</text>
                        <text x="25" y="110" font-size="10">20</text>
                        <text x="25" y="70" font-size="10">40</text>
                        <!-- Kurve: erst langsam, dann schneller -->
                        <path d="M40,150 Q100,140 150,100 T240,30" fill="none" stroke="#c62828" stroke-width="3"/>
                        <text x="245" y="35" font-size="11" fill="#c62828">Auto (beschleunigt)</text>
                    </svg>
                </div>

                <div class="info-box">
                    <strong>Erkenntnis:</strong> Eine <strong>Kurve</strong> (keine Gerade!) bedeutet <strong>ungleichförmige Bewegung</strong>. Die Geschwindigkeit ändert sich.
                </div>

                <div class="merksatz">
                    <strong>Zusammenfassung – Vier Bewegungsarten:</strong><br><br>
                    • <strong>Steile Gerade</strong> → schnelle gleichförmige Bewegung<br>
                    • <strong>Flache Gerade</strong> → langsame gleichförmige Bewegung<br>
                    • <strong>Waagerechte Linie</strong> → Stillstand<br>
                    • <strong>Kurve</strong> → ungleichförmige Bewegung (v ändert sich)
                </div>

                <div class="exercise">
                    <div class="exercise-title">Übung 5: Bewegungsarten erkennen <span class="niveau-badge">★</span></div>
                    <p>Welche Bewegungsart zeigt dieses Diagramm?</p>
                    <div class="diagram-container" style="display: inline-block; margin-right: 20px;">
                        <svg viewBox="0 0 120 90" width="120" height="90">
                            <line x1="20" y1="70" x2="110" y2="70" stroke="#222" stroke-width="1.5"/>
                            <line x1="20" y1="70" x2="20" y2="15" stroke="#222" stroke-width="1.5"/>
                            <text x="100" y="83" font-size="8">t</text>
                            <text x="25" y="22" font-size="8">s</text>
                            <line x1="20" y1="40" x2="100" y2="40" stroke="#2c5aa0" stroke-width="2"/>
                        </svg>
                    </div>
                    <select id="ex5" class="inline-select">
                        <option value="">-- wählen --</option>
                        <option value="schnell">Schnelle gleichförmige Bewegung</option>
                        <option value="langsam">Langsame gleichförmige Bewegung</option>
                        <option value="stillstand">Stillstand</option>
                        <option value="ungleich">Ungleichförmige Bewegung</option>
                    </select>
                    <br><br>
                    <button class="btn" onclick="checkExercise5()">Prüfen</button>
                    <div class="feedback" id="feedback-5"></div>
                </div>

                <div class="hefter-hinweis">
                    <ul>
                        <li><strong>Kasten 3:</strong> Ergänze die vier Bewegungsarten (steil, flach, waagerecht, Kurve)</li>
                    </ul>
                </div>

                <div class="exercise">
                    <div class="exercise-title">Übung 3: Ohne Zahlen <span class="niveau-badge">★★</span></div>
                    <p>Was passiert in den drei Abschnitten?</p>
                    <div class="diagram-container" style="display: inline-block;">
                        <svg viewBox="0 0 200 120" width="200" height="120">
                            <line x1="30" y1="100" x2="180" y2="100" stroke="#222" stroke-width="1.5"/>
                            <line x1="30" y1="100" x2="30" y2="20" stroke="#222" stroke-width="1.5"/>
                            <text x="170" y="115" font-size="10">t</text>
                            <text x="35" y="28" font-size="10">s</text>
                            <line x1="30" y1="100" x2="60" y2="50" stroke="#2c5aa0" stroke-width="2.5"/>
                            <line x1="60" y1="50" x2="110" y2="50" stroke="#2c5aa0" stroke-width="2.5"/>
                            <line x1="110" y1="50" x2="170" y2="30" stroke="#2c5aa0" stroke-width="2.5"/>
                            <text x="42" y="68" font-size="9" fill="#555">1</text>
                            <text x="82" y="45" font-size="9" fill="#555">2</text>
                            <text x="138" y="35" font-size="9" fill="#555">3</text>
                        </svg>
                    </div>
                    <p>Abschnitt 1:
                        <select id="ex3-1" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="schnell">Schnelle gleichf. Bewegung</option>
                            <option value="langsam">Langsame gleichf. Bewegung</option>
                            <option value="stillstand">Stillstand</option>
                        </select>
                    </p>
                    <p>Abschnitt 2:
                        <select id="ex3-2" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="schnell">Schnelle gleichf. Bewegung</option>
                            <option value="langsam">Langsame gleichf. Bewegung</option>
                            <option value="stillstand">Stillstand</option>
                        </select>
                    </p>
                    <p>Abschnitt 3:
                        <select id="ex3-3" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="schnell">Schnelle gleichf. Bewegung</option>
                            <option value="langsam">Langsame gleichf. Bewegung</option>
                            <option value="stillstand">Stillstand</option>
                        </select>
                    </p>
                    <button class="btn" onclick="checkExercise3()">Prüfen</button>
                    <div class="feedback" id="feedback-3"></div>
                </div>

                <div class="exercise">
                    <div class="exercise-title">Übung 4: Stillstand oder gleichförmig? <span class="niveau-badge">★</span></div>
                    <p>Welche Bewegungsart zeigen die Linien A und B?</p>
                    <div class="diagram-container" style="display: inline-block;">
                        <svg viewBox="0 0 200 120" width="200" height="120">
                            <line x1="30" y1="100" x2="180" y2="100" stroke="#222" stroke-width="1.5"/>
                            <line x1="30" y1="100" x2="30" y2="20" stroke="#222" stroke-width="1.5"/>
                            <text x="170" y="115" font-size="10">t</text>
                            <text x="35" y="28" font-size="10">s</text>
                            <line x1="30" y1="100" x2="170" y2="100" stroke="#2c5aa0" stroke-width="2.5"/>
                            <text x="175" y="103" font-size="10" fill="#2c5aa0">A</text>
                            <line x1="30" y1="100" x2="170" y2="40" stroke="#c62828" stroke-width="2.5"/>
                            <text x="175" y="43" font-size="10" fill="#c62828">B</text>
                        </svg>
                    </div>
                    <p>Linie A:
                        <select id="ex4-a" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="gleichf">Gleichförmige Bewegung</option>
                            <option value="stillstand">Stillstand</option>
                        </select>
                    </p>
                    <p>Linie B:
                        <select id="ex4-b" class="inline-select">
                            <option value="">-- wählen --</option>
                            <option value="gleichf">Gleichförmige Bewegung</option>
                            <option value="stillstand">Stillstand</option>
                        </select>
                    </p>
                    <button class="btn" onclick="checkExercise4()">Prüfen</button>
                    <div class="feedback" id="feedback-4"></div>
                </div>

                <div class="hefter-hinweis">
                    <ul>
                        <li><strong>Aufgabe 3:</strong> Beschreibe die drei Bewegungsabschnitte</li>
                        <li><strong>Aufgabe 4:</strong> Kreuze die richtige Bewegungsart an</li>
                    </ul>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="prevStep(4)">← Zurück</button>
                    <button class="btn btn-success" onclick="nextStep(6)">Weiter →</button>
                </div>
            </div>
        </div>

        <!-- ========== SCHRITT 6: Selbst zeichnen ========== -->
        <div class="step" id="step6">
            <div class="step-header">Schritt 6: Selbst ein Diagramm zeichnen</div>
            <div class="step-content">
                <p>Jetzt bist du dran! Zeichne das Diagramm für einen <strong>Jogger</strong>:</p>

                <table>
                    <tr>
                        <th>Zeit <em>t</em> in s</th>
                        <td>0</td><td>5</td><td>10</td><td>15</td><td>20</td>
                    </tr>
                    <tr>
                        <th>Weg <em>s</em> in m</th>
                        <td>0</td><td>25</td><td>50</td><td>75</td><td>100</td>
                    </tr>
                </table>

                <div class="interactive-diagram">
                    <h3>Interaktives Zeichenfeld</h3>
                    <p>Klicke auf die richtigen Stellen, um die Punkte einzuzeichnen:</p>
                    <canvas id="diagram-canvas" width="450" height="300"></canvas>
                    <div class="canvas-controls">
                        <button onclick="checkDiagram()">Punkte prüfen</button>
                        <button onclick="resetCanvas()">Zurücksetzen</button>
                    </div>
                    <div class="feedback" id="feedback-canvas"></div>
                </div>

                <div class="exercise">
                    <div class="exercise-title">Übung 6: Geschwindigkeit bestimmen <span class="niveau-badge">★★</span></div>
                    <p>Der Jogger legt in 20 Sekunden 100 Meter zurück.</p>
                    <p>Berechne seine Geschwindigkeit: <em>v</em> =
                        <input type="number" id="ex6-s" class="fill-blank" style="width:50px"> m ÷
                        <input type="number" id="ex6-t" class="fill-blank" style="width:50px"> s =
                        <input type="number" id="ex6-v" class="fill-blank" style="width:50px"> m/s
                    </p>
                    <button class="btn" onclick="checkExercise6()">Prüfen</button>
                    <div class="feedback" id="feedback-6"></div>
                </div>

                <div class="hefter-hinweis">
                    <ul>
                        <li><strong>Aufgabe 2:</strong> Zeichne das Diagramm für den Jogger ins Arbeitsblatt</li>
                    </ul>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="prevStep(5)">← Zurück</button>
                    <button class="btn btn-success" onclick="nextStep(7)">Weiter →</button>
                </div>
            </div>
        </div>

        <!-- ========== SCHRITT 7: Vergleichen ========== -->
        <div class="step" id="step7">
            <div class="step-header">Schritt 7: Bewegungen vergleichen</div>
            <div class="step-content">
                <p>Das Weg-Zeit-Diagramm ist besonders nützlich, um verschiedene Bewegungen zu <strong>vergleichen</strong>.</p>

                <div class="diagram-container">
                    <svg viewBox="0 0 400 280" width="400" height="280">
                        <line x1="50" y1="230" x2="380" y2="230" stroke="#222" stroke-width="2"/>
                        <line x1="50" y1="230" x2="50" y2="30" stroke="#222" stroke-width="2"/>
                        <polygon points="380,230 370,225 370,235" fill="#222"/>
                        <polygon points="50,30 45,40 55,40" fill="#222"/>
                        <text x="360" y="255" font-size="14" fill="#222"><tspan font-style="italic">t</tspan> in s</text>
                        <text x="60" y="45" font-size="14" fill="#222"><tspan font-style="italic">s</tspan> in m</text>
                        <text x="47" y="250" font-size="11">0</text>
                        <text x="87" y="250" font-size="11">2</text>
                        <text x="127" y="250" font-size="11">4</text>
                        <text x="167" y="250" font-size="11">6</text>
                        <text x="207" y="250" font-size="11">8</text>
                        <text x="247" y="250" font-size="11">10</text>
                        <text x="25" y="214" font-size="11">10</text>
                        <text x="25" y="174" font-size="11">30</text>
                        <text x="25" y="134" font-size="11">50</text>
                        <text x="25" y="94" font-size="11">70</text>
                        <text x="25" y="54" font-size="11">90</text>
                        <line x1="50" y1="230" x2="170" y2="70" stroke="#2a7a4b" stroke-width="2"/>
                        <text x="120" y="55" font-size="11" fill="#2a7a4b">Auto</text>
                        <line x1="50" y1="230" x2="250" y2="110" stroke="#c62828" stroke-width="2"/>
                        <text x="200" y="95" font-size="11" fill="#c62828">Radfahrer</text>
                        <line x1="50" y1="230" x2="250" y2="190" stroke="#2c5aa0" stroke-width="2"/>
                        <text x="200" y="180" font-size="11" fill="#2c5aa0">Fußgänger</text>
                    </svg>
                </div>

                <div class="exercise">
                    <div class="exercise-title">Übung 7: Bewegungen vergleichen <span class="niveau-badge">★★★</span></div>
                    <p>Ordne die Bewegungen nach ihrer Geschwindigkeit (1 = schnellste):</p>
                    <p>
                        Auto: Platz
                        <select id="ex7-auto" class="inline-select">
                            <option value="">--</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        &nbsp; Radfahrer: Platz
                        <select id="ex7-rad" class="inline-select">
                            <option value="">--</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                        &nbsp; Fußgänger: Platz
                        <select id="ex7-fuss" class="inline-select">
                            <option value="">--</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                    </p>
                    <button class="btn" onclick="checkExercise7()">Prüfen</button>
                    <div class="feedback" id="feedback-7"></div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="prevStep(6)">← Zurück</button>
                    <button class="btn btn-success" onclick="nextStep(8)">Weiter →</button>
                </div>
            </div>
        </div>

        <!-- ========== SCHRITT 8: Zusammenfassung ========== -->
        <div class="step" id="step8">
            <div class="step-header">Schritt 8: Zusammenfassung</div>
            <div class="step-content">
                <div class="merksatz">
                    <strong>Das Wichtigste zum Weg-Zeit-Diagramm:</strong><br><br>
                    1. Die <strong>Zeit</strong> (<em>t</em>) kommt auf die <strong>waagerechte</strong> Achse (x-Achse).<br><br>
                    2. Der <strong>Weg</strong> (<em>s</em>) kommt auf die <strong>senkrechte</strong> Achse (y-Achse).<br><br>
                    3. Bei gleichförmiger Bewegung ergibt sich eine <strong>Gerade</strong>.<br><br>
                    4. <strong>Steile Gerade</strong> = schnelle gleichförmige Bewegung<br>
                       <strong>Flache Gerade</strong> = langsame gleichförmige Bewegung<br>
                       <strong>Waagerechte Linie</strong> = Stillstand<br>
                       <strong>Kurve</strong> = ungleichförmige Bewegung (v ändert sich)
                </div>

                <div class="info-box" style="background: var(--success-bg); border-color: var(--success);">
                    <strong>Geschafft!</strong> Du hast gelernt, wie man Bewegungen im Weg-Zeit-Diagramm darstellt und interpretiert.
                </div>

                <div class="hefter-hinweis">
                    <ul>
                        <li><strong>Vervollständige</strong> alle Kästen und Aufgaben im Arbeitsblatt</li>
                    </ul>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="prevStep(7)">← Zurück</button>
                </div>
            </div>
        </div>
    </div>

    <script>
    // ════════════════════════════════════════════════════════════════
    // LP-003 LERNPFAD LOGIK (ES5)
    // ════════════════════════════════════════════════════════════════

    var TOTAL_STEPS = 8;
    var STORAGE_KEY = 'lp-003-st-diagramme';

    var currentStep = 1;
    var visitedSteps = [];

    // ───────────────────────────────────────────────────────────────
    // PROGRESS & STEP-INDICATORS
    // ───────────────────────────────────────────────────────────────
    function updateProgress() {
        var percent = ((currentStep - 1) / (TOTAL_STEPS - 1)) * 100;
        document.getElementById('progressFill').style.width = percent + '%';
    }

    function generateStepIndicators() {
        var container = document.getElementById('stepIndicators');
        container.innerHTML = '';
        for (var i = 1; i <= TOTAL_STEPS; i++) {
            var dot = document.createElement('div');
            dot.className = 'step-dot';
            if (i === currentStep) dot.classList.add('current');
            if (visitedSteps.indexOf(i) !== -1) dot.classList.add('completed');
            dot.textContent = i;
            dot.setAttribute('data-step', i);
            dot.onclick = function() {
                var stepIndex = parseInt(this.getAttribute('data-step'));
                showStep(stepIndex);
            };
            container.appendChild(dot);
        }
    }

    function updateStepIndicators() {
        var dots = document.querySelectorAll('.step-dot');
        for (var i = 0; i < dots.length; i++) {
            var stepNum = i + 1;
            dots[i].classList.remove('current');
            if (stepNum === currentStep) {
                dots[i].classList.add('current');
            }
            if (visitedSteps.indexOf(stepNum) !== -1) {
                dots[i].classList.add('completed');
            }
        }
    }

    // ───────────────────────────────────────────────────────────────
    // NAVIGATION
    // ───────────────────────────────────────────────────────────────
    function showStep(n) {
        if (visitedSteps.indexOf(currentStep) === -1) {
            visitedSteps.push(currentStep);
        }

        for (var i = 1; i <= TOTAL_STEPS; i++) {
            var step = document.getElementById('step' + i);
            if (step) step.classList.remove('active');
        }

        var targetStep = document.getElementById('step' + n);
        if (targetStep) {
            targetStep.classList.add('active');
            currentStep = n;
            updateProgress();
            updateStepIndicators();
            saveProgress();
            window.scrollTo(0, 0);
        }
    }

    function nextStep(n) { showStep(n); }
    function prevStep(n) { showStep(n); }

    // ───────────────────────────────────────────────────────────────
    // ÜBUNGEN PRÜFEN
    // ───────────────────────────────────────────────────────────────
    function checkExercise1() {
        var x = document.getElementById('ex1-x').value;
        var y = document.getElementById('ex1-y').value;
        var feedback = document.getElementById('feedback-1');

        if (x === 't' && y === 's') {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Richtig!</strong> Die Zeit kommt auf die waagerechte Achse, der Weg auf die senkrechte.';
        } else if (x === '' || y === '') {
            feedback.className = 'feedback hint';
            feedback.innerHTML = 'Bitte wähle beide Achsen aus.';
        } else {
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = '<strong>Nicht ganz.</strong> Die Zeit (t) kommt auf die waagerechte Achse (x), der Weg (s) auf die senkrechte (y).';
        }
    }

    function checkExercise2() {
        var a = document.getElementById('ex2-a').value;
        var b = document.getElementById('ex2-b').value;
        var c = parseFloat(document.getElementById('ex2-c').value);
        var feedback = document.getElementById('feedback-2');

        var correct = 0;
        var hints = [];

        if (a === 'rad') correct++;
        else if (a !== '') hints.push('a) Der Radfahrer ist schneller.');

        if (b === 'steil') correct++;
        else if (b !== '') hints.push('b) Steilere Gerade = schneller.');

        if (c === 30 || c === 27 || c === 28) correct++;
        else if (c) hints.push('c) Lies bei t = 4 s ab (etwa 30 m).');

        if (correct === 3) {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Sehr gut!</strong> Alle Antworten richtig.';
        } else if (correct >= 1) {
            feedback.className = 'feedback hint';
            feedback.innerHTML = '<strong>' + correct + '/3 richtig.</strong><br>' + hints.join('<br>');
        } else {
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = 'Schau dir das Diagramm nochmal an. ' + hints.join(' ');
        }
    }

    function checkExercise3() {
        var a1 = document.getElementById('ex3-1').value;
        var a2 = document.getElementById('ex3-2').value;
        var a3 = document.getElementById('ex3-3').value;
        var feedback = document.getElementById('feedback-3');

        var correct = 0;
        if (a1 === 'schnell') correct++;
        if (a2 === 'stillstand') correct++;
        if (a3 === 'langsam') correct++;

        if (correct === 3) {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Perfekt!</strong> Abschnitt 1: steil = schnell, Abschnitt 2: waagerecht = Stillstand, Abschnitt 3: flach = langsam.';
        } else if (correct >= 1) {
            feedback.className = 'feedback hint';
            feedback.innerHTML = correct + '/3 richtig. Tipp: Steil = schnell, waagerecht = Stillstand, flach = langsam.';
        } else {
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = 'Schau dir die Steigung in jedem Abschnitt an. Steil, waagerecht oder flach?';
        }
    }

    function checkExercise4() {
        var a = document.getElementById('ex4-a').value;
        var b = document.getElementById('ex4-b').value;
        var feedback = document.getElementById('feedback-4');

        if (a === 'stillstand' && b === 'gleichf') {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Richtig!</strong> A liegt auf der x-Achse (Weg = 0) = Stillstand. B steigt an = gleichförmige Bewegung.';
        } else if (a === '' || b === '') {
            feedback.className = 'feedback hint';
            feedback.innerHTML = 'Bitte wähle für beide Linien eine Antwort.';
        } else {
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = 'Beachte: Linie A liegt auf der x-Achse (s = 0). Was bedeutet das?';
        }
    }

    function checkExercise5() {
        var answer = document.getElementById('ex5').value;
        var feedback = document.getElementById('feedback-5');

        if (answer === 'stillstand') {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Richtig!</strong> Eine waagerechte Linie bedeutet Stillstand – der Körper bewegt sich nicht.';
        } else if (answer === '') {
            feedback.className = 'feedback hint';
            feedback.innerHTML = 'Bitte wähle eine Bewegungsart aus.';
        } else {
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = 'Schau genau hin: Die Linie ist waagerecht. Was bedeutet das für den Weg?';
        }
    }

    function checkExercise6() {
        var s = parseFloat(document.getElementById('ex6-s').value);
        var t = parseFloat(document.getElementById('ex6-t').value);
        var v = parseFloat(document.getElementById('ex6-v').value);
        var feedback = document.getElementById('feedback-6');

        if (s === 100 && t === 20 && v === 5) {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Perfekt!</strong> v = 100 m ÷ 20 s = 5 m/s.';
        } else if (v === 5) {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Richtig!</strong> Die Geschwindigkeit ist 5 m/s.';
        } else if (s === 100 && t === 20) {
            feedback.className = 'feedback hint';
            feedback.innerHTML = 'Fast! Jetzt noch 100 ÷ 20 ausrechnen...';
        } else {
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = 'Denk daran: v = s ÷ t. Der Jogger legt 100 m in 20 s zurück.';
        }
    }

    function checkExercise7() {
        var auto = document.getElementById('ex7-auto').value;
        var rad = document.getElementById('ex7-rad').value;
        var fuss = document.getElementById('ex7-fuss').value;
        var feedback = document.getElementById('feedback-7');

        if (auto === '1' && rad === '2' && fuss === '3') {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Richtig!</strong> Auto ist am schnellsten (steilste Gerade), dann Radfahrer, dann Fußgänger. Je steiler die Gerade, desto schneller die Bewegung.';
        } else {
            feedback.className = 'feedback hint';
            feedback.innerHTML = 'Schau dir die Steilheit der Geraden an: Je steiler, desto schneller. Welche Gerade ist am steilsten?';
        }
    }

    // ───────────────────────────────────────────────────────────────
    // CANVAS für interaktives Diagramm
    // ───────────────────────────────────────────────────────────────
    var canvas = document.getElementById('diagram-canvas');
    var ctx = canvas.getContext('2d');
    var userPoints = [];
    var correctPoints = [
        {x: 50, y: 250},
        {x: 100, y: 200},
        {x: 150, y: 150},
        {x: 200, y: 100},
        {x: 250, y: 50}
    ];
    var tolerance = 15;

    function drawGrid() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.strokeStyle = '#eee';
        ctx.lineWidth = 1;
        for (var x = 50; x <= 350; x += 50) {
            ctx.beginPath();
            ctx.moveTo(x, 30);
            ctx.lineTo(x, 250);
            ctx.stroke();
        }
        for (var y = 50; y <= 250; y += 50) {
            ctx.beginPath();
            ctx.moveTo(50, y);
            ctx.lineTo(350, y);
            ctx.stroke();
        }

        ctx.strokeStyle = '#222';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(50, 250);
        ctx.lineTo(380, 250);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(50, 250);
        ctx.lineTo(50, 20);
        ctx.stroke();

        ctx.fillStyle = '#222';
        ctx.font = '14px sans-serif';
        ctx.fillText('t in s', 355, 275);
        ctx.fillText('s in m', 60, 35);

        ctx.font = '12px sans-serif';
        var xLabels = ['0', '5', '10', '15', '20'];
        for (var i = 0; i < xLabels.length; i++) {
            ctx.fillText(xLabels[i], 47 + i * 50, 268);
        }
        var yLabels = ['0', '25', '50', '75', '100'];
        for (var j = 0; j < yLabels.length; j++) {
            ctx.fillText(yLabels[j], 20, 254 - j * 50);
        }

        ctx.fillStyle = '#2c5aa0';
        for (var k = 0; k < userPoints.length; k++) {
            ctx.beginPath();
            ctx.arc(userPoints[k].x, userPoints[k].y, 6, 0, Math.PI * 2);
            ctx.fill();
        }

        if (userPoints.length >= 2) {
            ctx.strokeStyle = '#2c5aa0';
            ctx.lineWidth = 2;
            ctx.beginPath();
            var sorted = userPoints.slice().sort(function(a, b) { return a.x - b.x; });
            ctx.moveTo(sorted[0].x, sorted[0].y);
            for (var m = 1; m < sorted.length; m++) {
                ctx.lineTo(sorted[m].x, sorted[m].y);
            }
            ctx.stroke();
        }
    }

    canvas.addEventListener('click', function(e) {
        var rect = canvas.getBoundingClientRect();
        var x = e.clientX - rect.left;
        var y = e.clientY - rect.top;
        if (x >= 40 && x <= 360 && y >= 30 && y <= 260) {
            userPoints.push({x: x, y: y});
            drawGrid();
        }
    });

    function resetCanvas() {
        userPoints = [];
        drawGrid();
        var fb = document.getElementById('feedback-canvas');
        fb.className = 'feedback';
        fb.style.display = 'none';
    }

    function checkDiagram() {
        var feedback = document.getElementById('feedback-canvas');
        var correctCount = 0;

        for (var i = 0; i < correctPoints.length; i++) {
            var cp = correctPoints[i];
            for (var j = 0; j < userPoints.length; j++) {
                var up = userPoints[j];
                var dist = Math.sqrt(Math.pow(up.x - cp.x, 2) + Math.pow(up.y - cp.y, 2));
                if (dist < tolerance) {
                    correctCount++;
                    break;
                }
            }
        }

        if (correctCount >= 4) {
            feedback.className = 'feedback correct';
            feedback.innerHTML = '<strong>Super!</strong> ' + correctCount + '/5 Punkte richtig.';
        } else if (correctCount >= 2) {
            feedback.className = 'feedback hint';
            feedback.innerHTML = correctCount + '/5 Punkte richtig. Lies die Werte aus der Tabelle ab.';
        } else {
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = 'Versuche es nochmal. Bei t = 0 s ist s = 0 m, bei t = 5 s ist s = 25 m.';
        }
    }

    // ───────────────────────────────────────────────────────────────
    // PERSISTENZ
    // ───────────────────────────────────────────────────────────────
    function saveProgress() {
        try {
            localStorage.setItem(STORAGE_KEY + '-step', currentStep);
            localStorage.setItem(STORAGE_KEY + '-visited', JSON.stringify(visitedSteps));
            var inputs = document.querySelectorAll('input, select');
            for (var i = 0; i < inputs.length; i++) {
                var el = inputs[i];
                if (el.id) {
                    localStorage.setItem(STORAGE_KEY + '-' + el.id, el.value);
                }
            }
        } catch (e) {}
    }

    function loadProgress() {
        try {
            var savedVisited = localStorage.getItem(STORAGE_KEY + '-visited');
            if (savedVisited) visitedSteps = JSON.parse(savedVisited);
            var savedStep = localStorage.getItem(STORAGE_KEY + '-step');
            if (savedStep) currentStep = parseInt(savedStep);
            var inputs = document.querySelectorAll('input, select');
            for (var i = 0; i < inputs.length; i++) {
                var el = inputs[i];
                if (el.id) {
                    var saved = localStorage.getItem(STORAGE_KEY + '-' + el.id);
                    if (saved) el.value = saved;
                }
            }
        } catch (e) {}
    }

    document.addEventListener('change', saveProgress);

    // ───────────────────────────────────────────────────────────────
    // INIT
    // ───────────────────────────────────────────────────────────────
    loadProgress();
    generateStepIndicators();
    updateProgress();
    drawGrid();

    if (currentStep > 1) {
        for (var i = 1; i <= TOTAL_STEPS; i++) {
            var step = document.getElementById('step' + i);
            if (step) step.classList.remove('active');
        }
        var targetStep = document.getElementById('step' + currentStep);
        if (targetStep) {
            targetStep.classList.add('active');
            updateStepIndicators();
        }
    }
    </script>
</body>
</html>
